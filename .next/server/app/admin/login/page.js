(()=>{var e={};e.id=920,e.ids=[920],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1368:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>h,tree:()=>d}),s(8358),s(1506),s(5866);var a=s(3191),r=s(8716),n=s(7922),i=s.n(n),l=s(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["admin",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8358)),"/Users/libanadan/Desktop/final_frontend/app/admin/login/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/Users/libanadan/Desktop/final_frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/libanadan/Desktop/final_frontend/app/admin/login/page.tsx"],u="/admin/login/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/login/page",pathname:"/admin/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9146:(e,t,s)=>{Promise.resolve().then(s.bind(s,1011))},7692:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},9562:()=>{},1011:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>nc});var a,r,n,i=s(326),l=s(7577),c=s(772),d=s(7863);let o=l.forwardRef(({className:e,...t},s)=>i.jsx("div",{ref:s,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card";let u=l.forwardRef(({className:e,...t},s)=>i.jsx("div",{ref:s,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",e),...t}));u.displayName="CardHeader";let m=l.forwardRef(({className:e,...t},s)=>i.jsx("h3",{ref:s,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));m.displayName="CardTitle",l.forwardRef(({className:e,...t},s)=>i.jsx("p",{ref:s,className:(0,d.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let h=l.forwardRef(({className:e,...t},s)=>i.jsx("div",{ref:s,className:(0,d.cn)("p-6 pt-0",e),...t}));h.displayName="CardContent",l.forwardRef(({className:e,...t},s)=>i.jsx("div",{ref:s,className:(0,d.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";let x=l.forwardRef(({className:e,type:t,...s},a)=>i.jsx("input",{type:t,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));x.displayName="Input";var p=s(3198);let f=(0,s(9360).j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),j=l.forwardRef(({className:e,variant:t,...s},a)=>i.jsx("div",{ref:a,role:"alert",className:(0,d.cn)(f({variant:t}),e),...s}));j.displayName="Alert",l.forwardRef(({className:e,...t},s)=>i.jsx("h5",{ref:s,className:(0,d.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let g=l.forwardRef(({className:e,...t},s)=>i.jsx("div",{ref:s,className:(0,d.cn)("text-sm [&_p]:leading-relaxed",e),...t}));g.displayName="AlertDescription";var v=s(6557);let y=(0,v.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),w=(0,v.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),N=(0,v.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),b=(0,v.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),k=(0,v.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),_=(0,v.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),C=(0,v.Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),S=(0,v.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);class P{constructor(e="/api"){this.token=null,this.baseUrl=e,this.token=null}setToken(e){this.token=e}clearToken(){this.token=null}getHeaders(){let e={"Content-Type":"application/json"};return this.token&&(e.Authorization=`Bearer ${this.token}`),e}async get(e,t={}){let s=await fetch(`${this.baseUrl}${e}`,{method:"GET",headers:this.getHeaders(),...t});if(!s.ok)throw Error(`HTTP error! status: ${s.status}`);return s.json()}async post(e,t,s={}){let a=await fetch(`${this.baseUrl}${e}`,{method:"POST",headers:this.getHeaders(),body:t?JSON.stringify(t):void 0,...s});if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);return a.json()}async put(e,t,s={}){let a=await fetch(`${this.baseUrl}${e}`,{method:"PUT",headers:this.getHeaders(),body:t?JSON.stringify(t):void 0,...s});if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);return a.json()}async delete(e,t={}){let s=await fetch(`${this.baseUrl}${e}`,{method:"DELETE",headers:this.getHeaders(),...t});if(!s.ok)throw Error(`HTTP error! status: ${s.status}`);return s.json()}}let L=new P;class A{constructor(){this.token=null,this.user=null}isAuthenticated(){return!!this.token}isAdmin(){return this.user?.is_admin||!1}getUser(){return this.user}setUser(e){this.user=e}setToken(e){this.token=e}clearAuth(){this.token=null,this.user=null}async checkAuth(){try{let e=await L.get("/api/auth/whoami");return this.setUser(e.user),e.user}catch(e){throw this.clearAuth(),e}}}let E=new A;async function T(e,t){try{await L.post("/api/audit/admin-action",{action:e,data:t,timestamp:new Date().toISOString(),adminId:E.getUser()?.id})}catch(e){console.error("Failed to log admin action:",e)}}async function R(e,t){try{await L.post("/api/audit/auth-event",{event:e,data:t,timestamp:new Date().toISOString(),userId:E.getUser()?.id})}catch(e){console.error("Failed to log auth event:",e)}}function M(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function z(e){let[t,s]=(0,l.useState)(null),[a,r]=(0,l.useState)(!0),[n,i]=(0,l.useState)(null),c=async()=>{try{r(!0),i(null);let t=await L.get(e);s(t)}catch(e){i(e)}finally{r(!1)}};return(0,l.useEffect)(()=>{c()},[e]),{data:t,isLoading:a,error:n,refetch:()=>{c()}}}function D(e){if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch{return String(e)}}function F(e){return e instanceof Error?e.stack:void 0}function I({onLogin:e,onGoBack:t}){let[s,a]=(0,l.useState)(""),[r,n]=(0,l.useState)(""),[d,f]=(0,l.useState)(!1),[v,P]=(0,l.useState)(!1),[A,M]=(0,l.useState)(""),[z,I]=(0,l.useState)(""),[V,O]=(0,l.useState)(!1),[U,$]=(0,l.useState)(""),[q,W]=(0,l.useState)(!1),[H,B]=(0,l.useState)(0),[Z,G]=(0,l.useState)(!1),[K,Y]=(0,l.useState)(0),X=async t=>{if(t.preventDefault(),M(""),I(""),!s||!r){M("Please enter both email and password");return}if(Z){M(`Account temporarily locked. Please wait ${K} seconds before trying again.`);return}P(!0);try{await R("admin_login_attempt",{email:s});let t=await L.post("/api/auth/login",{email:s,password:r,isAdmin:!0});if(t.ok&&t.user?.is_admin)E.setToken(t.token),E.setUser(t.user),await R("admin_login_success",{email:s,adminId:t.user.id}),await T("admin_login",{email:s,adminId:t.user.id,loginTime:new Date().toISOString()}),localStorage.removeItem("admin_lockout"),B(0),I("Login successful! Redirecting..."),setTimeout(()=>{e()},1e3);else throw Error("Admin access required")}catch(t){let e=H+1;if(B(e),await R("admin_login_failed",{email:s,error_message:D(t),stack:F(t),attempts:e}),e>=5)G(!0),Y(900),localStorage.setItem("admin_lockout",JSON.stringify({attempts:e,timestamp:Date.now()})),M("Too many failed attempts. Account locked for 15 minutes.");else{let s=D(t)||"Invalid admin credentials";M(`${s} (${5-e} attempts remaining)`)}}finally{P(!1)}},J=async e=>{if(e.preventDefault(),M(""),I(""),!U){M("Please enter your admin email address");return}W(!0);try{await R("admin_password_reset_request",{email:U}),await L.post("/api/admin/password-reset",{email:U}),await T("admin_password_reset_request",{email:U}),I("Password reset link sent to your email"),O(!1),$("")}catch(e){await R("admin_password_reset_failed",{email:U,error_message:D(e),stack:F(e)}),M(D(e)||"Failed to send password reset link")}finally{W(!1)}},Q=async()=>{P(!0),M("");try{await R("admin_demo_login");let t={id:"demo-admin",email:"admin@virtualaddresshub.co.uk",name:"Demo Admin",is_admin:!0,role:"super_admin"};E.setUser(t),E.setToken("demo-admin-token"),await T("admin_demo_login",{demoUser:t.email,loginTime:new Date().toISOString()}),I("Demo admin session created! Redirecting..."),setTimeout(()=>{e()},1e3)}catch(e){M("Failed to create demo session")}finally{P(!1)}};return i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-6",children:[i.jsx(y,{className:"h-8 w-8 text-primary"}),i.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Portal"})]}),i.jsx("h2",{className:"text-xl font-medium mb-2",children:"Administrator Access"}),i.jsx("p",{className:"text-muted-foreground",children:"Sign in to access the admin dashboard"})]}),(0,i.jsxs)(o,{children:[i.jsx(u,{children:(0,i.jsxs)(m,{className:"flex items-center gap-2",children:[i.jsx(y,{className:"h-5 w-5"}),"Admin Sign In"]})}),(0,i.jsxs)(h,{children:[A&&(0,i.jsxs)(j,{className:"mb-4",variant:"destructive",children:[i.jsx(w,{className:"h-4 w-4"}),i.jsx(g,{children:A})]}),z&&(0,i.jsxs)(j,{className:"mb-4",children:[i.jsx(N,{className:"h-4 w-4"}),i.jsx(g,{children:z})]}),Z&&(0,i.jsxs)(j,{className:"mb-4",variant:"destructive",children:[i.jsx(b,{className:"h-4 w-4"}),(0,i.jsxs)(g,{children:["Account locked due to too many failed attempts. Please wait ",`${Math.floor(K/60)}:${(K%60).toString().padStart(2,"0")}`," before trying again."]})]}),V?(0,i.jsxs)("form",{onSubmit:J,className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"resetEmail",children:"Admin Email"}),i.jsx(x,{id:"resetEmail",type:"email",value:U,onChange:e=>$(e.target.value),placeholder:"admin@virtualaddresshub.co.uk",required:!0})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[i.jsx(c.z,{type:"submit",className:"flex-1",disabled:q,children:q?(0,i.jsxs)(i.Fragment,{children:[i.jsx(C,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):"Send Reset Link"}),i.jsx(c.z,{type:"button",variant:"outline",onClick:()=>O(!1),children:"Cancel"})]})]}):(0,i.jsxs)("form",{onSubmit:X,className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"email",children:"Admin Email"}),i.jsx(x,{id:"email",type:"email",value:s,onChange:e=>a(e.target.value),placeholder:"admin@virtualaddresshub.co.uk",disabled:Z,required:!0})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"password",children:"Password"}),(0,i.jsxs)("div",{className:"relative",children:[i.jsx(x,{id:"password",type:d?"text":"password",value:r,onChange:e=>n(e.target.value),className:"pr-10",disabled:Z,required:!0}),i.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",disabled:Z,children:d?i.jsx(k,{className:"h-4 w-4"}):i.jsx(_,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsx(c.z,{type:"button",variant:"link",size:"sm",onClick:()=>O(!0),disabled:Z,children:"Forgot password?"})}),i.jsx(c.z,{type:"submit",className:"w-full",disabled:v||Z,children:v?(0,i.jsxs)(i.Fragment,{children:[i.jsx(C,{className:"h-4 w-4 mr-2 animate-spin"}),"Signing in..."]}):"Access Admin Panel"})]})]})]}),i.jsx("div",{className:"mt-6 text-center",children:(0,i.jsxs)(c.z,{variant:"outline",size:"sm",onClick:t||(()=>window.history.back()),children:[i.jsx(S,{className:"h-4 w-4 mr-2"}),"Back to website"]})}),(0,i.jsxs)("div",{className:"mt-6 p-4 bg-card rounded-lg border",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-sm font-medium mb-2",children:"Demo Access"}),i.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Use demo credentials for testing purposes"}),i.jsx(c.z,{variant:"outline",size:"sm",onClick:Q,disabled:v,className:"w-full",children:v?(0,i.jsxs)(i.Fragment,{children:[i.jsx(C,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating Demo Session..."]}):"Login as Demo Admin"})]}),(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Demo admin credentials:"}),i.jsx("p",{className:"text-xs font-mono",children:"Email: admin@virtualaddresshub.co.uk"}),i.jsx("p",{className:"text-xs font-mono",children:"Password: admin123"})]})]}),i.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-start gap-2",children:[i.jsx(w,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),(0,i.jsxs)("div",{className:"text-xs text-yellow-800",children:[i.jsx("p",{className:"font-medium",children:"Security Notice"}),i.jsx("p",{children:"Admin access is logged and monitored. Unauthorized access attempts will be reported."})]})]})})]})})}let V=(0,v.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),O=(0,v.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var U=s(5932);let $=(0,v.Z)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),q=(0,v.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),W=(0,v.Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),H=(0,v.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),B=(0,v.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Z=(0,v.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),G=(0,v.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),K=(0,v.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Y=(0,v.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function X({size:e="md",showText:t=!0,className:s=""}){return(0,i.jsxs)("div",{className:`flex items-center gap-2 ${s}`,children:[i.jsx("div",{className:`${{sm:"h-6 w-6",md:"h-8 w-8",lg:"h-12 w-12"}[e]} bg-primary rounded-lg flex items-center justify-center`,children:i.jsx("span",{className:"text-primary-foreground font-bold text-xs",children:"VAH"})}),t&&i.jsx("span",{className:`font-bold text-primary ${{sm:"text-sm",md:"text-lg",lg:"text-2xl"}[e]}`,children:"VirtualAddressHub"})]})}var J=s(567);let Q=(0,v.Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),ee=(0,v.Z)("Users2",[["path",{d:"M14 19a6 6 0 0 0-12 0",key:"vej9p1"}],["circle",{cx:"8",cy:"9",r:"4",key:"143rtg"}],["path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8",key:"hqbn22"}]]),et=(0,v.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),es=(0,v.Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),ea=(0,v.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);function er(){let[e,t]=(0,l.useState)(!1),[s,a]=(0,l.useState)(new Date),{data:r,isLoading:n,refetch:d}=z("/api/admin/stats"),{data:x,isLoading:p,refetch:f}=z("/api/admin/health"),{data:j,isLoading:g,refetch:v}=z("/api/admin/activity"),{data:y,isLoading:w,refetch:b}=z("/api/admin/pending"),k=async()=>{t(!0);try{await T("admin_overview_refresh"),await Promise.all([d(),f(),v(),b()]),a(new Date)}catch(e){await T("admin_overview_refresh_error",{error_message:D(e),stack:F(e)})}finally{t(!1)}},_=async()=>{try{await T("admin_view_all_activity"),window.open("/admin/activity","_blank")}catch(e){await T("admin_view_activity_error",{error_message:D(e),stack:F(e)})}},S=x||[],P=j||[];return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Admin Overview"}),i.jsx("p",{className:"text-muted-foreground",children:"Real-time system status and key performance metrics"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(J.C,{variant:"outline",className:"gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"System Operational"]}),(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:k,disabled:e,children:[i.jsx(C,{className:`h-4 w-4 ${e?"animate-spin":""}`}),"Refresh"]})]})]}),r?(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Users"}),i.jsx("p",{className:"text-2xl font-bold",children:r.totalUsers||0}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(Q,{className:"h-3 w-3"}),"+",r.userGrowth||0,"%"]})]}),i.jsx(ee,{className:"h-8 w-8 text-blue-500"})]})})}),i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"}),(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["\xa3",r.monthlyRevenue?.toLocaleString()||"0"]}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(Q,{className:"h-3 w-3"}),"+",r.revenueGrowth||0,"%"]})]}),i.jsx(et,{className:"h-8 w-8 text-green-500"})]})})}),i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Mail Processed"}),i.jsx("p",{className:"text-2xl font-bold",children:r.mailProcessed?.toLocaleString()||"0"}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(Q,{className:"h-3 w-3"}),"+",r.mailGrowth||0,"%"]})]}),i.jsx(U.Z,{className:"h-8 w-8 text-purple-500"})]})})}),i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Forwards"}),i.jsx("p",{className:"text-2xl font-bold",children:r.activeForwards||0}),(0,i.jsxs)("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[i.jsx(es,{className:"h-3 w-3"}),r.forwardGrowth||0,"%"]})]}),i.jsx($,{className:"h-8 w-8 text-orange-500"})]})})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.jsx(o,{children:i.jsx(h,{className:"p-6",children:i.jsx("div",{className:"text-center text-muted-foreground",children:"No stats data available"})})})}),(0,i.jsxs)(o,{children:[i.jsx(u,{children:i.jsx(m,{className:"text-lg",children:"System Health"})}),i.jsx(h,{children:0===S.length?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No system health data available"}):i.jsx("div",{className:"space-y-4",children:S.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"operational"===e.status?"text-green-500":"text-yellow-500",children:"operational"===e.status?i.jsx(N,{className:"h-4 w-4"}):i.jsx(B,{className:"h-4 w-4"})}),i.jsx("span",{className:"text-sm",children:e.label})]}),(0,i.jsxs)("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-muted-foreground",children:"Uptime"}),i.jsx("div",{className:"text-sm font-medium",children:e.uptime})]})]},t))})})]}),(0,i.jsxs)(o,{children:[(0,i.jsxs)(u,{className:"flex flex-row items-center justify-between",children:[i.jsx(m,{className:"text-lg",children:"Recent Activity"}),i.jsx(c.z,{variant:"outline",size:"sm",onClick:_,children:"View All"})]}),i.jsx(h,{children:0===P.length?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No recent activity"}):i.jsx("div",{className:"space-y-4",children:P.slice(0,5).map((e,t)=>(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 bg-muted rounded-lg",children:i.jsx(ea,{className:"h-4 w-4"})}),(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium",children:e.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:e.description}),i.jsx("p",{className:"text-xs text-muted-foreground",children:e.time})]})]},t))})})]})]})}let en=l.forwardRef(({className:e,...t},s)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:s,className:(0,d.cn)("w-full caption-bottom text-sm",e),...t})}));en.displayName="Table";let ei=l.forwardRef(({className:e,...t},s)=>i.jsx("thead",{ref:s,className:(0,d.cn)("[&_tr]:border-b",e),...t}));ei.displayName="TableHeader";let el=l.forwardRef(({className:e,...t},s)=>i.jsx("tbody",{ref:s,className:(0,d.cn)("[&_tr:last-child]:border-0",e),...t}));el.displayName="TableBody",l.forwardRef(({className:e,...t},s)=>i.jsx("tfoot",{ref:s,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let ec=l.forwardRef(({className:e,...t},s)=>i.jsx("tr",{ref:s,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ec.displayName="TableRow";let ed=l.forwardRef(({className:e,...t},s)=>i.jsx("th",{ref:s,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ed.displayName="TableHead";let eo=l.forwardRef(({className:e,...t},s)=>i.jsx("td",{ref:s,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));eo.displayName="TableCell",l.forwardRef(({className:e,...t},s)=>i.jsx("caption",{ref:s,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";var eu=s(962);function em(e,[t,s]){return Math.min(s,Math.max(t,e))}var eh=s(2561),ex=s(545),ep=s(8051),ef=s(3095),ej=s(7124),eg=s(5226),ev=s(5049),ey="dismissableLayer.update",ew=l.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),eN=l.forwardRef((e,t)=>{let{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:a,onPointerDownOutside:n,onFocusOutside:c,onInteractOutside:d,onDismiss:o,...u}=e,m=l.useContext(ew),[h,x]=l.useState(null),p=h?.ownerDocument??globalThis?.document,[,f]=l.useState({}),j=(0,ep.e)(t,e=>x(e)),g=Array.from(m.layers),[v]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(v),w=h?g.indexOf(h):-1,N=m.layersWithOutsidePointerEventsDisabled.size>0,b=w>=y,k=function(e,t=globalThis?.document){let s=(0,ev.W)(e),a=l.useRef(!1),r=l.useRef(()=>{});return l.useEffect(()=>{let e=e=>{if(e.target&&!a.current){let a=function(){ek("dismissableLayer.pointerDownOutside",s,n,{discrete:!0})},n={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",r.current),r.current=a,t.addEventListener("click",r.current,{once:!0})):a()}else t.removeEventListener("click",r.current);a.current=!1},n=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(n),t.removeEventListener("pointerdown",e),t.removeEventListener("click",r.current)}},[t,s]),{onPointerDownCapture:()=>a.current=!0}}(e=>{let t=e.target,s=[...m.branches].some(e=>e.contains(t));!b||s||(n?.(e),d?.(e),e.defaultPrevented||o?.())},p),_=function(e,t=globalThis?.document){let s=(0,ev.W)(e),a=l.useRef(!1);return l.useEffect(()=>{let e=e=>{e.target&&!a.current&&ek("dismissableLayer.focusOutside",s,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,s]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}(e=>{let t=e.target;[...m.branches].some(e=>e.contains(t))||(c?.(e),d?.(e),e.defaultPrevented||o?.())},p);return function(e,t=globalThis?.document){let s=(0,ev.W)(e);l.useEffect(()=>{let e=e=>{"Escape"===e.key&&s(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[s,t])}(e=>{w!==m.layers.size-1||(a?.(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},p),l.useEffect(()=>{if(h)return s&&(0===m.layersWithOutsidePointerEventsDisabled.size&&(r=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(h)),m.layers.add(h),eb(),()=>{s&&1===m.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=r)}},[h,p,s,m]),l.useEffect(()=>()=>{h&&(m.layers.delete(h),m.layersWithOutsidePointerEventsDisabled.delete(h),eb())},[h,m]),l.useEffect(()=>{let e=()=>f({});return document.addEventListener(ey,e),()=>document.removeEventListener(ey,e)},[]),(0,i.jsx)(eg.WV.div,{...u,ref:j,style:{pointerEvents:N?b?"auto":"none":void 0,...e.style},onFocusCapture:(0,eh.Mj)(e.onFocusCapture,_.onFocusCapture),onBlurCapture:(0,eh.Mj)(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:(0,eh.Mj)(e.onPointerDownCapture,k.onPointerDownCapture)})});function eb(){let e=new CustomEvent(ey);document.dispatchEvent(e)}function ek(e,t,s,{discrete:a}){let r=s.originalEvent.target,n=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&r.addEventListener(e,t,{once:!0}),a?(0,eg.jH)(r,n):r.dispatchEvent(n)}eN.displayName="DismissableLayer",l.forwardRef((e,t)=>{let s=l.useContext(ew),a=l.useRef(null),r=(0,ep.e)(t,a);return l.useEffect(()=>{let e=a.current;if(e)return s.branches.add(e),()=>{s.branches.delete(e)}},[s.branches]),(0,i.jsx)(eg.WV.div,{...e,ref:r})}).displayName="DismissableLayerBranch";var e_=0;function eC(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var eS="focusScope.autoFocusOnMount",eP="focusScope.autoFocusOnUnmount",eL={bubbles:!1,cancelable:!0},eA=l.forwardRef((e,t)=>{let{loop:s=!1,trapped:a=!1,onMountAutoFocus:r,onUnmountAutoFocus:n,...c}=e,[d,o]=l.useState(null),u=(0,ev.W)(r),m=(0,ev.W)(n),h=l.useRef(null),x=(0,ep.e)(t,e=>o(e)),p=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(a){let e=function(e){if(p.paused||!d)return;let t=e.target;d.contains(t)?h.current=t:eR(h.current,{select:!0})},t=function(e){if(p.paused||!d)return;let t=e.relatedTarget;null===t||d.contains(t)||eR(h.current,{select:!0})};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let s=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&eR(d)});return d&&s.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),s.disconnect()}}},[a,d,p.paused]),l.useEffect(()=>{if(d){eM.add(p);let e=document.activeElement;if(!d.contains(e)){let t=new CustomEvent(eS,eL);d.addEventListener(eS,u),d.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let s=document.activeElement;for(let a of e)if(eR(a,{select:t}),document.activeElement!==s)return}(eE(d).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&eR(d))}return()=>{d.removeEventListener(eS,u),setTimeout(()=>{let t=new CustomEvent(eP,eL);d.addEventListener(eP,m),d.dispatchEvent(t),t.defaultPrevented||eR(e??document.body,{select:!0}),d.removeEventListener(eP,m),eM.remove(p)},0)}}},[d,u,m,p]);let f=l.useCallback(e=>{if(!s&&!a||p.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){let t=e.currentTarget,[a,n]=function(e){let t=eE(e);return[eT(t,e),eT(t.reverse(),e)]}(t);a&&n?e.shiftKey||r!==n?e.shiftKey&&r===a&&(e.preventDefault(),s&&eR(n,{select:!0})):(e.preventDefault(),s&&eR(a,{select:!0})):r===t&&e.preventDefault()}},[s,a,p.paused]);return(0,i.jsx)(eg.WV.div,{tabIndex:-1,...c,ref:x,onKeyDown:f})});function eE(e){let t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function eT(e,t){for(let s of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(s,{upTo:t}))return s}function eR(e,{select:t=!1}={}){if(e&&e.focus){var s;let a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&(s=e)instanceof HTMLInputElement&&"select"in s&&t&&e.select()}}eA.displayName="FocusScope";var eM=function(){let e=[];return{add(t){let s=e[0];t!==s&&s?.pause(),(e=ez(e,t)).unshift(t)},remove(t){e=ez(e,t),e[0]?.resume()}}}();function ez(e,t){let s=[...e],a=s.indexOf(t);return -1!==a&&s.splice(a,1),s}var eD=s(8957);let eF=["top","right","bottom","left"],eI=Math.min,eV=Math.max,eO=Math.round,eU=Math.floor,e$=e=>({x:e,y:e}),eq={left:"right",right:"left",bottom:"top",top:"bottom"},eW={start:"end",end:"start"};function eH(e,t){return"function"==typeof e?e(t):e}function eB(e){return e.split("-")[0]}function eZ(e){return e.split("-")[1]}function eG(e){return"x"===e?"y":"x"}function eK(e){return"y"===e?"height":"width"}let eY=new Set(["top","bottom"]);function eX(e){return eY.has(eB(e))?"y":"x"}function eJ(e){return e.replace(/start|end/g,e=>eW[e])}let eQ=["left","right"],e0=["right","left"],e1=["top","bottom"],e2=["bottom","top"];function e4(e){return e.replace(/left|right|bottom|top/g,e=>eq[e])}function e5(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function e3(e){let{x:t,y:s,width:a,height:r}=e;return{width:a,height:r,top:s,left:t,right:t+a,bottom:s+r,x:t,y:s}}function e6(e,t,s){let a,{reference:r,floating:n}=e,i=eX(t),l=eG(eX(t)),c=eK(l),d=eB(t),o="y"===i,u=r.x+r.width/2-n.width/2,m=r.y+r.height/2-n.height/2,h=r[c]/2-n[c]/2;switch(d){case"top":a={x:u,y:r.y-n.height};break;case"bottom":a={x:u,y:r.y+r.height};break;case"right":a={x:r.x+r.width,y:m};break;case"left":a={x:r.x-n.width,y:m};break;default:a={x:r.x,y:r.y}}switch(eZ(t)){case"start":a[l]-=h*(s&&o?-1:1);break;case"end":a[l]+=h*(s&&o?-1:1)}return a}let e7=async(e,t,s)=>{let{placement:a="bottom",strategy:r="absolute",middleware:n=[],platform:i}=s,l=n.filter(Boolean),c=await (null==i.isRTL?void 0:i.isRTL(t)),d=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:o,y:u}=e6(d,a,c),m=a,h={},x=0;for(let s=0;s<l.length;s++){let{name:n,fn:p}=l[s],{x:f,y:j,data:g,reset:v}=await p({x:o,y:u,initialPlacement:a,placement:m,strategy:r,middlewareData:h,rects:d,platform:i,elements:{reference:e,floating:t}});o=null!=f?f:o,u=null!=j?j:u,h={...h,[n]:{...h[n],...g}},v&&x<=50&&(x++,"object"==typeof v&&(v.placement&&(m=v.placement),v.rects&&(d=!0===v.rects?await i.getElementRects({reference:e,floating:t,strategy:r}):v.rects),{x:o,y:u}=e6(d,m,c)),s=-1)}return{x:o,y:u,placement:m,strategy:r,middlewareData:h}};async function e8(e,t){var s;void 0===t&&(t={});let{x:a,y:r,platform:n,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:o="viewport",elementContext:u="floating",altBoundary:m=!1,padding:h=0}=eH(t,e),x=e5(h),p=l[m?"floating"===u?"reference":"floating":u],f=e3(await n.getClippingRect({element:null==(s=await (null==n.isElement?void 0:n.isElement(p)))||s?p:p.contextElement||await (null==n.getDocumentElement?void 0:n.getDocumentElement(l.floating)),boundary:d,rootBoundary:o,strategy:c})),j="floating"===u?{x:a,y:r,width:i.floating.width,height:i.floating.height}:i.reference,g=await (null==n.getOffsetParent?void 0:n.getOffsetParent(l.floating)),v=await (null==n.isElement?void 0:n.isElement(g))&&await (null==n.getScale?void 0:n.getScale(g))||{x:1,y:1},y=e3(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:j,offsetParent:g,strategy:c}):j);return{top:(f.top-y.top+x.top)/v.y,bottom:(y.bottom-f.bottom+x.bottom)/v.y,left:(f.left-y.left+x.left)/v.x,right:(y.right-f.right+x.right)/v.x}}function e9(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function te(e){return eF.some(t=>e[t]>=0)}let tt=new Set(["left","top"]);async function ts(e,t){let{placement:s,platform:a,elements:r}=e,n=await (null==a.isRTL?void 0:a.isRTL(r.floating)),i=eB(s),l=eZ(s),c="y"===eX(s),d=tt.has(i)?-1:1,o=n&&c?-1:1,u=eH(t,e),{mainAxis:m,crossAxis:h,alignmentAxis:x}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&"number"==typeof x&&(h="end"===l?-1*x:x),c?{x:h*o,y:m*d}:{x:m*d,y:h*o}}function ta(){return"undefined"!=typeof window}function tr(e){return tl(e)?(e.nodeName||"").toLowerCase():"#document"}function tn(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function ti(e){var t;return null==(t=(tl(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function tl(e){return!!ta()&&(e instanceof Node||e instanceof tn(e).Node)}function tc(e){return!!ta()&&(e instanceof Element||e instanceof tn(e).Element)}function td(e){return!!ta()&&(e instanceof HTMLElement||e instanceof tn(e).HTMLElement)}function to(e){return!!ta()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof tn(e).ShadowRoot)}let tu=new Set(["inline","contents"]);function tm(e){let{overflow:t,overflowX:s,overflowY:a,display:r}=tb(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+s)&&!tu.has(r)}let th=new Set(["table","td","th"]),tx=[":popover-open",":modal"];function tp(e){return tx.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let tf=["transform","translate","scale","rotate","perspective"],tj=["transform","translate","scale","rotate","perspective","filter"],tg=["paint","layout","strict","content"];function tv(e){let t=ty(),s=tc(e)?tb(e):e;return tf.some(e=>!!s[e]&&"none"!==s[e])||!!s.containerType&&"normal"!==s.containerType||!t&&!!s.backdropFilter&&"none"!==s.backdropFilter||!t&&!!s.filter&&"none"!==s.filter||tj.some(e=>(s.willChange||"").includes(e))||tg.some(e=>(s.contain||"").includes(e))}function ty(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let tw=new Set(["html","body","#document"]);function tN(e){return tw.has(tr(e))}function tb(e){return tn(e).getComputedStyle(e)}function tk(e){return tc(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function t_(e){if("html"===tr(e))return e;let t=e.assignedSlot||e.parentNode||to(e)&&e.host||ti(e);return to(t)?t.host:t}function tC(e,t,s){var a;void 0===t&&(t=[]),void 0===s&&(s=!0);let r=function e(t){let s=t_(t);return tN(s)?t.ownerDocument?t.ownerDocument.body:t.body:td(s)&&tm(s)?s:e(s)}(e),n=r===(null==(a=e.ownerDocument)?void 0:a.body),i=tn(r);if(n){let e=tS(i);return t.concat(i,i.visualViewport||[],tm(r)?r:[],e&&s?tC(e):[])}return t.concat(r,tC(r,[],s))}function tS(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function tP(e){let t=tb(e),s=parseFloat(t.width)||0,a=parseFloat(t.height)||0,r=td(e),n=r?e.offsetWidth:s,i=r?e.offsetHeight:a,l=eO(s)!==n||eO(a)!==i;return l&&(s=n,a=i),{width:s,height:a,$:l}}function tL(e){return tc(e)?e:e.contextElement}function tA(e){let t=tL(e);if(!td(t))return e$(1);let s=t.getBoundingClientRect(),{width:a,height:r,$:n}=tP(t),i=(n?eO(s.width):s.width)/a,l=(n?eO(s.height):s.height)/r;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}let tE=e$(0);function tT(e){let t=tn(e);return ty()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:tE}function tR(e,t,s,a){var r;void 0===t&&(t=!1),void 0===s&&(s=!1);let n=e.getBoundingClientRect(),i=tL(e),l=e$(1);t&&(a?tc(a)&&(l=tA(a)):l=tA(e));let c=(void 0===(r=s)&&(r=!1),a&&(!r||a===tn(i))&&r)?tT(i):e$(0),d=(n.left+c.x)/l.x,o=(n.top+c.y)/l.y,u=n.width/l.x,m=n.height/l.y;if(i){let e=tn(i),t=a&&tc(a)?tn(a):a,s=e,r=tS(s);for(;r&&a&&t!==s;){let e=tA(r),t=r.getBoundingClientRect(),a=tb(r),n=t.left+(r.clientLeft+parseFloat(a.paddingLeft))*e.x,i=t.top+(r.clientTop+parseFloat(a.paddingTop))*e.y;d*=e.x,o*=e.y,u*=e.x,m*=e.y,d+=n,o+=i,r=tS(s=tn(r))}}return e3({width:u,height:m,x:d,y:o})}function tM(e,t){let s=tk(e).scrollLeft;return t?t.left+s:tR(ti(e)).left+s}function tz(e,t){let s=e.getBoundingClientRect();return{x:s.left+t.scrollLeft-tM(e,s),y:s.top+t.scrollTop}}let tD=new Set(["absolute","fixed"]);function tF(e,t,s){let a;if("viewport"===t)a=function(e,t){let s=tn(e),a=ti(e),r=s.visualViewport,n=a.clientWidth,i=a.clientHeight,l=0,c=0;if(r){n=r.width,i=r.height;let e=ty();(!e||e&&"fixed"===t)&&(l=r.offsetLeft,c=r.offsetTop)}let d=tM(a);if(d<=0){let e=a.ownerDocument,t=e.body,s=getComputedStyle(t),r="CSS1Compat"===e.compatMode&&parseFloat(s.marginLeft)+parseFloat(s.marginRight)||0,i=Math.abs(a.clientWidth-t.clientWidth-r);i<=25&&(n-=i)}else d<=25&&(n+=d);return{width:n,height:i,x:l,y:c}}(e,s);else if("document"===t)a=function(e){let t=ti(e),s=tk(e),a=e.ownerDocument.body,r=eV(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),n=eV(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight),i=-s.scrollLeft+tM(e),l=-s.scrollTop;return"rtl"===tb(a).direction&&(i+=eV(t.clientWidth,a.clientWidth)-r),{width:r,height:n,x:i,y:l}}(ti(e));else if(tc(t))a=function(e,t){let s=tR(e,!0,"fixed"===t),a=s.top+e.clientTop,r=s.left+e.clientLeft,n=td(e)?tA(e):e$(1),i=e.clientWidth*n.x;return{width:i,height:e.clientHeight*n.y,x:r*n.x,y:a*n.y}}(t,s);else{let s=tT(e);a={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return e3(a)}function tI(e){return"static"===tb(e).position}function tV(e,t){if(!td(e)||"fixed"===tb(e).position)return null;if(t)return t(e);let s=e.offsetParent;return ti(e)===s&&(s=s.ownerDocument.body),s}function tO(e,t){var s;let a=tn(e);if(tp(e))return a;if(!td(e)){let t=t_(e);for(;t&&!tN(t);){if(tc(t)&&!tI(t))return t;t=t_(t)}return a}let r=tV(e,t);for(;r&&(s=r,th.has(tr(s)))&&tI(r);)r=tV(r,t);return r&&tN(r)&&tI(r)&&!tv(r)?a:r||function(e){let t=t_(e);for(;td(t)&&!tN(t);){if(tv(t))return t;if(tp(t))break;t=t_(t)}return null}(e)||a}let tU=async function(e){let t=this.getOffsetParent||tO,s=this.getDimensions,a=await s(e.floating);return{reference:function(e,t,s){let a=td(t),r=ti(t),n="fixed"===s,i=tR(e,!0,n,t),l={scrollLeft:0,scrollTop:0},c=e$(0);if(a||!a&&!n){if(("body"!==tr(t)||tm(r))&&(l=tk(t)),a){let e=tR(t,!0,n,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else r&&(c.x=tM(r))}n&&!a&&r&&(c.x=tM(r));let d=!r||a||n?e$(0):tz(r,l);return{x:i.left+l.scrollLeft-c.x-d.x,y:i.top+l.scrollTop-c.y-d.y,width:i.width,height:i.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}},t$={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:s,offsetParent:a,strategy:r}=e,n="fixed"===r,i=ti(a),l=!!t&&tp(t.floating);if(a===i||l&&n)return s;let c={scrollLeft:0,scrollTop:0},d=e$(1),o=e$(0),u=td(a);if((u||!u&&!n)&&(("body"!==tr(a)||tm(i))&&(c=tk(a)),td(a))){let e=tR(a);d=tA(a),o.x=e.x+a.clientLeft,o.y=e.y+a.clientTop}let m=!i||u||n?e$(0):tz(i,c);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-c.scrollLeft*d.x+o.x+m.x,y:s.y*d.y-c.scrollTop*d.y+o.y+m.y}},getDocumentElement:ti,getClippingRect:function(e){let{element:t,boundary:s,rootBoundary:a,strategy:r}=e,n=[..."clippingAncestors"===s?tp(t)?[]:function(e,t){let s=t.get(e);if(s)return s;let a=tC(e,[],!1).filter(e=>tc(e)&&"body"!==tr(e)),r=null,n="fixed"===tb(e).position,i=n?t_(e):e;for(;tc(i)&&!tN(i);){let t=tb(i),s=tv(i);s||"fixed"!==t.position||(r=null),(n?!s&&!r:!s&&"static"===t.position&&!!r&&tD.has(r.position)||tm(i)&&!s&&function e(t,s){let a=t_(t);return!(a===s||!tc(a)||tN(a))&&("fixed"===tb(a).position||e(a,s))}(e,i))?a=a.filter(e=>e!==i):r=t,i=t_(i)}return t.set(e,a),a}(t,this._c):[].concat(s),a],i=n[0],l=n.reduce((e,s)=>{let a=tF(t,s,r);return e.top=eV(a.top,e.top),e.right=eI(a.right,e.right),e.bottom=eI(a.bottom,e.bottom),e.left=eV(a.left,e.left),e},tF(t,i,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:tO,getElementRects:tU,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:s}=tP(e);return{width:t,height:s}},getScale:tA,isElement:tc,isRTL:function(e){return"rtl"===tb(e).direction}};function tq(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let tW=e=>({name:"arrow",options:e,async fn(t){let{x:s,y:a,placement:r,rects:n,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:o=0}=eH(e,t)||{};if(null==d)return{};let u=e5(o),m={x:s,y:a},h=eG(eX(r)),x=eK(h),p=await i.getDimensions(d),f="y"===h,j=f?"clientHeight":"clientWidth",g=n.reference[x]+n.reference[h]-m[h]-n.floating[x],v=m[h]-n.reference[h],y=await (null==i.getOffsetParent?void 0:i.getOffsetParent(d)),w=y?y[j]:0;w&&await (null==i.isElement?void 0:i.isElement(y))||(w=l.floating[j]||n.floating[x]);let N=w/2-p[x]/2-1,b=eI(u[f?"top":"left"],N),k=eI(u[f?"bottom":"right"],N),_=w-p[x]-k,C=w/2-p[x]/2+(g/2-v/2),S=eV(b,eI(C,_)),P=!c.arrow&&null!=eZ(r)&&C!==S&&n.reference[x]/2-(C<b?b:k)-p[x]/2<0,L=P?C<b?C-b:C-_:0;return{[h]:m[h]+L,data:{[h]:S,centerOffset:C-S-L,...P&&{alignmentOffset:L}},reset:P}}}),tH=(e,t,s)=>{let a=new Map,r={platform:t$,...s},n={...r.platform,_c:a};return e7(e,t,{...r,platform:n})};var tB="undefined"!=typeof document?l.useLayoutEffect:function(){};function tZ(e,t){let s,a,r;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((s=e.length)!==t.length)return!1;for(a=s;0!=a--;)if(!tZ(e[a],t[a]))return!1;return!0}if((s=(r=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(a=s;0!=a--;)if(!({}).hasOwnProperty.call(t,r[a]))return!1;for(a=s;0!=a--;){let s=r[a];if(("_owner"!==s||!e.$$typeof)&&!tZ(e[s],t[s]))return!1}return!0}return e!=e&&t!=t}function tG(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function tK(e,t){let s=tG(e);return Math.round(t*s)/s}function tY(e){let t=l.useRef(e);return tB(()=>{t.current=e}),t}let tX=e=>({name:"arrow",options:e,fn(t){let{element:s,padding:a}="function"==typeof e?e(t):e;return s&&({}).hasOwnProperty.call(s,"current")?null!=s.current?tW({element:s.current,padding:a}).fn(t):{}:s?tW({element:s,padding:a}).fn(t):{}}}),tJ=(e,t)=>({...function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var s,a;let{x:r,y:n,placement:i,middlewareData:l}=t,c=await ts(t,e);return i===(null==(s=l.offset)?void 0:s.placement)&&null!=(a=l.arrow)&&a.alignmentOffset?{}:{x:r+c.x,y:n+c.y,data:{...c,placement:i}}}}}(e),options:[e,t]}),tQ=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:s,y:a,placement:r}=t,{mainAxis:n=!0,crossAxis:i=!1,limiter:l={fn:e=>{let{x:t,y:s}=e;return{x:t,y:s}}},...c}=eH(e,t),d={x:s,y:a},o=await e8(t,c),u=eX(eB(r)),m=eG(u),h=d[m],x=d[u];if(n){let e="y"===m?"top":"left",t="y"===m?"bottom":"right",s=h+o[e],a=h-o[t];h=eV(s,eI(h,a))}if(i){let e="y"===u?"top":"left",t="y"===u?"bottom":"right",s=x+o[e],a=x-o[t];x=eV(s,eI(x,a))}let p=l.fn({...t,[m]:h,[u]:x});return{...p,data:{x:p.x-s,y:p.y-a,enabled:{[m]:n,[u]:i}}}}}}(e),options:[e,t]}),t0=(e,t)=>({...function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:s,y:a,placement:r,rects:n,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=eH(e,t),o={x:s,y:a},u=eX(r),m=eG(u),h=o[m],x=o[u],p=eH(l,t),f="number"==typeof p?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){let e="y"===m?"height":"width",t=n.reference[m]-n.floating[e]+f.mainAxis,s=n.reference[m]+n.reference[e]-f.mainAxis;h<t?h=t:h>s&&(h=s)}if(d){var j,g;let e="y"===m?"width":"height",t=tt.has(eB(r)),s=n.reference[u]-n.floating[e]+(t&&(null==(j=i.offset)?void 0:j[u])||0)+(t?0:f.crossAxis),a=n.reference[u]+n.reference[e]+(t?0:(null==(g=i.offset)?void 0:g[u])||0)-(t?f.crossAxis:0);x<s?x=s:x>a&&(x=a)}return{[m]:h,[u]:x}}}}(e),options:[e,t]}),t1=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var s,a,r,n,i;let{placement:l,middlewareData:c,rects:d,initialPlacement:o,platform:u,elements:m}=t,{mainAxis:h=!0,crossAxis:x=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:g=!0,...v}=eH(e,t);if(null!=(s=c.arrow)&&s.alignmentOffset)return{};let y=eB(l),w=eX(o),N=eB(o)===o,b=await (null==u.isRTL?void 0:u.isRTL(m.floating)),k=p||(N||!g?[e4(o)]:function(e){let t=e4(e);return[eJ(e),t,eJ(t)]}(o)),_="none"!==j;!p&&_&&k.push(...function(e,t,s,a){let r=eZ(e),n=function(e,t,s){switch(e){case"top":case"bottom":if(s)return t?e0:eQ;return t?eQ:e0;case"left":case"right":return t?e1:e2;default:return[]}}(eB(e),"start"===s,a);return r&&(n=n.map(e=>e+"-"+r),t&&(n=n.concat(n.map(eJ)))),n}(o,g,j,b));let C=[o,...k],S=await e8(t,v),P=[],L=(null==(a=c.flip)?void 0:a.overflows)||[];if(h&&P.push(S[y]),x){let e=function(e,t,s){void 0===s&&(s=!1);let a=eZ(e),r=eG(eX(e)),n=eK(r),i="x"===r?a===(s?"end":"start")?"right":"left":"start"===a?"bottom":"top";return t.reference[n]>t.floating[n]&&(i=e4(i)),[i,e4(i)]}(l,d,b);P.push(S[e[0]],S[e[1]])}if(L=[...L,{placement:l,overflows:P}],!P.every(e=>e<=0)){let e=((null==(r=c.flip)?void 0:r.index)||0)+1,t=C[e];if(t&&(!("alignment"===x&&w!==eX(t))||L.every(e=>eX(e.placement)!==w||e.overflows[0]>0)))return{data:{index:e,overflows:L},reset:{placement:t}};let s=null==(n=L.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:n.placement;if(!s)switch(f){case"bestFit":{let e=null==(i=L.filter(e=>{if(_){let t=eX(e.placement);return t===w||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:i[0];e&&(s=e);break}case"initialPlacement":s=o}if(l!==s)return{reset:{placement:s}}}return{}}}}(e),options:[e,t]}),t2=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var s,a;let r,n;let{placement:i,rects:l,platform:c,elements:d}=t,{apply:o=()=>{},...u}=eH(e,t),m=await e8(t,u),h=eB(i),x=eZ(i),p="y"===eX(i),{width:f,height:j}=l.floating;"top"===h||"bottom"===h?(r=h,n=x===(await (null==c.isRTL?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(n=h,r="end"===x?"top":"bottom");let g=j-m.top-m.bottom,v=f-m.left-m.right,y=eI(j-m[r],g),w=eI(f-m[n],v),N=!t.middlewareData.shift,b=y,k=w;if(null!=(s=t.middlewareData.shift)&&s.enabled.x&&(k=v),null!=(a=t.middlewareData.shift)&&a.enabled.y&&(b=g),N&&!x){let e=eV(m.left,0),t=eV(m.right,0),s=eV(m.top,0),a=eV(m.bottom,0);p?k=f-2*(0!==e||0!==t?e+t:eV(m.left,m.right)):b=j-2*(0!==s||0!==a?s+a:eV(m.top,m.bottom))}await o({...t,availableWidth:k,availableHeight:b});let _=await c.getDimensions(d.floating);return f!==_.width||j!==_.height?{reset:{rects:!0}}:{}}}}(e),options:[e,t]}),t4=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:s}=t,{strategy:a="referenceHidden",...r}=eH(e,t);switch(a){case"referenceHidden":{let e=e9(await e8(t,{...r,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:te(e)}}}case"escaped":{let e=e9(await e8(t,{...r,altBoundary:!0}),s.floating);return{data:{escapedOffsets:e,escaped:te(e)}}}default:return{}}}}}(e),options:[e,t]}),t5=(e,t)=>({...tX(e),options:[e,t]});var t3=l.forwardRef((e,t)=>{let{children:s,width:a=10,height:r=5,...n}=e;return(0,i.jsx)(eg.WV.svg,{...n,ref:t,width:a,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:(0,i.jsx)("polygon",{points:"0,0 30,0 15,10"})})});t3.displayName="Arrow";var t6=s(5819),t7=s(2566),t8="Popper",[t9,se]=(0,ef.b)(t8),[st,ss]=t9(t8),sa=e=>{let{__scopePopper:t,children:s}=e,[a,r]=l.useState(null);return(0,i.jsx)(st,{scope:t,anchor:a,onAnchorChange:r,children:s})};sa.displayName=t8;var sr="PopperAnchor",sn=l.forwardRef((e,t)=>{let{__scopePopper:s,virtualRef:a,...r}=e,n=ss(sr,s),c=l.useRef(null),d=(0,ep.e)(t,c),o=l.useRef(null);return l.useEffect(()=>{let e=o.current;o.current=a?.current||c.current,e!==o.current&&n.onAnchorChange(o.current)}),a?null:(0,i.jsx)(eg.WV.div,{...r,ref:d})});sn.displayName=sr;var si="PopperContent",[sl,sc]=t9(si),sd=l.forwardRef((e,t)=>{let{__scopePopper:s,side:a="bottom",sideOffset:r=0,align:n="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:o=!0,collisionBoundary:u=[],collisionPadding:m=0,sticky:h="partial",hideWhenDetached:x=!1,updatePositionStrategy:p="optimized",onPlaced:f,...j}=e,g=ss(si,s),[v,y]=l.useState(null),w=(0,ep.e)(t,e=>y(e)),[N,b]=l.useState(null),k=(0,t7.t)(N),_=k?.width??0,C=k?.height??0,S="number"==typeof m?m:{top:0,right:0,bottom:0,left:0,...m},P=Array.isArray(u)?u:[u],L=P.length>0,A={padding:S,boundary:P.filter(sh),altBoundary:L},{refs:E,floatingStyles:T,placement:R,isPositioned:M,middlewareData:z}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:s="absolute",middleware:a=[],platform:r,elements:{reference:n,floating:i}={},transform:c=!0,whileElementsMounted:d,open:o}=e,[u,m]=l.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[h,x]=l.useState(a);tZ(h,a)||x(a);let[p,f]=l.useState(null),[j,g]=l.useState(null),v=l.useCallback(e=>{e!==b.current&&(b.current=e,f(e))},[]),y=l.useCallback(e=>{e!==k.current&&(k.current=e,g(e))},[]),w=n||p,N=i||j,b=l.useRef(null),k=l.useRef(null),_=l.useRef(u),C=null!=d,S=tY(d),P=tY(r),L=tY(o),A=l.useCallback(()=>{if(!b.current||!k.current)return;let e={placement:t,strategy:s,middleware:h};P.current&&(e.platform=P.current),tH(b.current,k.current,e).then(e=>{let t={...e,isPositioned:!1!==L.current};E.current&&!tZ(_.current,t)&&(_.current=t,eu.flushSync(()=>{m(t)}))})},[h,t,s,P,L]);tB(()=>{!1===o&&_.current.isPositioned&&(_.current.isPositioned=!1,m(e=>({...e,isPositioned:!1})))},[o]);let E=l.useRef(!1);tB(()=>(E.current=!0,()=>{E.current=!1}),[]),tB(()=>{if(w&&(b.current=w),N&&(k.current=N),w&&N){if(S.current)return S.current(w,N,A);A()}},[w,N,A,S,C]);let T=l.useMemo(()=>({reference:b,floating:k,setReference:v,setFloating:y}),[v,y]),R=l.useMemo(()=>({reference:w,floating:N}),[w,N]),M=l.useMemo(()=>{let e={position:s,left:0,top:0};if(!R.floating)return e;let t=tK(R.floating,u.x),a=tK(R.floating,u.y);return c?{...e,transform:"translate("+t+"px, "+a+"px)",...tG(R.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:t,top:a}},[s,c,R.floating,u.x,u.y]);return l.useMemo(()=>({...u,update:A,refs:T,elements:R,floatingStyles:M}),[u,A,T,R,M])}({strategy:"fixed",placement:a+("center"!==n?"-"+n:""),whileElementsMounted:(...e)=>(function(e,t,s,a){let r;void 0===a&&(a={});let{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:l="function"==typeof ResizeObserver,layoutShift:c="function"==typeof IntersectionObserver,animationFrame:d=!1}=a,o=tL(e),u=n||i?[...o?tC(o):[],...tC(t)]:[];u.forEach(e=>{n&&e.addEventListener("scroll",s,{passive:!0}),i&&e.addEventListener("resize",s)});let m=o&&c?function(e,t){let s,a=null,r=ti(e);function n(){var e;clearTimeout(s),null==(e=a)||e.disconnect(),a=null}return function i(l,c){void 0===l&&(l=!1),void 0===c&&(c=1),n();let d=e.getBoundingClientRect(),{left:o,top:u,width:m,height:h}=d;if(l||t(),!m||!h)return;let x=eU(u),p=eU(r.clientWidth-(o+m)),f={rootMargin:-x+"px "+-p+"px "+-eU(r.clientHeight-(u+h))+"px "+-eU(o)+"px",threshold:eV(0,eI(1,c))||1},j=!0;function g(t){let a=t[0].intersectionRatio;if(a!==c){if(!j)return i();a?i(!1,a):s=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==a||tq(d,e.getBoundingClientRect())||i(),j=!1}try{a=new IntersectionObserver(g,{...f,root:r.ownerDocument})}catch(e){a=new IntersectionObserver(g,f)}a.observe(e)}(!0),n}(o,s):null,h=-1,x=null;l&&(x=new ResizeObserver(e=>{let[a]=e;a&&a.target===o&&x&&(x.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var e;null==(e=x)||e.observe(t)})),s()}),o&&!d&&x.observe(o),x.observe(t));let p=d?tR(e):null;return d&&function t(){let a=tR(e);p&&!tq(p,a)&&s(),p=a,r=requestAnimationFrame(t)}(),s(),()=>{var e;u.forEach(e=>{n&&e.removeEventListener("scroll",s),i&&e.removeEventListener("resize",s)}),null==m||m(),null==(e=x)||e.disconnect(),x=null,d&&cancelAnimationFrame(r)}})(...e,{animationFrame:"always"===p}),elements:{reference:g.anchor},middleware:[tJ({mainAxis:r+C,alignmentAxis:c}),o&&tQ({mainAxis:!0,crossAxis:!1,limiter:"partial"===h?t0():void 0,...A}),o&&t1({...A}),t2({...A,apply:({elements:e,rects:t,availableWidth:s,availableHeight:a})=>{let{width:r,height:n}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${s}px`),i.setProperty("--radix-popper-available-height",`${a}px`),i.setProperty("--radix-popper-anchor-width",`${r}px`),i.setProperty("--radix-popper-anchor-height",`${n}px`)}}),N&&t5({element:N,padding:d}),sx({arrowWidth:_,arrowHeight:C}),x&&t4({strategy:"referenceHidden",...A})]}),[D,F]=sp(R),I=(0,ev.W)(f);(0,t6.b)(()=>{M&&I?.()},[M,I]);let V=z.arrow?.x,O=z.arrow?.y,U=z.arrow?.centerOffset!==0,[$,q]=l.useState();return(0,t6.b)(()=>{v&&q(window.getComputedStyle(v).zIndex)},[v]),(0,i.jsx)("div",{ref:E.setFloating,"data-radix-popper-content-wrapper":"",style:{...T,transform:M?T.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,i.jsx)(sl,{scope:s,placedSide:D,onArrowChange:b,arrowX:V,arrowY:O,shouldHideArrow:U,children:(0,i.jsx)(eg.WV.div,{"data-side":D,"data-align":F,...j,ref:w,style:{...j.style,animation:M?void 0:"none"}})})})});sd.displayName=si;var so="PopperArrow",su={top:"bottom",right:"left",bottom:"top",left:"right"},sm=l.forwardRef(function(e,t){let{__scopePopper:s,...a}=e,r=sc(so,s),n=su[r.placedSide];return(0,i.jsx)("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[n]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:(0,i.jsx)(t3,{...a,ref:t,style:{...a.style,display:"block"}})})});function sh(e){return null!==e}sm.displayName=so;var sx=e=>({name:"transformOrigin",options:e,fn(t){let{placement:s,rects:a,middlewareData:r}=t,n=r.arrow?.centerOffset!==0,i=n?0:e.arrowWidth,l=n?0:e.arrowHeight,[c,d]=sp(s),o={start:"0%",center:"50%",end:"100%"}[d],u=(r.arrow?.x??0)+i/2,m=(r.arrow?.y??0)+l/2,h="",x="";return"bottom"===c?(h=n?o:`${u}px`,x=`${-l}px`):"top"===c?(h=n?o:`${u}px`,x=`${a.floating.height+l}px`):"right"===c?(h=`${-l}px`,x=n?o:`${m}px`):"left"===c&&(h=`${a.floating.width+l}px`,x=n?o:`${m}px`),{data:{x:h,y:x}}}});function sp(e){let[t,s="center"]=e.split("-");return[t,s]}var sf=l.forwardRef((e,t)=>{let{container:s,...a}=e,[r,n]=l.useState(!1);(0,t6.b)(()=>n(!0),[]);let c=s||r&&globalThis?.document?.body;return c?eu.createPortal((0,i.jsx)(eg.WV.div,{...a,ref:t}),c):null});sf.displayName="Portal";var sj=s(4214),sg=s(2067),sv=s(3405),sy=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});l.forwardRef((e,t)=>(0,i.jsx)(eg.WV.span,{...e,ref:t,style:{...sy,...e.style}})).displayName="VisuallyHidden";var sw=new WeakMap,sN=new WeakMap,sb={},sk=0,s_=function(e){return e&&(e.host||s_(e.parentNode))},sC=function(e,t,s,a){var r=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var s=s_(e);return s&&t.contains(s)?s:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});sb[s]||(sb[s]=new WeakMap);var n=sb[s],i=[],l=new Set,c=new Set(r),d=function(e){!e||l.has(e)||(l.add(e),d(e.parentNode))};r.forEach(d);var o=function(e){!e||c.has(e)||Array.prototype.forEach.call(e.children,function(e){if(l.has(e))o(e);else try{var t=e.getAttribute(a),r=null!==t&&"false"!==t,c=(sw.get(e)||0)+1,d=(n.get(e)||0)+1;sw.set(e,c),n.set(e,d),i.push(e),1===c&&r&&sN.set(e,!0),1===d&&e.setAttribute(s,"true"),r||e.setAttribute(a,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return o(t),l.clear(),sk++,function(){i.forEach(function(e){var t=sw.get(e)-1,r=n.get(e)-1;sw.set(e,t),n.set(e,r),t||(sN.has(e)||e.removeAttribute(a),sN.delete(e)),r||e.removeAttribute(s)}),--sk||(sw=new WeakMap,sw=new WeakMap,sN=new WeakMap,sb={})}},sS=function(e,t,s){void 0===s&&(s="data-aria-hidden");var a,r=Array.from(Array.isArray(e)?e:[e]),n=t||(a=e,"undefined"==typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body);return n?(r.push.apply(r,Array.from(n.querySelectorAll("[aria-live], script"))),sC(r,n,s,"aria-hidden")):function(){return null}},sP=function(){return(sP=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function sL(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]]);return s}Object.create,Object.create;var sA=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),sE="width-before-scroll-bar";function sT(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var sR="undefined"!=typeof window?l.useLayoutEffect:l.useEffect,sM=new WeakMap;function sz(e){return e}var sD=function(e){void 0===e&&(e={});var t,s,a,r=(void 0===t&&(t=sz),s=[],a=!1,{read:function(){if(a)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:null},useMedium:function(e){var r=t(e,a);return s.push(r),function(){s=s.filter(function(e){return e!==r})}},assignSyncMedium:function(e){for(a=!0;s.length;){var t=s;s=[],t.forEach(e)}s={push:function(t){return e(t)},filter:function(){return s}}},assignMedium:function(e){a=!0;var t=[];if(s.length){var r=s;s=[],r.forEach(e),t=s}var n=function(){var s=t;t=[],s.forEach(e)},i=function(){return Promise.resolve().then(n)};i(),s={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),s}}}});return r.options=sP({async:!0,ssr:!1},e),r}(),sF=function(){},sI=l.forwardRef(function(e,t){var s,a,r,n,i=l.useRef(null),c=l.useState({onScrollCapture:sF,onWheelCapture:sF,onTouchMoveCapture:sF}),d=c[0],o=c[1],u=e.forwardProps,m=e.children,h=e.className,x=e.removeScrollBar,p=e.enabled,f=e.shards,j=e.sideCar,g=e.noRelative,v=e.noIsolation,y=e.inert,w=e.allowPinchZoom,N=e.as,b=e.gapMode,k=sL(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=(s=[i,t],a=function(e){return s.forEach(function(t){return sT(t,e)})},(r=(0,l.useState)(function(){return{value:null,callback:a,facade:{get current(){return r.value},set current(value){var e=r.value;e!==value&&(r.value=value,r.callback(value,e))}}}})[0]).callback=a,n=r.facade,sR(function(){var e=sM.get(n);if(e){var t=new Set(e),a=new Set(s),r=n.current;t.forEach(function(e){a.has(e)||sT(e,null)}),a.forEach(function(e){t.has(e)||sT(e,r)})}sM.set(n,s)},[s]),n),C=sP(sP({},k),d);return l.createElement(l.Fragment,null,p&&l.createElement(j,{sideCar:sD,removeScrollBar:x,shards:f,noRelative:g,noIsolation:v,inert:y,setCallbacks:o,allowPinchZoom:!!w,lockRef:i,gapMode:b}),u?l.cloneElement(l.Children.only(m),sP(sP({},C),{ref:_})):l.createElement(void 0===N?"div":N,sP({},C,{className:h,ref:_}),m))});sI.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},sI.classNames={fullWidth:sE,zeroRight:sA};var sV=function(e){var t=e.sideCar,s=sL(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw Error("Sidecar medium not found");return l.createElement(a,sP({},s))};sV.isSideCarExport=!0;var sO=function(){var e=0,t=null;return{add:function(a){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=n||s.nc;return t&&e.setAttribute("nonce",t),e}())){var r,i;(r=t).styleSheet?r.styleSheet.cssText=a:r.appendChild(document.createTextNode(a)),i=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(i)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},sU=function(){var e=sO();return function(t,s){l.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}},s$=function(){var e=sU();return function(t){return e(t.styles,t.dynamic),null}},sq={left:0,top:0,right:0,gap:0},sW=function(e){return parseInt(e||"",10)||0},sH=function(e){var t=window.getComputedStyle(document.body),s=t["padding"===e?"paddingLeft":"marginLeft"],a=t["padding"===e?"paddingTop":"marginTop"],r=t["padding"===e?"paddingRight":"marginRight"];return[sW(s),sW(a),sW(r)]},sB=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return sq;var t=sH(e),s=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-s+t[2]-t[0])}},sZ=s$(),sG="data-scroll-locked",sK=function(e,t,s,a){var r=e.left,n=e.top,i=e.right,l=e.gap;return void 0===s&&(s="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(a,";\n   padding-right: ").concat(l,"px ").concat(a,";\n  }\n  body[").concat(sG,"] {\n    overflow: hidden ").concat(a,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(a,";"),"margin"===s&&"\n    padding-left: ".concat(r,"px;\n    padding-top: ").concat(n,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(l,"px ").concat(a,";\n    "),"padding"===s&&"padding-right: ".concat(l,"px ").concat(a,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(sA," {\n    right: ").concat(l,"px ").concat(a,";\n  }\n  \n  .").concat(sE," {\n    margin-right: ").concat(l,"px ").concat(a,";\n  }\n  \n  .").concat(sA," .").concat(sA," {\n    right: 0 ").concat(a,";\n  }\n  \n  .").concat(sE," .").concat(sE," {\n    margin-right: 0 ").concat(a,";\n  }\n  \n  body[").concat(sG,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(l,"px;\n  }\n")},sY=function(){var e=parseInt(document.body.getAttribute(sG)||"0",10);return isFinite(e)?e:0},sX=function(){l.useEffect(function(){return document.body.setAttribute(sG,(sY()+1).toString()),function(){var e=sY()-1;e<=0?document.body.removeAttribute(sG):document.body.setAttribute(sG,e.toString())}},[])},sJ=function(e){var t=e.noRelative,s=e.noImportant,a=e.gapMode,r=void 0===a?"margin":a;sX();var n=l.useMemo(function(){return sB(r)},[r]);return l.createElement(sZ,{styles:sK(n,!t,r,s?"":"!important")})},sQ=!1;if("undefined"!=typeof window)try{var s0=Object.defineProperty({},"passive",{get:function(){return sQ=!0,!0}});window.addEventListener("test",s0,s0),window.removeEventListener("test",s0,s0)}catch(e){sQ=!1}var s1=!!sQ&&{passive:!1},s2=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return"hidden"!==s[t]&&!(s.overflowY===s.overflowX&&"TEXTAREA"!==e.tagName&&"visible"===s[t])},s4=function(e,t){var s=t.ownerDocument,a=t;do{if("undefined"!=typeof ShadowRoot&&a instanceof ShadowRoot&&(a=a.host),s5(e,a)){var r=s3(e,a);if(r[1]>r[2])return!0}a=a.parentNode}while(a&&a!==s.body);return!1},s5=function(e,t){return"v"===e?s2(t,"overflowY"):s2(t,"overflowX")},s3=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},s6=function(e,t,s,a,r){var n,i=(n=window.getComputedStyle(t).direction,"h"===e&&"rtl"===n?-1:1),l=i*a,c=s.target,d=t.contains(c),o=!1,u=l>0,m=0,h=0;do{if(!c)break;var x=s3(e,c),p=x[0],f=x[1]-x[2]-i*p;(p||f)&&s5(e,c)&&(m+=f,h+=p);var j=c.parentNode;c=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!d&&c!==document.body||d&&(t.contains(c)||t===c));return u&&(r&&1>Math.abs(m)||!r&&l>m)?o=!0:!u&&(r&&1>Math.abs(h)||!r&&-l>h)&&(o=!0),o},s7=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},s8=function(e){return[e.deltaX,e.deltaY]},s9=function(e){return e&&"current"in e?e.current:e},ae=0,at=[];let as=(a=function(e){var t=l.useRef([]),s=l.useRef([0,0]),a=l.useRef(),r=l.useState(ae++)[0],n=l.useState(s$)[0],i=l.useRef(e);l.useEffect(function(){i.current=e},[e]),l.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var t=(function(e,t,s){if(s||2==arguments.length)for(var a,r=0,n=t.length;r<n;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(s9),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var c=l.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var r,n=s7(e),l=s.current,c="deltaX"in e?e.deltaX:l[0]-n[0],d="deltaY"in e?e.deltaY:l[1]-n[1],o=e.target,u=Math.abs(c)>Math.abs(d)?"h":"v";if("touches"in e&&"h"===u&&"range"===o.type)return!1;var m=s4(u,o);if(!m)return!0;if(m?r=u:(r="v"===u?"h":"v",m=s4(u,o)),!m)return!1;if(!a.current&&"changedTouches"in e&&(c||d)&&(a.current=r),!r)return!0;var h=a.current||r;return s6(h,t,e,"h"===h?c:d,!0)},[]),d=l.useCallback(function(e){if(at.length&&at[at.length-1]===n){var s="deltaY"in e?s8(e):s7(e),a=t.current.filter(function(t){var a;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(a=t.delta)[0]===s[0]&&a[1]===s[1]})[0];if(a&&a.should){e.cancelable&&e.preventDefault();return}if(!a){var r=(i.current.shards||[]).map(s9).filter(Boolean).filter(function(t){return t.contains(e.target)});(r.length>0?c(e,r[0]):!i.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),o=l.useCallback(function(e,s,a,r){var n={name:e,delta:s,target:a,should:r,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(a)};t.current.push(n),setTimeout(function(){t.current=t.current.filter(function(e){return e!==n})},1)},[]),u=l.useCallback(function(e){s.current=s7(e),a.current=void 0},[]),m=l.useCallback(function(t){o(t.type,s8(t),t.target,c(t,e.lockRef.current))},[]),h=l.useCallback(function(t){o(t.type,s7(t),t.target,c(t,e.lockRef.current))},[]);l.useEffect(function(){return at.push(n),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",d,s1),document.addEventListener("touchmove",d,s1),document.addEventListener("touchstart",u,s1),function(){at=at.filter(function(e){return e!==n}),document.removeEventListener("wheel",d,s1),document.removeEventListener("touchmove",d,s1),document.removeEventListener("touchstart",u,s1)}},[]);var x=e.removeScrollBar,p=e.inert;return l.createElement(l.Fragment,null,p?l.createElement(n,{styles:"\n  .block-interactivity-".concat(r," {pointer-events: none;}\n  .allow-interactivity-").concat(r," {pointer-events: all;}\n")}):null,x?l.createElement(sJ,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},sD.useMedium(a),sV);var aa=l.forwardRef(function(e,t){return l.createElement(sI,sP({},e,{ref:t,sideCar:as}))});aa.classNames=sI.classNames;var ar=[" ","Enter","ArrowUp","ArrowDown"],an=[" ","Enter"],ai="Select",[al,ac,ad]=(0,ex.B)(ai),[ao,au]=(0,ef.b)(ai,[ad,se]),am=se(),[ah,ax]=ao(ai),[ap,af]=ao(ai),aj=e=>{let{__scopeSelect:t,children:s,open:a,defaultOpen:r,onOpenChange:n,value:c,defaultValue:d,onValueChange:o,dir:u,name:m,autoComplete:h,disabled:x,required:p,form:f}=e,j=am(t),[g,v]=l.useState(null),[y,w]=l.useState(null),[N,b]=l.useState(!1),k=(0,ej.gm)(u),[_,C]=(0,sg.T)({prop:a,defaultProp:r??!1,onChange:n,caller:ai}),[S,P]=(0,sg.T)({prop:c,defaultProp:d,onChange:o,caller:ai}),L=l.useRef(null),A=!g||f||!!g.closest("form"),[E,T]=l.useState(new Set),R=Array.from(E).map(e=>e.props.value).join(";");return(0,i.jsx)(sa,{...j,children:(0,i.jsxs)(ah,{required:p,scope:t,trigger:g,onTriggerChange:v,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:N,onValueNodeHasChildrenChange:b,contentId:(0,eD.M)(),value:S,onValueChange:P,open:_,onOpenChange:C,dir:k,triggerPointerDownPosRef:L,disabled:x,children:[(0,i.jsx)(al.Provider,{scope:t,children:(0,i.jsx)(ap,{scope:e.__scopeSelect,onNativeOptionAdd:l.useCallback(e=>{T(t=>new Set(t).add(e))},[]),onNativeOptionRemove:l.useCallback(e=>{T(t=>{let s=new Set(t);return s.delete(e),s})},[]),children:s})}),A?(0,i.jsxs)(a2,{"aria-hidden":!0,required:p,tabIndex:-1,name:m,autoComplete:h,value:S,onChange:e=>P(e.target.value),disabled:x,form:f,children:[void 0===S?(0,i.jsx)("option",{value:""}):null,Array.from(E)]},R):null]})})};aj.displayName=ai;var ag="SelectTrigger",av=l.forwardRef((e,t)=>{let{__scopeSelect:s,disabled:a=!1,...r}=e,n=am(s),c=ax(ag,s),d=c.disabled||a,o=(0,ep.e)(t,c.onTriggerChange),u=ac(s),m=l.useRef("touch"),[h,x,p]=a5(e=>{let t=u().filter(e=>!e.disabled),s=t.find(e=>e.value===c.value),a=a3(t,e,s);void 0!==a&&c.onValueChange(a.value)}),f=e=>{d||(c.onOpenChange(!0),p()),e&&(c.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,i.jsx)(sn,{asChild:!0,...n,children:(0,i.jsx)(eg.WV.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":a4(c.value)?"":void 0,...r,ref:o,onClick:(0,eh.Mj)(r.onClick,e=>{e.currentTarget.focus(),"mouse"!==m.current&&f(e)}),onPointerDown:(0,eh.Mj)(r.onPointerDown,e=>{m.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(f(e),e.preventDefault())}),onKeyDown:(0,eh.Mj)(r.onKeyDown,e=>{let t=""!==h.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||x(e.key),(!t||" "!==e.key)&&ar.includes(e.key)&&(f(),e.preventDefault())})})})});av.displayName=ag;var ay="SelectValue",aw=l.forwardRef((e,t)=>{let{__scopeSelect:s,className:a,style:r,children:n,placeholder:l="",...c}=e,d=ax(ay,s),{onValueNodeHasChildrenChange:o}=d,u=void 0!==n,m=(0,ep.e)(t,d.onValueNodeChange);return(0,t6.b)(()=>{o(u)},[o,u]),(0,i.jsx)(eg.WV.span,{...c,ref:m,style:{pointerEvents:"none"},children:a4(d.value)?(0,i.jsx)(i.Fragment,{children:l}):n})});aw.displayName=ay;var aN=l.forwardRef((e,t)=>{let{__scopeSelect:s,children:a,...r}=e;return(0,i.jsx)(eg.WV.span,{"aria-hidden":!0,...r,ref:t,children:a||""})});aN.displayName="SelectIcon";var ab=e=>(0,i.jsx)(sf,{asChild:!0,...e});ab.displayName="SelectPortal";var ak="SelectContent",a_=l.forwardRef((e,t)=>{let s=ax(ak,e.__scopeSelect),[a,r]=l.useState();return((0,t6.b)(()=>{r(new DocumentFragment)},[]),s.open)?(0,i.jsx)(aL,{...e,ref:t}):a?eu.createPortal((0,i.jsx)(aC,{scope:e.__scopeSelect,children:(0,i.jsx)(al.Slot,{scope:e.__scopeSelect,children:(0,i.jsx)("div",{children:e.children})})}),a):null});a_.displayName=ak;var[aC,aS]=ao(ak),aP=(0,sj.Z8)("SelectContent.RemoveScroll"),aL=l.forwardRef((e,t)=>{let{__scopeSelect:s,position:a="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:n,onPointerDownOutside:c,side:d,sideOffset:o,align:u,alignOffset:m,arrowPadding:h,collisionBoundary:x,collisionPadding:p,sticky:f,hideWhenDetached:j,avoidCollisions:g,...v}=e,y=ax(ak,s),[w,N]=l.useState(null),[b,k]=l.useState(null),_=(0,ep.e)(t,e=>N(e)),[C,S]=l.useState(null),[P,L]=l.useState(null),A=ac(s),[E,T]=l.useState(!1),R=l.useRef(!1);l.useEffect(()=>{if(w)return sS(w)},[w]),l.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??eC()),document.body.insertAdjacentElement("beforeend",e[1]??eC()),e_++,()=>{1===e_&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),e_--}},[]);let M=l.useCallback(e=>{let[t,...s]=A().map(e=>e.ref.current),[a]=s.slice(-1),r=document.activeElement;for(let s of e)if(s===r||(s?.scrollIntoView({block:"nearest"}),s===t&&b&&(b.scrollTop=0),s===a&&b&&(b.scrollTop=b.scrollHeight),s?.focus(),document.activeElement!==r))return},[A,b]),z=l.useCallback(()=>M([C,w]),[M,C,w]);l.useEffect(()=>{E&&z()},[E,z]);let{onOpenChange:D,triggerPointerDownPosRef:F}=y;l.useEffect(()=>{if(w){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(F.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(F.current?.y??0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():w.contains(s.target)||D(!1),document.removeEventListener("pointermove",t),F.current=null};return null!==F.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[w,D,F]),l.useEffect(()=>{let e=()=>D(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[D]);let[I,V]=a5(e=>{let t=A().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),a=a3(t,e,s);a&&setTimeout(()=>a.ref.current.focus())}),O=l.useCallback((e,t,s)=>{let a=!R.current&&!s;(void 0!==y.value&&y.value===t||a)&&(S(e),a&&(R.current=!0))},[y.value]),U=l.useCallback(()=>w?.focus(),[w]),$=l.useCallback((e,t,s)=>{let a=!R.current&&!s;(void 0!==y.value&&y.value===t||a)&&L(e)},[y.value]),q="popper"===a?aE:aA,W=q===aE?{side:d,sideOffset:o,align:u,alignOffset:m,arrowPadding:h,collisionBoundary:x,collisionPadding:p,sticky:f,hideWhenDetached:j,avoidCollisions:g}:{};return(0,i.jsx)(aC,{scope:s,content:w,viewport:b,onViewportChange:k,itemRefCallback:O,selectedItem:C,onItemLeave:U,itemTextRefCallback:$,focusSelectedItem:z,selectedItemText:P,position:a,isPositioned:E,searchRef:I,children:(0,i.jsx)(aa,{as:aP,allowPinchZoom:!0,children:(0,i.jsx)(eA,{asChild:!0,trapped:y.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,eh.Mj)(r,e=>{y.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,i.jsx)(eN,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:n,onPointerDownOutside:c,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:(0,i.jsx)(q,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:e=>e.preventDefault(),...v,...W,onPlaced:()=>T(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:(0,eh.Mj)(v.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||V(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=A().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let s=e.target,a=t.indexOf(s);t=t.slice(a+1)}setTimeout(()=>M(t)),e.preventDefault()}})})})})})})});aL.displayName="SelectContentImpl";var aA=l.forwardRef((e,t)=>{let{__scopeSelect:s,onPlaced:a,...r}=e,n=ax(ak,s),c=aS(ak,s),[d,o]=l.useState(null),[u,m]=l.useState(null),h=(0,ep.e)(t,e=>m(e)),x=ac(s),p=l.useRef(!1),f=l.useRef(!0),{viewport:j,selectedItem:g,selectedItemText:v,focusSelectedItem:y}=c,w=l.useCallback(()=>{if(n.trigger&&n.valueNode&&d&&u&&j&&g&&v){let e=n.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),s=n.valueNode.getBoundingClientRect(),r=v.getBoundingClientRect();if("rtl"!==n.dir){let a=r.left-t.left,n=s.left-a,i=e.left-n,l=e.width+i,c=Math.max(l,t.width),o=em(n,[10,Math.max(10,window.innerWidth-10-c)]);d.style.minWidth=l+"px",d.style.left=o+"px"}else{let a=t.right-r.right,n=window.innerWidth-s.right-a,i=window.innerWidth-e.right-n,l=e.width+i,c=Math.max(l,t.width),o=em(n,[10,Math.max(10,window.innerWidth-10-c)]);d.style.minWidth=l+"px",d.style.right=o+"px"}let i=x(),l=window.innerHeight-20,c=j.scrollHeight,o=window.getComputedStyle(u),m=parseInt(o.borderTopWidth,10),h=parseInt(o.paddingTop,10),f=parseInt(o.borderBottomWidth,10),y=m+h+c+parseInt(o.paddingBottom,10)+f,w=Math.min(5*g.offsetHeight,y),N=window.getComputedStyle(j),b=parseInt(N.paddingTop,10),k=parseInt(N.paddingBottom,10),_=e.top+e.height/2-10,C=g.offsetHeight/2,S=m+h+(g.offsetTop+C);if(S<=_){let e=i.length>0&&g===i[i.length-1].ref.current;d.style.bottom="0px";let t=u.clientHeight-j.offsetTop-j.offsetHeight;d.style.height=S+Math.max(l-_,C+(e?k:0)+t+f)+"px"}else{let e=i.length>0&&g===i[0].ref.current;d.style.top="0px";let t=Math.max(_,m+j.offsetTop+(e?b:0)+C);d.style.height=t+(y-S)+"px",j.scrollTop=S-_+j.offsetTop}d.style.margin="10px 0",d.style.minHeight=w+"px",d.style.maxHeight=l+"px",a?.(),requestAnimationFrame(()=>p.current=!0)}},[x,n.trigger,n.valueNode,d,u,j,g,v,n.dir,a]);(0,t6.b)(()=>w(),[w]);let[N,b]=l.useState();(0,t6.b)(()=>{u&&b(window.getComputedStyle(u).zIndex)},[u]);let k=l.useCallback(e=>{e&&!0===f.current&&(w(),y?.(),f.current=!1)},[w,y]);return(0,i.jsx)(aT,{scope:s,contentWrapper:d,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:(0,i.jsx)("div",{ref:o,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:(0,i.jsx)(eg.WV.div,{...r,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});aA.displayName="SelectItemAlignedPosition";var aE=l.forwardRef((e,t)=>{let{__scopeSelect:s,align:a="start",collisionPadding:r=10,...n}=e,l=am(s);return(0,i.jsx)(sd,{...l,...n,ref:t,align:a,collisionPadding:r,style:{boxSizing:"border-box",...n.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});aE.displayName="SelectPopperPosition";var[aT,aR]=ao(ak,{}),aM="SelectViewport",az=l.forwardRef((e,t)=>{let{__scopeSelect:s,nonce:a,...r}=e,n=aS(aM,s),c=aR(aM,s),d=(0,ep.e)(t,n.onViewportChange),o=l.useRef(0);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,i.jsx)(al.Slot,{scope:s,children:(0,i.jsx)(eg.WV.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:(0,eh.Mj)(r.onScroll,e=>{let t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:a}=c;if(a?.current&&s){let e=Math.abs(o.current-t.scrollTop);if(e>0){let a=window.innerHeight-20,r=Math.max(parseFloat(s.style.minHeight),parseFloat(s.style.height));if(r<a){let n=r+e,i=Math.min(a,n),l=n-i;s.style.height=i+"px","0px"===s.style.bottom&&(t.scrollTop=l>0?l:0,s.style.justifyContent="flex-end")}}}o.current=t.scrollTop})})})]})});az.displayName=aM;var aD="SelectGroup",[aF,aI]=ao(aD);l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e,r=(0,eD.M)();return(0,i.jsx)(aF,{scope:s,id:r,children:(0,i.jsx)(eg.WV.div,{role:"group","aria-labelledby":r,...a,ref:t})})}).displayName=aD;var aV="SelectLabel",aO=l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e,r=aI(aV,s);return(0,i.jsx)(eg.WV.div,{id:r.id,...a,ref:t})});aO.displayName=aV;var aU="SelectItem",[a$,aq]=ao(aU),aW=l.forwardRef((e,t)=>{let{__scopeSelect:s,value:a,disabled:r=!1,textValue:n,...c}=e,d=ax(aU,s),o=aS(aU,s),u=d.value===a,[m,h]=l.useState(n??""),[x,p]=l.useState(!1),f=(0,ep.e)(t,e=>o.itemRefCallback?.(e,a,r)),j=(0,eD.M)(),g=l.useRef("touch"),v=()=>{r||(d.onValueChange(a),d.onOpenChange(!1))};if(""===a)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,i.jsx)(a$,{scope:s,value:a,disabled:r,textId:j,isSelected:u,onItemTextChange:l.useCallback(e=>{h(t=>t||(e?.textContent??"").trim())},[]),children:(0,i.jsx)(al.ItemSlot,{scope:s,value:a,disabled:r,textValue:m,children:(0,i.jsx)(eg.WV.div,{role:"option","aria-labelledby":j,"data-highlighted":x?"":void 0,"aria-selected":u&&x,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...c,ref:f,onFocus:(0,eh.Mj)(c.onFocus,()=>p(!0)),onBlur:(0,eh.Mj)(c.onBlur,()=>p(!1)),onClick:(0,eh.Mj)(c.onClick,()=>{"mouse"!==g.current&&v()}),onPointerUp:(0,eh.Mj)(c.onPointerUp,()=>{"mouse"===g.current&&v()}),onPointerDown:(0,eh.Mj)(c.onPointerDown,e=>{g.current=e.pointerType}),onPointerMove:(0,eh.Mj)(c.onPointerMove,e=>{g.current=e.pointerType,r?o.onItemLeave?.():"mouse"===g.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,eh.Mj)(c.onPointerLeave,e=>{e.currentTarget===document.activeElement&&o.onItemLeave?.()}),onKeyDown:(0,eh.Mj)(c.onKeyDown,e=>{o.searchRef?.current!==""&&" "===e.key||(an.includes(e.key)&&v()," "===e.key&&e.preventDefault())})})})})});aW.displayName=aU;var aH="SelectItemText",aB=l.forwardRef((e,t)=>{let{__scopeSelect:s,className:a,style:r,...n}=e,c=ax(aH,s),d=aS(aH,s),o=aq(aH,s),u=af(aH,s),[m,h]=l.useState(null),x=(0,ep.e)(t,e=>h(e),o.onItemTextChange,e=>d.itemTextRefCallback?.(e,o.value,o.disabled)),p=m?.textContent,f=l.useMemo(()=>(0,i.jsx)("option",{value:o.value,disabled:o.disabled,children:p},o.value),[o.disabled,o.value,p]),{onNativeOptionAdd:j,onNativeOptionRemove:g}=u;return(0,t6.b)(()=>(j(f),()=>g(f)),[j,g,f]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eg.WV.span,{id:o.textId,...n,ref:x}),o.isSelected&&c.valueNode&&!c.valueNodeHasChildren?eu.createPortal(n.children,c.valueNode):null]})});aB.displayName=aH;var aZ="SelectItemIndicator",aG=l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e;return aq(aZ,s).isSelected?(0,i.jsx)(eg.WV.span,{"aria-hidden":!0,...a,ref:t}):null});aG.displayName=aZ;var aK="SelectScrollUpButton",aY=l.forwardRef((e,t)=>{let s=aS(aK,e.__scopeSelect),a=aR(aK,e.__scopeSelect),[r,n]=l.useState(!1),c=(0,ep.e)(t,a.onScrollButtonChange);return(0,t6.b)(()=>{if(s.viewport&&s.isPositioned){let e=function(){n(t.scrollTop>0)},t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),r?(0,i.jsx)(aQ,{...e,ref:c,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});aY.displayName=aK;var aX="SelectScrollDownButton",aJ=l.forwardRef((e,t)=>{let s=aS(aX,e.__scopeSelect),a=aR(aX,e.__scopeSelect),[r,n]=l.useState(!1),c=(0,ep.e)(t,a.onScrollButtonChange);return(0,t6.b)(()=>{if(s.viewport&&s.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;n(Math.ceil(t.scrollTop)<e)},t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),r?(0,i.jsx)(aQ,{...e,ref:c,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});aJ.displayName=aX;var aQ=l.forwardRef((e,t)=>{let{__scopeSelect:s,onAutoScroll:a,...r}=e,n=aS("SelectScrollButton",s),c=l.useRef(null),d=ac(s),o=l.useCallback(()=>{null!==c.current&&(window.clearInterval(c.current),c.current=null)},[]);return l.useEffect(()=>()=>o(),[o]),(0,t6.b)(()=>{let e=d().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[d]),(0,i.jsx)(eg.WV.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:(0,eh.Mj)(r.onPointerDown,()=>{null===c.current&&(c.current=window.setInterval(a,50))}),onPointerMove:(0,eh.Mj)(r.onPointerMove,()=>{n.onItemLeave?.(),null===c.current&&(c.current=window.setInterval(a,50))}),onPointerLeave:(0,eh.Mj)(r.onPointerLeave,()=>{o()})})}),a0=l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e;return(0,i.jsx)(eg.WV.div,{"aria-hidden":!0,...a,ref:t})});a0.displayName="SelectSeparator";var a1="SelectArrow";l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e,r=am(s),n=ax(a1,s),l=aS(a1,s);return n.open&&"popper"===l.position?(0,i.jsx)(sm,{...r,...a,ref:t}):null}).displayName=a1;var a2=l.forwardRef(({__scopeSelect:e,value:t,...s},a)=>{let r=l.useRef(null),n=(0,ep.e)(a,r),c=(0,sv.D)(t);return l.useEffect(()=>{let e=r.current;if(!e)return;let s=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(c!==t&&s){let a=new Event("change",{bubbles:!0});s.call(e,t),e.dispatchEvent(a)}},[c,t]),(0,i.jsx)(eg.WV.select,{...s,style:{...sy,...s.style},ref:n,defaultValue:t})});function a4(e){return""===e||void 0===e}function a5(e){let t=(0,ev.W)(e),s=l.useRef(""),a=l.useRef(0),r=l.useCallback(e=>{let r=s.current+e;t(r),function e(t){s.current=t,window.clearTimeout(a.current),""!==t&&(a.current=window.setTimeout(()=>e(""),1e3))}(r)},[t]),n=l.useCallback(()=>{s.current="",window.clearTimeout(a.current)},[]);return l.useEffect(()=>()=>window.clearTimeout(a.current),[]),[s,r,n]}function a3(e,t,s){var a;let r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,n=(a=Math.max(s?e.indexOf(s):-1,0),e.map((t,s)=>e[(a+s)%e.length]));1===r.length&&(n=n.filter(e=>e!==s));let i=n.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return i!==s?i:void 0}a2.displayName="SelectBubbleInput";let a6=(0,v.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),a7=(0,v.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),a8=(0,v.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),a9=l.forwardRef(({className:e,children:t,...s},a)=>(0,i.jsxs)(av,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,i.jsx(aN,{asChild:!0,children:i.jsx(a6,{className:"h-4 w-4 opacity-50"})})]}));a9.displayName=av.displayName;let re=l.forwardRef(({className:e,...t},s)=>i.jsx(aY,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(a7,{className:"h-4 w-4"})}));re.displayName=aY.displayName;let rt=l.forwardRef(({className:e,...t},s)=>i.jsx(aJ,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(a6,{className:"h-4 w-4"})}));rt.displayName=aJ.displayName;let rs=l.forwardRef(({className:e,children:t,position:s="popper",...a},r)=>i.jsx(ab,{children:(0,i.jsxs)(a_,{ref:r,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...a,children:[i.jsx(re,{}),i.jsx(az,{className:(0,d.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(rt,{})]})}));rs.displayName=a_.displayName,l.forwardRef(({className:e,...t},s)=>i.jsx(aO,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=aO.displayName;let ra=l.forwardRef(({className:e,children:t,...s},a)=>(0,i.jsxs)(aW,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(aG,{children:i.jsx(a8,{className:"h-4 w-4"})})}),i.jsx(aB,{children:t})]}));ra.displayName=aW.displayName,l.forwardRef(({className:e,...t},s)=>i.jsx(a0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=a0.displayName;let rr=(0,v.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),rn=(0,v.Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),ri=(0,v.Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),rl=(0,v.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),rc=(0,v.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),rd=(0,v.Z)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var ro=s(5594),ru=s(9815),rm="Tabs",[rh,rx]=(0,ef.b)(rm,[ro.Pc]),rp=(0,ro.Pc)(),[rf,rj]=rh(rm),rg=l.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,onValueChange:r,defaultValue:n,orientation:l="horizontal",dir:c,activationMode:d="automatic",...o}=e,u=(0,ej.gm)(c),[m,h]=(0,sg.T)({prop:a,onChange:r,defaultProp:n??"",caller:rm});return(0,i.jsx)(rf,{scope:s,baseId:(0,eD.M)(),value:m,onValueChange:h,orientation:l,dir:u,activationMode:d,children:(0,i.jsx)(eg.WV.div,{dir:u,"data-orientation":l,...o,ref:t})})});rg.displayName=rm;var rv="TabsList",ry=l.forwardRef((e,t)=>{let{__scopeTabs:s,loop:a=!0,...r}=e,n=rj(rv,s),l=rp(s);return(0,i.jsx)(ro.fC,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:a,children:(0,i.jsx)(eg.WV.div,{role:"tablist","aria-orientation":n.orientation,...r,ref:t})})});ry.displayName=rv;var rw="TabsTrigger",rN=l.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,disabled:r=!1,...n}=e,l=rj(rw,s),c=rp(s),d=r_(l.baseId,a),o=rC(l.baseId,a),u=a===l.value;return(0,i.jsx)(ro.ck,{asChild:!0,...c,focusable:!r,active:u,children:(0,i.jsx)(eg.WV.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":o,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:d,...n,ref:t,onMouseDown:(0,eh.Mj)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(a)}),onKeyDown:(0,eh.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(a)}),onFocus:(0,eh.Mj)(e.onFocus,()=>{let e="manual"!==l.activationMode;u||r||!e||l.onValueChange(a)})})})});rN.displayName=rw;var rb="TabsContent",rk=l.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,forceMount:r,children:n,...c}=e,d=rj(rb,s),o=r_(d.baseId,a),u=rC(d.baseId,a),m=a===d.value,h=l.useRef(m);return l.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,i.jsx)(ru.z,{present:r||m,children:({present:s})=>(0,i.jsx)(eg.WV.div,{"data-state":m?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":o,hidden:!s,id:u,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:s&&n})})});function r_(e,t){return`${e}-trigger-${t}`}function rC(e,t){return`${e}-content-${t}`}rk.displayName=rb;let rS=l.forwardRef(({className:e,...t},s)=>i.jsx(ry,{ref:s,className:(0,d.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));rS.displayName=ry.displayName;let rP=l.forwardRef(({className:e,...t},s)=>i.jsx(rN,{ref:s,className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));rP.displayName=rN.displayName;let rL=l.forwardRef(({className:e,...t},s)=>i.jsx(rk,{ref:s,className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));rL.displayName=rk.displayName;let rA=(0,v.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),rE=(0,v.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var rT=s(9734);let rR=(0,v.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),rM=(0,v.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);function rz({onSuccess:e,onCancel:t}){let[s,a]=(0,l.useState)({firstName:"",lastName:"",email:"",phone:"",companyName:"",businessType:"",companyNumber:"",vatNumber:"",addressLine1:"",addressLine2:"",city:"",postcode:"",country:"United Kingdom",plan:"basic",role:"user",isAdmin:!1,sendWelcomeEmail:!0,password:"",confirmPassword:""}),[r,n]=(0,l.useState)(!1),[d,f]=(0,l.useState)(""),[v,b]=(0,l.useState)(""),[C,S]=(0,l.useState)(!1),[P,A]=(0,l.useState)(!1),[E,R]=(0,l.useState)({}),z=(e,t)=>{a(s=>({...s,[e]:t})),E[e]&&R(t=>({...t,[e]:""}))},I=()=>{let e={};if(s.firstName.trim()||(e.firstName="First name is required"),s.lastName.trim()||(e.lastName="Last name is required"),s.email.trim()?M(s.email)||(e.email="Please enter a valid email address"):e.email="Email is required",s.companyName.trim()||(e.companyName="Company name is required"),s.addressLine1.trim()||(e.addressLine1="Address is required"),s.city.trim()||(e.city="City is required"),s.postcode.trim()||(e.postcode="Postcode is required"),s.password){let t=function(e){let t=[];return e.length<8&&t.push("Password must be at least 8 characters long"),/[A-Z]/.test(e)||t.push("Password must contain at least one uppercase letter"),/[a-z]/.test(e)||t.push("Password must contain at least one lowercase letter"),/\d/.test(e)||t.push("Password must contain at least one number"),/[!@#$%^&*(),.?":{}|<>]/.test(e)||t.push("Password must contain at least one special character"),{valid:0===t.length,errors:t}}(s.password);t.valid||(e.password=t.errors[0])}else e.password="Password is required";return s.password!==s.confirmPassword&&(e.confirmPassword="Passwords do not match"),s.phone&&!/^[\+]?[0-9\s\-\(\)]{10,}$/.test(s.phone)&&(e.phone="Please enter a valid phone number"),R(e),0===Object.keys(e).length},V=async t=>{if(t.preventDefault(),f(""),b(""),!I()){f("Please fix the validation errors below");return}n(!0);try{await T("admin_create_user_started",{email:s.email,companyName:s.companyName,plan:s.plan,isAdmin:s.isAdmin});let t={firstName:s.firstName.trim(),lastName:s.lastName.trim(),email:s.email.trim().toLowerCase(),phone:s.phone.trim(),companyName:s.companyName.trim(),businessType:s.businessType.trim(),companyNumber:s.companyNumber.trim(),vatNumber:s.vatNumber.trim(),address:{line1:s.addressLine1.trim(),line2:s.addressLine2.trim(),city:s.city.trim(),postcode:s.postcode.trim(),country:s.country},plan:s.plan,role:s.role,is_admin:s.isAdmin,send_welcome_email:s.sendWelcomeEmail,password:s.password},a=await L.post("/api/admin/users/create",t);await T("admin_create_user_success",{userId:a.user.id,email:s.email,companyName:s.companyName}),b("User created successfully!"),setTimeout(()=>{e(a.user)},1500)}catch(e){await T("admin_create_user_error",{email:s.email,error_message:D(e),stack:F(e)}),f(D(e)||"Failed to create user")}finally{n(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-background rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(rA,{className:"h-6 w-6 text-primary"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Create New User"})]}),i.jsx(c.z,{variant:"ghost",size:"sm",onClick:t,children:i.jsx(Z,{className:"h-4 w-4"})})]}),d&&(0,i.jsxs)(j,{className:"mb-4",variant:"destructive",children:[i.jsx(w,{className:"h-4 w-4"}),i.jsx(g,{children:d})]}),v&&(0,i.jsxs)(j,{className:"mb-4",children:[i.jsx(N,{className:"h-4 w-4"}),i.jsx(g,{children:v})]}),(0,i.jsxs)("form",{onSubmit:V,children:[(0,i.jsxs)(rg,{defaultValue:"personal",className:"space-y-6",children:[(0,i.jsxs)(rS,{className:"grid w-full grid-cols-4",children:[i.jsx(rP,{value:"personal",children:"Personal"}),i.jsx(rP,{value:"business",children:"Business"}),i.jsx(rP,{value:"address",children:"Address"}),i.jsx(rP,{value:"account",children:"Account"})]}),i.jsx(rL,{value:"personal",className:"space-y-4",children:(0,i.jsxs)(o,{children:[i.jsx(u,{children:(0,i.jsxs)(m,{className:"flex items-center gap-2",children:[i.jsx(rE,{className:"h-5 w-5"}),"Personal Information"]})}),(0,i.jsxs)(h,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"firstName",children:"First Name *"}),i.jsx(x,{id:"firstName",value:s.firstName,onChange:e=>z("firstName",e.target.value),placeholder:"John",className:E.firstName?"border-red-500":""}),E.firstName&&i.jsx("p",{className:"text-sm text-red-500",children:E.firstName})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"lastName",children:"Last Name *"}),i.jsx(x,{id:"lastName",value:s.lastName,onChange:e=>z("lastName",e.target.value),placeholder:"Doe",className:E.lastName?"border-red-500":""}),E.lastName&&i.jsx("p",{className:"text-sm text-red-500",children:E.lastName})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"email",children:"Email Address *"}),i.jsx(x,{id:"email",type:"email",value:s.email,onChange:e=>z("email",e.target.value),placeholder:"john.doe@company.com",className:E.email?"border-red-500":""}),E.email&&i.jsx("p",{className:"text-sm text-red-500",children:E.email})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"phone",children:"Phone Number"}),i.jsx(x,{id:"phone",type:"tel",value:s.phone,onChange:e=>z("phone",e.target.value),placeholder:"+44 20 7123 4567",className:E.phone?"border-red-500":""}),E.phone&&i.jsx("p",{className:"text-sm text-red-500",children:E.phone})]})]})]})}),i.jsx(rL,{value:"business",className:"space-y-4",children:(0,i.jsxs)(o,{children:[i.jsx(u,{children:(0,i.jsxs)(m,{className:"flex items-center gap-2",children:[i.jsx(rT.Z,{className:"h-5 w-5"}),"Business Information"]})}),(0,i.jsxs)(h,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"companyName",children:"Company Name *"}),i.jsx(x,{id:"companyName",value:s.companyName,onChange:e=>z("companyName",e.target.value),placeholder:"Acme Corporation Ltd",className:E.companyName?"border-red-500":""}),E.companyName&&i.jsx("p",{className:"text-sm text-red-500",children:E.companyName})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"businessType",children:"Business Type"}),(0,i.jsxs)(aj,{value:s.businessType,onValueChange:e=>z("businessType",e),children:[i.jsx(a9,{children:i.jsx(aw,{placeholder:"Select business type"})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"limited_company",children:"Limited Company"}),i.jsx(ra,{value:"sole_trader",children:"Sole Trader"}),i.jsx(ra,{value:"partnership",children:"Partnership"}),i.jsx(ra,{value:"llp",children:"Limited Liability Partnership"}),i.jsx(ra,{value:"charity",children:"Charity"}),i.jsx(ra,{value:"other",children:"Other"})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"companyNumber",children:"Company Number"}),i.jsx(x,{id:"companyNumber",value:s.companyNumber,onChange:e=>z("companyNumber",e.target.value),placeholder:"12345678"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"vatNumber",children:"VAT Number"}),i.jsx(x,{id:"vatNumber",value:s.vatNumber,onChange:e=>z("vatNumber",e.target.value),placeholder:"GB123456789"})]})]})]})]})}),i.jsx(rL,{value:"address",className:"space-y-4",children:(0,i.jsxs)(o,{children:[i.jsx(u,{children:(0,i.jsxs)(m,{className:"flex items-center gap-2",children:[i.jsx(rR,{className:"h-5 w-5"}),"Address Information"]})}),(0,i.jsxs)(h,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"addressLine1",children:"Address Line 1 *"}),i.jsx(x,{id:"addressLine1",value:s.addressLine1,onChange:e=>z("addressLine1",e.target.value),placeholder:"123 Business Street",className:E.addressLine1?"border-red-500":""}),E.addressLine1&&i.jsx("p",{className:"text-sm text-red-500",children:E.addressLine1})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"addressLine2",children:"Address Line 2"}),i.jsx(x,{id:"addressLine2",value:s.addressLine2,onChange:e=>z("addressLine2",e.target.value),placeholder:"Suite 100"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"city",children:"City *"}),i.jsx(x,{id:"city",value:s.city,onChange:e=>z("city",e.target.value),placeholder:"London",className:E.city?"border-red-500":""}),E.city&&i.jsx("p",{className:"text-sm text-red-500",children:E.city})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"postcode",children:"Postcode *"}),i.jsx(x,{id:"postcode",value:s.postcode,onChange:e=>z("postcode",e.target.value),placeholder:"SW1A 1AA",className:E.postcode?"border-red-500":""}),E.postcode&&i.jsx("p",{className:"text-sm text-red-500",children:E.postcode})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"country",children:"Country"}),(0,i.jsxs)(aj,{value:s.country,onValueChange:e=>z("country",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"United Kingdom",children:"United Kingdom"}),i.jsx(ra,{value:"United States",children:"United States"}),i.jsx(ra,{value:"Canada",children:"Canada"}),i.jsx(ra,{value:"Australia",children:"Australia"}),i.jsx(ra,{value:"Germany",children:"Germany"}),i.jsx(ra,{value:"France",children:"France"}),i.jsx(ra,{value:"Other",children:"Other"})]})]})]})]})]})]})}),i.jsx(rL,{value:"account",className:"space-y-4",children:(0,i.jsxs)(o,{children:[i.jsx(u,{children:(0,i.jsxs)(m,{className:"flex items-center gap-2",children:[i.jsx(y,{className:"h-5 w-5"}),"Account Settings"]})}),(0,i.jsxs)(h,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"plan",children:"Subscription Plan"}),(0,i.jsxs)(aj,{value:s.plan,onValueChange:e=>z("plan",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"basic",children:"Basic - \xa319.99/month"}),i.jsx(ra,{value:"premium",children:"Premium - \xa339.99/month"}),i.jsx(ra,{value:"professional",children:"Professional - \xa379.99/month"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"role",children:"User Role"}),(0,i.jsxs)(aj,{value:s.role,onValueChange:e=>z("role",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"user",children:"User"}),i.jsx(ra,{value:"admin",children:"Admin"}),i.jsx(ra,{value:"super_admin",children:"Super Admin"})]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"isAdmin",checked:s.isAdmin,onChange:e=>z("isAdmin",e.target.checked),className:"rounded"}),i.jsx(p._,{htmlFor:"isAdmin",children:"Grant Admin Access"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"sendWelcomeEmail",checked:s.sendWelcomeEmail,onChange:e=>z("sendWelcomeEmail",e.target.checked),className:"rounded"}),i.jsx(p._,{htmlFor:"sendWelcomeEmail",children:"Send Welcome Email"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"password",children:"Password *"}),(0,i.jsxs)("div",{className:"relative",children:[i.jsx(x,{id:"password",type:C?"text":"password",value:s.password,onChange:e=>z("password",e.target.value),placeholder:"Enter secure password",className:E.password?"border-red-500":""}),i.jsx("button",{type:"button",onClick:()=>S(!C),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:C?i.jsx(k,{className:"h-4 w-4"}):i.jsx(_,{className:"h-4 w-4"})})]}),E.password&&i.jsx("p",{className:"text-sm text-red-500",children:E.password}),i.jsx(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*",t="";for(let s=0;s<12;s++)t+=e.charAt(Math.floor(Math.random()*e.length));a(e=>({...e,password:t,confirmPassword:t}))},className:"mt-2",children:"Generate Secure Password"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"confirmPassword",children:"Confirm Password *"}),(0,i.jsxs)("div",{className:"relative",children:[i.jsx(x,{id:"confirmPassword",type:P?"text":"password",value:s.confirmPassword,onChange:e=>z("confirmPassword",e.target.value),placeholder:"Confirm password",className:E.confirmPassword?"border-red-500":""}),i.jsx("button",{type:"button",onClick:()=>A(!P),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:P?i.jsx(k,{className:"h-4 w-4"}):i.jsx(_,{className:"h-4 w-4"})})]}),E.confirmPassword&&i.jsx("p",{className:"text-sm text-red-500",children:E.confirmPassword})]})]})]})})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[i.jsx(c.z,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),i.jsx(c.z,{type:"submit",disabled:r,children:r?(0,i.jsxs)(i.Fragment,{children:[i.jsx(rM,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating User..."]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx(rA,{className:"h-4 w-4 mr-2"}),"Create User"]})})]})]})]})})})}function rD({user:e,onSuccess:t,onCancel:s}){let[a,r]=(0,l.useState)({firstName:e.firstName||e.name?.split(" ")[0]||"",lastName:e.lastName||e.name?.split(" ")[1]||"",email:e.email||"",phone:e.phone||"",companyName:e.companyName||"",businessType:e.businessType||"",companyNumber:e.companyNumber||"",vatNumber:e.vatNumber||"",addressLine1:e.address?.line1||"",addressLine2:e.address?.line2||"",city:e.address?.city||"",postcode:e.address?.postcode||"",country:e.address?.country||"United Kingdom",plan:e.plan||"basic",role:e.role||"user",isAdmin:e.is_admin||!1,status:e.status||"active",kycStatus:e.kyc_status||"pending"}),[n,d]=(0,l.useState)(!1),[f,v]=(0,l.useState)(""),[b,k]=(0,l.useState)(""),[_,S]=(0,l.useState)({}),P=(e,t)=>{r(s=>({...s,[e]:t})),_[e]&&S(t=>({...t,[e]:""}))},A=()=>{let e={};return a.firstName.trim()||(e.firstName="First name is required"),a.lastName.trim()||(e.lastName="Last name is required"),a.email.trim()?M(a.email)||(e.email="Please enter a valid email address"):e.email="Email is required",a.companyName.trim()||(e.companyName="Company name is required"),a.addressLine1.trim()||(e.addressLine1="Address is required"),a.city.trim()||(e.city="City is required"),a.postcode.trim()||(e.postcode="Postcode is required"),a.phone&&!/^[\+]?[0-9\s\-\(\)]{10,}$/.test(a.phone)&&(e.phone="Please enter a valid phone number"),S(e),0===Object.keys(e).length},E=async s=>{if(s.preventDefault(),v(""),k(""),!A()){v("Please fix the validation errors below");return}d(!0);try{await T("admin_edit_user_started",{userId:e.id,email:a.email,changes:a});let s={firstName:a.firstName.trim(),lastName:a.lastName.trim(),email:a.email.trim().toLowerCase(),phone:a.phone.trim(),companyName:a.companyName.trim(),businessType:a.businessType.trim(),companyNumber:a.companyNumber.trim(),vatNumber:a.vatNumber.trim(),address:{line1:a.addressLine1.trim(),line2:a.addressLine2.trim(),city:a.city.trim(),postcode:a.postcode.trim(),country:a.country},plan:a.plan,role:a.role,is_admin:a.isAdmin,status:a.status,kyc_status:a.kycStatus},r=await L.put(`/api/admin/users/${e.id}`,s);await T("admin_edit_user_success",{userId:e.id,email:a.email,changes:a}),k("User updated successfully!"),setTimeout(()=>{t(r.user)},1500)}catch(t){await T("admin_edit_user_error",{userId:e.id,email:a.email,error_message:D(t),stack:F(t)}),v(D(t)||"Failed to update user")}finally{d(!1)}},R=async()=>{d(!0);try{await T("admin_suspend_user",{userId:e.id}),await L.put(`/api/admin/users/${e.id}/suspend`),k("User suspended successfully!"),setTimeout(()=>{t({...e,status:"suspended"})},1500)}catch(e){v(D(e)||"Failed to suspend user")}finally{d(!1)}},z=async()=>{d(!0);try{await T("admin_activate_user",{userId:e.id}),await L.put(`/api/admin/users/${e.id}/activate`),k("User activated successfully!"),setTimeout(()=>{t({...e,status:"active"})},1500)}catch(e){v(D(e)||"Failed to activate user")}finally{d(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-background rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(rE,{className:"h-6 w-6 text-primary"}),(0,i.jsxs)("h2",{className:"text-2xl font-bold",children:["Edit User: ",e.name]})]}),i.jsx(c.z,{variant:"ghost",size:"sm",onClick:s,children:i.jsx(Z,{className:"h-4 w-4"})})]}),f&&(0,i.jsxs)(j,{className:"mb-4",variant:"destructive",children:[i.jsx(w,{className:"h-4 w-4"}),i.jsx(g,{children:f})]}),b&&(0,i.jsxs)(j,{className:"mb-4",children:[i.jsx(N,{className:"h-4 w-4"}),i.jsx(g,{children:b})]}),(0,i.jsxs)("form",{onSubmit:E,children:[(0,i.jsxs)(rg,{defaultValue:"personal",className:"space-y-6",children:[(0,i.jsxs)(rS,{className:"grid w-full grid-cols-4",children:[i.jsx(rP,{value:"personal",children:"Personal"}),i.jsx(rP,{value:"business",children:"Business"}),i.jsx(rP,{value:"address",children:"Address"}),i.jsx(rP,{value:"account",children:"Account"})]}),i.jsx(rL,{value:"personal",className:"space-y-4",children:(0,i.jsxs)(o,{children:[i.jsx(u,{children:(0,i.jsxs)(m,{className:"flex items-center gap-2",children:[i.jsx(rE,{className:"h-5 w-5"}),"Personal Information"]})}),(0,i.jsxs)(h,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"firstName",children:"First Name *"}),i.jsx(x,{id:"firstName",value:a.firstName,onChange:e=>P("firstName",e.target.value),placeholder:"John",className:_.firstName?"border-red-500":""}),_.firstName&&i.jsx("p",{className:"text-sm text-red-500",children:_.firstName})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"lastName",children:"Last Name *"}),i.jsx(x,{id:"lastName",value:a.lastName,onChange:e=>P("lastName",e.target.value),placeholder:"Doe",className:_.lastName?"border-red-500":""}),_.lastName&&i.jsx("p",{className:"text-sm text-red-500",children:_.lastName})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"email",children:"Email Address *"}),i.jsx(x,{id:"email",type:"email",value:a.email,onChange:e=>P("email",e.target.value),placeholder:"john.doe@company.com",className:_.email?"border-red-500":""}),_.email&&i.jsx("p",{className:"text-sm text-red-500",children:_.email})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"phone",children:"Phone Number"}),i.jsx(x,{id:"phone",type:"tel",value:a.phone,onChange:e=>P("phone",e.target.value),placeholder:"+44 20 7123 4567",className:_.phone?"border-red-500":""}),_.phone&&i.jsx("p",{className:"text-sm text-red-500",children:_.phone})]})]})]})}),i.jsx(rL,{value:"business",className:"space-y-4",children:(0,i.jsxs)(o,{children:[i.jsx(u,{children:(0,i.jsxs)(m,{className:"flex items-center gap-2",children:[i.jsx(rT.Z,{className:"h-5 w-5"}),"Business Information"]})}),(0,i.jsxs)(h,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"companyName",children:"Company Name *"}),i.jsx(x,{id:"companyName",value:a.companyName,onChange:e=>P("companyName",e.target.value),placeholder:"Acme Corporation Ltd",className:_.companyName?"border-red-500":""}),_.companyName&&i.jsx("p",{className:"text-sm text-red-500",children:_.companyName})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"businessType",children:"Business Type"}),(0,i.jsxs)(aj,{value:a.businessType,onValueChange:e=>P("businessType",e),children:[i.jsx(a9,{children:i.jsx(aw,{placeholder:"Select business type"})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"limited_company",children:"Limited Company"}),i.jsx(ra,{value:"sole_trader",children:"Sole Trader"}),i.jsx(ra,{value:"partnership",children:"Partnership"}),i.jsx(ra,{value:"llp",children:"Limited Liability Partnership"}),i.jsx(ra,{value:"charity",children:"Charity"}),i.jsx(ra,{value:"other",children:"Other"})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"companyNumber",children:"Company Number"}),i.jsx(x,{id:"companyNumber",value:a.companyNumber,onChange:e=>P("companyNumber",e.target.value),placeholder:"12345678"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"vatNumber",children:"VAT Number"}),i.jsx(x,{id:"vatNumber",value:a.vatNumber,onChange:e=>P("vatNumber",e.target.value),placeholder:"GB123456789"})]})]})]})]})}),i.jsx(rL,{value:"address",className:"space-y-4",children:(0,i.jsxs)(o,{children:[i.jsx(u,{children:(0,i.jsxs)(m,{className:"flex items-center gap-2",children:[i.jsx(rR,{className:"h-5 w-5"}),"Address Information"]})}),(0,i.jsxs)(h,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"addressLine1",children:"Address Line 1 *"}),i.jsx(x,{id:"addressLine1",value:a.addressLine1,onChange:e=>P("addressLine1",e.target.value),placeholder:"123 Business Street",className:_.addressLine1?"border-red-500":""}),_.addressLine1&&i.jsx("p",{className:"text-sm text-red-500",children:_.addressLine1})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"addressLine2",children:"Address Line 2"}),i.jsx(x,{id:"addressLine2",value:a.addressLine2,onChange:e=>P("addressLine2",e.target.value),placeholder:"Suite 100"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"city",children:"City *"}),i.jsx(x,{id:"city",value:a.city,onChange:e=>P("city",e.target.value),placeholder:"London",className:_.city?"border-red-500":""}),_.city&&i.jsx("p",{className:"text-sm text-red-500",children:_.city})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"postcode",children:"Postcode *"}),i.jsx(x,{id:"postcode",value:a.postcode,onChange:e=>P("postcode",e.target.value),placeholder:"SW1A 1AA",className:_.postcode?"border-red-500":""}),_.postcode&&i.jsx("p",{className:"text-sm text-red-500",children:_.postcode})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"country",children:"Country"}),(0,i.jsxs)(aj,{value:a.country,onValueChange:e=>P("country",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"United Kingdom",children:"United Kingdom"}),i.jsx(ra,{value:"United States",children:"United States"}),i.jsx(ra,{value:"Canada",children:"Canada"}),i.jsx(ra,{value:"Australia",children:"Australia"}),i.jsx(ra,{value:"Germany",children:"Germany"}),i.jsx(ra,{value:"France",children:"France"}),i.jsx(ra,{value:"Other",children:"Other"})]})]})]})]})]})]})}),i.jsx(rL,{value:"account",className:"space-y-4",children:(0,i.jsxs)(o,{children:[i.jsx(u,{children:(0,i.jsxs)(m,{className:"flex items-center gap-2",children:[i.jsx(y,{className:"h-5 w-5"}),"Account Settings"]})}),(0,i.jsxs)(h,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"plan",children:"Subscription Plan"}),(0,i.jsxs)(aj,{value:a.plan,onValueChange:e=>P("plan",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"basic",children:"Basic - \xa319.99/month"}),i.jsx(ra,{value:"premium",children:"Premium - \xa339.99/month"}),i.jsx(ra,{value:"professional",children:"Professional - \xa379.99/month"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"role",children:"User Role"}),(0,i.jsxs)(aj,{value:a.role,onValueChange:e=>P("role",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"user",children:"User"}),i.jsx(ra,{value:"admin",children:"Admin"}),i.jsx(ra,{value:"super_admin",children:"Super Admin"})]})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"status",children:"Account Status"}),(0,i.jsxs)(aj,{value:a.status,onValueChange:e=>P("status",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"active",children:"Active"}),i.jsx(ra,{value:"suspended",children:"Suspended"}),i.jsx(ra,{value:"pending",children:"Pending"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"kycStatus",children:"KYC Status"}),(0,i.jsxs)(aj,{value:a.kycStatus,onValueChange:e=>P("kycStatus",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"pending",children:"Pending"}),i.jsx(ra,{value:"approved",children:"Approved"}),i.jsx(ra,{value:"rejected",children:"Rejected"})]})]})]})]}),i.jsx("div",{className:"space-y-4",children:(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"isAdmin",checked:a.isAdmin,onChange:e=>P("isAdmin",e.target.checked),className:"rounded"}),i.jsx(p._,{htmlFor:"isAdmin",children:"Grant Admin Access"})]})})]})]})})]}),(0,i.jsxs)("div",{className:"flex justify-between mt-6",children:[i.jsx("div",{className:"flex gap-2",children:"active"===a.status?(0,i.jsxs)(c.z,{type:"button",variant:"destructive",onClick:R,disabled:n,children:[i.jsx(rn,{className:"h-4 w-4 mr-2"}),"Suspend User"]}):(0,i.jsxs)(c.z,{type:"button",onClick:z,disabled:n,children:[i.jsx(ri,{className:"h-4 w-4 mr-2"}),"Activate User"]})}),(0,i.jsxs)("div",{className:"flex gap-3",children:[i.jsx(c.z,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),i.jsx(c.z,{type:"submit",disabled:n,children:n?(0,i.jsxs)(i.Fragment,{children:[i.jsx(C,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx(rM,{className:"h-4 w-4 mr-2"}),"Update User"]})})]})]})]})]})})})}function rF({onNavigate:e}){let[t,s]=(0,l.useState)(""),[a,r]=(0,l.useState)("all"),[n,d]=(0,l.useState)("all"),[u,m]=(0,l.useState)("all"),[p,f]=(0,l.useState)(!1),[j,g]=(0,l.useState)([]),[v,y]=(0,l.useState)(!1),[w,b]=(0,l.useState)(!1),[k,C]=(0,l.useState)(null),{data:S,isLoading:P,refetch:A}=z("/api/admin/users"),{data:E,isLoading:R}=z("/api/admin/users/stats"),M=S||[],I=M.filter(e=>{let s=e.name.toLowerCase().includes(t.toLowerCase())||e.email.toLowerCase().includes(t.toLowerCase())||e.companyName&&e.companyName.toLowerCase().includes(t.toLowerCase()),r="all"===a||e.status===a,i="all"===n||e.plan===n,l="all"===u||e.kyc===u;return s&&r&&i&&l}),V=async()=>{f(!0);try{await T("admin_export_users",{filters:{statusFilter:a,planFilter:n,kycFilter:u,searchTerm:t}});let e=await L.get(`/api/admin/users/export?status=${a}&plan=${n}&kyc=${u}&search=${t}`),s=new Blob([e.data],{type:"application/json"}),r=window.URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download=`users-export-${new Date().toISOString().split("T")[0]}.json`,i.click()}catch(e){await T("admin_export_users_error",{error_message:D(e),stack:F(e)})}finally{f(!1)}},O=async()=>{try{await T("admin_add_user_initiated"),y(!0)}catch(e){await T("admin_add_user_error",{error_message:D(e),stack:F(e)})}},U=async e=>{try{await T("admin_user_created_success",{userId:e.id,email:e.email}),y(!1),A()}catch(e){await T("admin_user_created_error",{error_message:D(e),stack:F(e)})}},$=async t=>{try{await T("admin_view_user",{userId:t}),e?e("user-detail",{userId:t}):window.open(`/admin/users/${t}`,"_blank")}catch(e){await T("admin_view_user_error",{userId:t,error_message:D(e),stack:F(e)})}},q=async e=>{try{await T("admin_edit_user_initiated",{userId:e});let t=M.find(t=>t.id===e);t&&(C(t),b(!0))}catch(t){await T("admin_edit_user_error",{userId:e,error_message:D(t),stack:F(t)})}},W=async e=>{try{await T("admin_user_updated_success",{userId:e.id,email:e.email}),b(!1),C(null),A()}catch(e){await T("admin_user_updated_error",{error_message:D(e),stack:F(e)})}},H=async(e,t)=>{f(!0);try{await T("admin_update_kyc_status",{userId:e,newStatus:t}),await L.put(`/api/admin/users/${e}/kyc-status`,{status:t}),A()}catch(s){await T("admin_update_kyc_status_error",{userId:e,newStatus:t,error_message:D(s),stack:F(s)})}finally{f(!1)}},B=async e=>{f(!0);try{await T("admin_suspend_user",{userId:e}),await L.put(`/api/admin/users/${e}/suspend`),A()}catch(t){await T("admin_suspend_user_error",{userId:e,error_message:D(t),stack:F(t)})}finally{f(!1)}},Z=async e=>{f(!0);try{await T("admin_activate_user",{userId:e}),await L.put(`/api/admin/users/${e}/activate`),A()}catch(t){await T("admin_activate_user_error",{userId:e,error_message:D(t),stack:F(t)})}finally{f(!1)}},G=async e=>{if(0!==j.length){f(!0);try{await T("admin_bulk_action",{action:e,userIds:j}),await L.post(`/api/admin/users/bulk/${e}`,{userIds:j}),g([]),A()}catch(t){await T("admin_bulk_action_error",{action:e,userIds:j,error_message:D(t),stack:F(t)})}finally{f(!1)}}},Y=e=>{g(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},X=()=>{g([])};return(0,i.jsxs)("div",{className:"space-y-6",children:[v&&i.jsx(rz,{onSuccess:U,onCancel:()=>{y(!1)}}),w&&k&&i.jsx(rD,{user:k,onSuccess:W,onCancel:()=>{b(!1),C(null)}}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"User Management"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage user accounts, KYC status, and subscriptions"}),E&&(0,i.jsxs)("div",{className:"flex gap-4 mt-2 text-sm text-muted-foreground",children:[(0,i.jsxs)("span",{children:["Total: ",E?.total||0]}),(0,i.jsxs)("span",{children:["Active: ",E?.active||0]}),(0,i.jsxs)("span",{children:["Pending KYC: ",E?.pendingKyc||0]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:V,disabled:p,children:[i.jsx(K,{className:"h-4 w-4"}),"Export Users"]}),(0,i.jsxs)(c.z,{className:"gap-2",onClick:O,disabled:p,children:[i.jsx(rr,{className:"h-4 w-4"}),"Add User"]})]})]}),j.length>0&&i.jsx(o,{children:i.jsx(h,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"text-sm font-medium",children:[j.length," users selected"]}),i.jsx(c.z,{variant:"ghost",size:"sm",onClick:X,children:"Clear"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>G("suspend"),disabled:p,children:[i.jsx(rn,{className:"h-4 w-4"}),"Suspend"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>G("activate"),disabled:p,children:[i.jsx(ri,{className:"h-4 w-4"}),"Activate"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>G("export"),disabled:p,children:[i.jsx(K,{className:"h-4 w-4"}),"Export Selected"]})]})]})})}),i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx("div",{className:"flex-1",children:(0,i.jsxs)("div",{className:"relative",children:[i.jsx(rl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(x,{placeholder:"Search users by name, email, or company...",value:t,onChange:e=>s(e.target.value),className:"pl-10"})]})}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(aj,{value:a,onValueChange:r,children:[i.jsx(a9,{className:"w-[140px]",children:i.jsx(aw,{placeholder:"Status"})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"all",children:"All Status"}),i.jsx(ra,{value:"active",children:"Active"}),i.jsx(ra,{value:"suspended",children:"Suspended"}),i.jsx(ra,{value:"pending",children:"Pending"})]})]}),(0,i.jsxs)(aj,{value:n,onValueChange:d,children:[i.jsx(a9,{className:"w-[140px]",children:i.jsx(aw,{placeholder:"Plan"})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"all",children:"All Plans"}),i.jsx(ra,{value:"basic",children:"Basic"}),i.jsx(ra,{value:"premium",children:"Premium"}),i.jsx(ra,{value:"professional",children:"Professional"})]})]}),(0,i.jsxs)(aj,{value:u,onValueChange:m,children:[i.jsx(a9,{className:"w-[140px]",children:i.jsx(aw,{placeholder:"KYC"})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"all",children:"All KYC"}),i.jsx(ra,{value:"approved",children:"Approved"}),i.jsx(ra,{value:"pending",children:"Pending"}),i.jsx(ra,{value:"rejected",children:"Rejected"})]})]})]})]})})}),i.jsx("div",{className:"hidden lg:block",children:i.jsx(o,{children:(0,i.jsxs)(en,{children:[i.jsx(ei,{children:(0,i.jsxs)(ec,{children:[i.jsx(ed,{className:"w-12",children:i.jsx("input",{type:"checkbox",checked:j.length===I.length&&I.length>0,onChange:j.length===I.length?X:()=>{g(I.map(e=>e.id))},className:"rounded"})}),i.jsx(ed,{children:"User"}),i.jsx(ed,{children:"KYC Status"}),i.jsx(ed,{children:"Plan"}),i.jsx(ed,{children:"Status"}),i.jsx(ed,{children:"Mail Count"}),i.jsx(ed,{children:"Total Spent"}),i.jsx(ed,{children:"Last Login"}),i.jsx(ed,{children:"Actions"})]})}),i.jsx(el,{children:0===I.length?i.jsx(ec,{children:i.jsx(eo,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No users found"})}):I.map(e=>(0,i.jsxs)(ec,{children:[i.jsx(eo,{children:i.jsx("input",{type:"checkbox",checked:j.includes(e.id),onChange:()=>Y(e.id),className:"rounded"})}),i.jsx(eo,{children:(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium",children:e.name}),i.jsx("div",{className:"text-sm text-muted-foreground",children:e.email}),e.companyName&&i.jsx("div",{className:"text-xs text-muted-foreground",children:e.companyName}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Joined ",e.joined]})]})}),i.jsx(eo,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(J.C,{variant:"approved"===e.kyc?"default":"pending"===e.kyc?"secondary":"destructive",children:e.kyc}),"pending"===e.kyc&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>H(e.id,"approved"),disabled:p,children:i.jsx(N,{className:"h-3 w-3"})})]})}),i.jsx(eo,{children:i.jsx(J.C,{variant:"outline",className:"capitalize",children:e.plan})}),i.jsx(eo,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(J.C,{variant:"active"===e.status?"default":"destructive",children:e.status}),"suspended"===e.status?i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>Z(e.id),disabled:p,children:i.jsx(ri,{className:"h-3 w-3"})}):i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>B(e.id),disabled:p,children:i.jsx(rn,{className:"h-3 w-3"})})]})}),i.jsx(eo,{children:e.mailCount}),i.jsx(eo,{children:e.totalSpent}),i.jsx(eo,{className:"text-sm text-muted-foreground",children:e.lastLogin}),i.jsx(eo,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>$(e.id),children:i.jsx(_,{className:"h-4 w-4"})}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>q(e.id),children:i.jsx(rc,{className:"h-4 w-4"})}),i.jsx(c.z,{size:"sm",variant:"outline",children:i.jsx(rd,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),i.jsx("div",{className:"lg:hidden space-y-4",children:I.map(e=>i.jsx(o,{children:(0,i.jsxs)(h,{className:"p-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",checked:j.includes(e.id),onChange:()=>Y(e.id),className:"rounded mt-1"}),(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"font-medium",children:e.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.email}),e.companyName&&i.jsx("p",{className:"text-xs text-muted-foreground",children:e.companyName}),(0,i.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Joined ",e.joined]})]})]}),(0,i.jsxs)("div",{className:"text-right",children:[i.jsx(J.C,{variant:"approved"===e.kyc?"default":"secondary",className:"mb-1",children:e.kyc}),i.jsx("br",{}),i.jsx(J.C,{variant:"active"===e.status?"default":"destructive",children:e.status})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Plan:"})," ",i.jsx("span",{className:"capitalize",children:e.plan})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Mail:"})," ",e.mailCount]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Spent:"})," ",e.totalSpent]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Login:"})," ",e.lastLogin]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[i.jsx(c.z,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>$(e.id),children:"View"}),i.jsx(c.z,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>q(e.id),children:"Edit"}),i.jsx(c.z,{size:"sm",variant:"outline",className:"flex-1",children:"Actions"})]})]})},e.id))})]})}let rI=(0,v.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),rV=(0,v.Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),rO=(0,v.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function rU({}){let[e,t]=(0,l.useState)("received"),[s,a]=(0,l.useState)(""),[r,n]=(0,l.useState)("all"),[d,u]=(0,l.useState)("all"),[m,p]=(0,l.useState)(!1),[f,j]=(0,l.useState)([]),{data:g,isLoading:v,refetch:y}=z("/api/admin/mail-items"),{data:w,isLoading:b}=z("/api/admin/mail-items/stats"),k=(g||[]).filter(t=>{let a=t.userName.toLowerCase().includes(s.toLowerCase())||t.sender.toLowerCase().includes(s.toLowerCase())||t.subject.toLowerCase().includes(s.toLowerCase()),n="all"===r||t.status===r,i="all"===d||t.tag===d,l="all"===e||t.status===e;return a&&n&&i&&l}),_=async()=>{try{await T("admin_add_mail_item"),window.open("/admin/mail/add","_blank")}catch(e){await T("admin_add_mail_item_error",{error_message:D(e),stack:F(e)})}},C=async e=>{try{await T("admin_view_mail_item",{itemId:e}),window.open(`/admin/mail/${e}`,"_blank")}catch(t){await T("admin_view_mail_item_error",{itemId:e,error_message:D(t),stack:F(t)})}},S=async e=>{try{await T("admin_edit_mail_item",{itemId:e}),window.open(`/admin/mail/${e}/edit`,"_blank")}catch(t){await T("admin_edit_mail_item_error",{itemId:e,error_message:D(t),stack:F(t)})}},P=async e=>{p(!0);try{await T("admin_process_mail_item",{itemId:e}),await L.post(`/api/admin/mail-items/${e}/process`),y()}catch(t){await T("admin_process_mail_item_error",{itemId:e,error_message:D(t),stack:F(t)})}finally{p(!1)}},A=async(e,t)=>{p(!0);try{await T("admin_tag_mail_item",{itemId:e,tag:t}),await L.post(`/api/admin/mail-items/${e}/tag`,{tag:t}),y()}catch(s){await T("admin_tag_mail_item_error",{itemId:e,tag:t,error_message:D(s),stack:F(s)})}finally{p(!1)}},E=async e=>{p(!0);try{await T("admin_forward_mail_item",{itemId:e}),await L.post(`/api/admin/mail-items/${e}/forward`),y()}catch(t){await T("admin_forward_mail_item_error",{itemId:e,error_message:D(t),stack:F(t)})}finally{p(!1)}},R=async e=>{p(!0);try{await T("admin_delete_mail_item",{itemId:e}),await L.delete(`/api/admin/mail-items/${e}`),y()}catch(t){await T("admin_delete_mail_item_error",{itemId:e,error_message:D(t),stack:F(t)})}finally{p(!1)}},M=async e=>{if(0!==f.length){p(!0);try{await T("admin_bulk_mail_action",{action:e,itemIds:f}),await L.post(`/api/admin/mail-items/bulk/${e}`,{itemIds:f}),j([]),y()}catch(t){await T("admin_bulk_mail_action_error",{action:e,itemIds:f,error_message:D(t),stack:F(t)})}finally{p(!1)}}},I=async()=>{p(!0);try{await T("admin_export_mail",{filters:{statusFilter:r,tagFilter:d,searchTerm:s,tab:e}});let t=await L.get(`/api/admin/mail-items/export?status=${r}&tag=${d}&search=${s}&tab=${e}`),a=new Blob([t.data],{type:"application/json"}),n=window.URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download=`mail-items-export-${new Date().toISOString().split("T")[0]}.json`,i.click()}catch(e){await T("admin_export_mail_error",{error_message:D(e),stack:F(e)})}finally{p(!1)}},V=e=>{j(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Mail Management"}),i.jsx("p",{className:"text-muted-foreground",children:"Process and manage incoming mail and packages"}),w&&(0,i.jsxs)("div",{className:"flex gap-4 mt-2 text-sm text-muted-foreground",children:[(0,i.jsxs)("span",{children:["Total: ",w?.total||0]}),(0,i.jsxs)("span",{children:["Received: ",w?.received||0]}),(0,i.jsxs)("span",{children:["Pending: ",w?.pending||0]}),(0,i.jsxs)("span",{children:["Processed: ",w?.processed||0]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:I,disabled:m,children:[i.jsx(K,{className:"h-4 w-4"}),"Export"]}),(0,i.jsxs)(c.z,{className:"gap-2",onClick:_,disabled:m,children:[i.jsx(rr,{className:"h-4 w-4"}),"Add Item"]})]})]}),f.length>0&&i.jsx(o,{children:i.jsx(h,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"text-sm font-medium",children:[f.length," items selected"]}),i.jsx(c.z,{variant:"ghost",size:"sm",onClick:()=>{j([])},children:"Clear"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>M("process"),disabled:m,children:[i.jsx(N,{className:"h-4 w-4"}),"Process"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>M("tag"),disabled:m,children:[i.jsx(rV,{className:"h-4 w-4"}),"Tag"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>M("forward"),disabled:m,children:[i.jsx($,{className:"h-4 w-4"}),"Forward"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>M("delete"),disabled:m,children:[i.jsx(rO,{className:"h-4 w-4"}),"Delete"]})]})]})})}),i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx("div",{className:"flex-1",children:(0,i.jsxs)("div",{className:"relative",children:[i.jsx(rl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(x,{placeholder:"Search mail items...",value:s,onChange:e=>a(e.target.value),className:"pl-10"})]})}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(aj,{value:r,onValueChange:n,children:[i.jsx(a9,{className:"w-[140px]",children:i.jsx(aw,{placeholder:"Status"})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"all",children:"All Status"}),i.jsx(ra,{value:"received",children:"Received"}),i.jsx(ra,{value:"pending",children:"Pending"}),i.jsx(ra,{value:"processed",children:"Processed"}),i.jsx(ra,{value:"forwarded",children:"Forwarded"})]})]}),(0,i.jsxs)(aj,{value:d,onValueChange:u,children:[i.jsx(a9,{className:"w-[140px]",children:i.jsx(aw,{placeholder:"Tag"})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"all",children:"All Tags"}),i.jsx(ra,{value:"Government",children:"Government"}),i.jsx(ra,{value:"Financial",children:"Financial"}),i.jsx(ra,{value:"Logistics",children:"Logistics"}),i.jsx(ra,{value:"Legal",children:"Legal"}),i.jsx(ra,{value:"Personal",children:"Personal"})]})]})]})]})})}),(0,i.jsxs)(rg,{value:e,onValueChange:t,children:[(0,i.jsxs)(rS,{className:"grid w-full grid-cols-4",children:[i.jsx(rP,{value:"received",children:"Received"}),i.jsx(rP,{value:"pending",children:"Pending"}),i.jsx(rP,{value:"processed",children:"Processed"}),i.jsx(rP,{value:"forwarded",children:"Forwarded"})]}),i.jsx(rL,{value:"received",className:"space-y-4",children:i.jsx(r$,{items:k.filter(e=>"received"===e.status),onView:C,onEdit:S,onProcess:P,onTag:A,onForward:E,onDelete:R,onSelect:V,selectedItems:f,loading:m})}),i.jsx(rL,{value:"pending",className:"space-y-4",children:i.jsx(r$,{items:k.filter(e=>"pending"===e.status),onView:C,onEdit:S,onProcess:P,onTag:A,onForward:E,onDelete:R,onSelect:V,selectedItems:f,loading:m})}),i.jsx(rL,{value:"processed",className:"space-y-4",children:i.jsx(r$,{items:k.filter(e=>"processed"===e.status),onView:C,onEdit:S,onProcess:P,onTag:A,onForward:E,onDelete:R,onSelect:V,selectedItems:f,loading:m})}),i.jsx(rL,{value:"forwarded",className:"space-y-4",children:i.jsx(r$,{items:k.filter(e=>"forwarded"===e.status),onView:C,onEdit:S,onProcess:P,onTag:A,onForward:E,onDelete:R,onSelect:V,selectedItems:f,loading:m})})]})]})}function r$({items:e,onView:t,onEdit:s,onProcess:a,onTag:r,onForward:n,onDelete:l,onSelect:d,selectedItems:u,loading:m}){let h=e=>{switch(e){case"received":return i.jsx(U.Z,{className:"h-4 w-4 text-blue-500"});case"pending":return i.jsx(rI,{className:"h-4 w-4 text-yellow-500"});case"processed":return i.jsx(N,{className:"h-4 w-4 text-green-500"});case"forwarded":return i.jsx($,{className:"h-4 w-4 text-purple-500"});default:return i.jsx(B,{className:"h-4 w-4 text-gray-500"})}};return i.jsx(o,{children:(0,i.jsxs)(en,{children:[i.jsx(ei,{children:(0,i.jsxs)(ec,{children:[i.jsx(ed,{className:"w-12",children:i.jsx("input",{type:"checkbox",checked:e.length>0&&e.every(e=>u.includes(e.id)),onChange:e.length>0&&e.every(e=>u.includes(e.id))?()=>{e.forEach(e=>{u.includes(e.id)&&d(e.id)})}:()=>{e.forEach(e=>{u.includes(e.id)||d(e.id)})},className:"rounded"})}),i.jsx(ed,{children:"ID"}),i.jsx(ed,{children:"User"}),i.jsx(ed,{children:"Sender"}),i.jsx(ed,{children:"Subject"}),i.jsx(ed,{children:"Tag"}),i.jsx(ed,{children:"Status"}),i.jsx(ed,{children:"Received"}),i.jsx(ed,{children:"Actions"})]})}),i.jsx(el,{children:0===e.length?i.jsx(ec,{children:i.jsx(eo,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No mail items found"})}):e.map(e=>(0,i.jsxs)(ec,{children:[i.jsx(eo,{children:i.jsx("input",{type:"checkbox",checked:u.includes(e.id),onChange:()=>d(e.id),className:"rounded"})}),(0,i.jsxs)(eo,{children:["#",e.id]}),i.jsx(eo,{children:(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium",children:e.userName}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:["ID: ",e.userId]})]})}),i.jsx(eo,{children:e.sender}),i.jsx(eo,{children:e.subject}),i.jsx(eo,{children:i.jsx(J.C,{variant:"outline",children:e.tag})}),i.jsx(eo,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[h(e.status),i.jsx(J.C,{variant:"outline",className:"capitalize",children:e.status})]})}),i.jsx(eo,{className:"text-muted-foreground",children:e.received}),i.jsx(eo,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>t(e.id),children:i.jsx(_,{className:"h-4 w-4"})}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>s(e.id),children:i.jsx(rc,{className:"h-4 w-4"})}),"received"===e.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>a(e.id),disabled:m,children:i.jsx(N,{className:"h-4 w-4"})}),"processed"===e.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>n(e.id),disabled:m,children:i.jsx($,{className:"h-4 w-4"})}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>l(e.id),disabled:m,children:i.jsx(rO,{className:"h-4 w-4"})})]})})]},e.id))})]})})}let rq=(0,v.Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),rW=(0,v.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),rH=(0,v.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);function rB({}){let[e,t]=(0,l.useState)(""),[s,a]=(0,l.useState)("all"),[r,n]=(0,l.useState)("all"),[d,u]=(0,l.useState)(!1),[m,p]=(0,l.useState)([]),{data:f,isLoading:j,refetch:g}=z("/api/admin/forwarding-requests"),{data:v,isLoading:y}=z("/api/admin/forwarding-requests/stats"),w=(f||[]).filter(t=>{let a=t.userName.toLowerCase().includes(e.toLowerCase())||t.mailSubject.toLowerCase().includes(e.toLowerCase())||t.destination.toLowerCase().includes(e.toLowerCase())||t.trackingNumber&&t.trackingNumber.toLowerCase().includes(e.toLowerCase()),n="all"===s||t.status===s,i="all"===r||t.priority===r;return a&&n&&i}),b=async()=>{u(!0);try{await T("admin_forwarding_refresh"),await g()}catch(e){await T("admin_forwarding_refresh_error",{error_message:D(e),stack:F(e)})}finally{u(!1)}},k=async e=>{try{await T("admin_view_forwarding_request",{requestId:e}),window.open(`/admin/forwarding/${e}`,"_blank")}catch(t){await T("admin_view_forwarding_request_error",{requestId:e,error_message:D(t),stack:F(t)})}},S=async e=>{try{await T("admin_edit_forwarding_request",{requestId:e}),window.open(`/admin/forwarding/${e}/edit`,"_blank")}catch(t){await T("admin_edit_forwarding_request_error",{requestId:e,error_message:D(t),stack:F(t)})}},P=async e=>{u(!0);try{await T("admin_process_forwarding_request",{requestId:e}),await L.post(`/api/admin/forwarding-requests/${e}/process`),g()}catch(t){await T("admin_process_forwarding_request_error",{requestId:e,error_message:D(t),stack:F(t)})}finally{u(!1)}},A=async e=>{u(!0);try{await T("admin_ship_forwarding_request",{requestId:e}),await L.post(`/api/admin/forwarding-requests/${e}/ship`),g()}catch(t){await T("admin_ship_forwarding_request_error",{requestId:e,error_message:D(t),stack:F(t)})}finally{u(!1)}},E=async e=>{u(!0);try{await T("admin_cancel_forwarding_request",{requestId:e}),await L.post(`/api/admin/forwarding-requests/${e}/cancel`),g()}catch(t){await T("admin_cancel_forwarding_request_error",{requestId:e,error_message:D(t),stack:F(t)})}finally{u(!1)}},R=async e=>{if(0!==m.length){u(!0);try{await T("admin_bulk_forwarding_action",{action:e,requestIds:m}),await L.post(`/api/admin/forwarding-requests/bulk/${e}`,{requestIds:m}),p([]),g()}catch(t){await T("admin_bulk_forwarding_action_error",{action:e,requestIds:m,error_message:D(t),stack:F(t)})}finally{u(!1)}}},M=async()=>{u(!0);try{await T("admin_export_forwarding_requests",{filters:{statusFilter:s,priorityFilter:r,searchTerm:e}});let t=await L.get(`/api/admin/forwarding-requests/export?status=${s}&priority=${r}&search=${encodeURIComponent(e)}`),a=new Blob([t.data],{type:"application/json"}),n=window.URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download=`forwarding-requests-export-${new Date().toISOString().split("T")[0]}.json`,i.click()}catch(e){await T("admin_export_forwarding_requests_error",{error_message:D(e),stack:F(e)})}finally{u(!1)}},I=e=>{p(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},V=()=>{p([])},O=e=>{switch(e){case"pending":return i.jsx(rI,{className:"h-4 w-4 text-yellow-500"});case"processing":return i.jsx(rq,{className:"h-4 w-4 text-blue-500"});case"shipped":return i.jsx($,{className:"h-4 w-4 text-purple-500"});case"delivered":return i.jsx(N,{className:"h-4 w-4 text-green-500"});case"cancelled":return i.jsx(rW,{className:"h-4 w-4 text-red-500"});default:return i.jsx(B,{className:"h-4 w-4 text-gray-500"})}},U=e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"express":return"bg-yellow-100 text-yellow-800";case"standard":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Forwarding Management"}),i.jsx("p",{className:"text-muted-foreground",children:"Track and manage mail forwarding requests"}),v&&(0,i.jsxs)("div",{className:"flex gap-4 mt-2 text-sm text-muted-foreground",children:[(0,i.jsxs)("span",{children:["Total: ",v?.total||0]}),(0,i.jsxs)("span",{children:["Pending: ",v?.pending||0]}),(0,i.jsxs)("span",{children:["Processing: ",v?.processing||0]}),(0,i.jsxs)("span",{children:["Shipped: ",v?.shipped||0]}),(0,i.jsxs)("span",{children:["Delivered: ",v?.delivered||0]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:M,disabled:d,children:[i.jsx(K,{className:"h-4 w-4"}),"Export"]}),(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:b,disabled:d,children:[i.jsx(C,{className:`h-4 w-4 ${d?"animate-spin":""}`}),"Refresh"]})]})]}),m.length>0&&i.jsx(o,{children:i.jsx(h,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"text-sm font-medium",children:[m.length," requests selected"]}),i.jsx(c.z,{variant:"ghost",size:"sm",onClick:V,children:"Clear"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>R("process"),disabled:d,children:[i.jsx(rH,{className:"h-4 w-4"}),"Process"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>R("ship"),disabled:d,children:[i.jsx($,{className:"h-4 w-4"}),"Ship"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>R("cancel"),disabled:d,children:[i.jsx(rW,{className:"h-4 w-4"}),"Cancel"]})]})]})})}),i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx("div",{className:"flex-1",children:(0,i.jsxs)("div",{className:"relative",children:[i.jsx(rl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(x,{placeholder:"Search forwarding requests...",value:e,onChange:e=>t(e.target.value),className:"pl-10"})]})}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(aj,{value:s,onValueChange:a,children:[i.jsx(a9,{className:"w-[140px]",children:i.jsx(aw,{placeholder:"Status"})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"all",children:"All Status"}),i.jsx(ra,{value:"pending",children:"Pending"}),i.jsx(ra,{value:"processing",children:"Processing"}),i.jsx(ra,{value:"shipped",children:"Shipped"}),i.jsx(ra,{value:"delivered",children:"Delivered"}),i.jsx(ra,{value:"cancelled",children:"Cancelled"})]})]}),(0,i.jsxs)(aj,{value:r,onValueChange:n,children:[i.jsx(a9,{className:"w-[140px]",children:i.jsx(aw,{placeholder:"Priority"})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"all",children:"All Priority"}),i.jsx(ra,{value:"standard",children:"Standard"}),i.jsx(ra,{value:"express",children:"Express"}),i.jsx(ra,{value:"urgent",children:"Urgent"})]})]})]})]})})}),i.jsx(o,{children:(0,i.jsxs)(en,{children:[i.jsx(ei,{children:(0,i.jsxs)(ec,{children:[i.jsx(ed,{className:"w-12",children:i.jsx("input",{type:"checkbox",checked:w.length>0&&w.every(e=>m.includes(e.id)),onChange:w.length>0&&w.every(e=>m.includes(e.id))?V:()=>{p(w.map(e=>e.id))},className:"rounded"})}),i.jsx(ed,{children:"ID"}),i.jsx(ed,{children:"User"}),i.jsx(ed,{children:"Mail Item"}),i.jsx(ed,{children:"Destination"}),i.jsx(ed,{children:"Priority"}),i.jsx(ed,{children:"Status"}),i.jsx(ed,{children:"Tracking"}),i.jsx(ed,{children:"Cost"}),i.jsx(ed,{children:"Created"}),i.jsx(ed,{children:"Actions"})]})}),i.jsx(el,{children:0===w.length?i.jsx(ec,{children:i.jsx(eo,{colSpan:10,className:"text-center py-8 text-muted-foreground",children:"No forwarding requests found"})}):w.map(e=>(0,i.jsxs)(ec,{children:[i.jsx(eo,{children:i.jsx("input",{type:"checkbox",checked:m.includes(e.id),onChange:()=>I(e.id),className:"rounded"})}),(0,i.jsxs)(eo,{children:["#",e.id]}),i.jsx(eo,{children:(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium",children:e.userName}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:["ID: ",e.userId]})]})}),i.jsx(eo,{children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"font-medium",children:["#",e.mailItemId]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:e.mailSubject})]})}),i.jsx(eo,{children:i.jsx("div",{className:"max-w-xs",children:i.jsx("div",{className:"text-sm font-medium",children:e.destination})})}),i.jsx(eo,{children:i.jsx(J.C,{className:U(e.priority),variant:"secondary",children:e.priority})}),i.jsx(eo,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[O(e.status),i.jsx(J.C,{variant:"outline",className:"capitalize",children:e.status})]})}),i.jsx(eo,{children:e.trackingNumber?(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:e.trackingNumber}),i.jsx("div",{className:"text-xs text-muted-foreground",children:e.carrier})]}):i.jsx("span",{className:"text-muted-foreground",children:"-"})}),i.jsx(eo,{children:e.cost}),i.jsx(eo,{className:"text-sm text-muted-foreground",children:e.createdAt}),i.jsx(eo,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>k(e.id),children:i.jsx(_,{className:"h-4 w-4"})}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>S(e.id),children:i.jsx(rc,{className:"h-4 w-4"})}),"pending"===e.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>P(e.id),disabled:d,children:i.jsx(rH,{className:"h-4 w-4"})}),"processing"===e.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>A(e.id),disabled:d,children:i.jsx($,{className:"h-4 w-4"})}),"delivered"!==e.status&&"cancelled"!==e.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>E(e.id),disabled:d,children:i.jsx(rW,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})}let rZ=(0,v.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),rG=(0,v.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),rK=(0,v.Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);function rY({}){let[e,t]=(0,l.useState)(!1),[s,a]=(0,l.useState)("30d"),{data:r,isLoading:n,refetch:d}=z("/api/admin/billing"),{data:x,isLoading:p,refetch:f}=z("/api/admin/transactions"),{data:j,isLoading:g,refetch:v}=z("/api/admin/invoices"),y=x||[],b=async()=>{t(!0);try{await T("admin_billing_refresh"),await Promise.all([d(),f(),v()])}catch(e){await T("admin_billing_refresh_error",{error_message:D(e),stack:F(e)})}finally{t(!1)}},k=async()=>{t(!0);try{await T("admin_export_billing_reports",{timeRange:s});let e=await L.get(`/api/admin/billing/export?timeRange=${s}`),t=new Blob([e.data],{type:"application/json"}),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`billing-report-${s}-${new Date().toISOString().split("T")[0]}.json`,r.click()}catch(e){await T("admin_export_billing_reports_error",{error_message:D(e),stack:F(e)})}finally{t(!1)}},_=async e=>{try{await T("admin_view_invoice",{invoiceId:e}),window.open(`/admin/invoices/${e}`,"_blank")}catch(t){await T("admin_view_invoice_error",{invoiceId:e,error_message:D(t),stack:F(t)})}},S=async e=>{t(!0);try{await T("admin_process_payment",{transactionId:e}),await L.post(`/api/admin/transactions/${e}/process`),f()}catch(t){await T("admin_process_payment_error",{transactionId:e,error_message:D(t),stack:F(t)})}finally{t(!1)}},P=async e=>{t(!0);try{await T("admin_refund_transaction",{transactionId:e}),await L.post(`/api/admin/transactions/${e}/refund`),f()}catch(t){await T("admin_refund_transaction_error",{transactionId:e,error_message:D(t),stack:F(t)})}finally{t(!1)}},A=e=>{switch(e){case"completed":return i.jsx(N,{className:"h-4 w-4 text-green-500"});case"pending":return i.jsx(rI,{className:"h-4 w-4 text-yellow-500"});case"failed":return i.jsx(w,{className:"h-4 w-4 text-red-500"});case"refunded":return i.jsx(C,{className:"h-4 w-4 text-blue-500"});default:return i.jsx(rI,{className:"h-4 w-4 text-gray-500"})}},E=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},R=e=>{switch(e){case"subscription":return"bg-purple-100 text-purple-800";case"one_time":return"bg-blue-100 text-blue-800";case"refund":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Billing & Revenue"}),i.jsx("p",{className:"text-muted-foreground",children:"Monitor payments, invoices, and revenue metrics"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(aj,{value:s,onValueChange:a,children:[i.jsx(a9,{className:"w-[120px]",children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"7d",children:"Last 7 days"}),i.jsx(ra,{value:"30d",children:"Last 30 days"}),i.jsx(ra,{value:"90d",children:"Last 90 days"}),i.jsx(ra,{value:"1y",children:"Last year"})]})]}),(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:k,disabled:e,children:[i.jsx(K,{className:"h-4 w-4"}),"Export Reports"]}),(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:b,disabled:e,children:[i.jsx(C,{className:`h-4 w-4 ${e?"animate-spin":""}`}),"Refresh"]})]})]}),r?(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"}),(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["\xa3",r?.monthlyRevenue?.toLocaleString()||"0"]}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(Q,{className:"h-3 w-3"}),"+",r?.revenueGrowth||0,"% from last month"]})]}),i.jsx(et,{className:"h-8 w-8 text-green-500"})]})})}),i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Outstanding Invoices"}),(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["\xa3",(r?.outstandingInvoices||0).toLocaleString()]}),(0,i.jsxs)("p",{className:"text-xs text-orange-600",children:[r?.pendingPayments||0," pending payments"]})]}),i.jsx(rZ,{className:"h-8 w-8 text-orange-500"})]})})}),i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Churn Rate"}),(0,i.jsxs)("p",{className:"text-2xl font-bold",children:[r?.churnRate||0,"%"]}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(es,{className:"h-3 w-3"}),r?.churnChange||0,"% from last month"]})]}),i.jsx(rG,{className:"h-8 w-8 text-red-500"})]})})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.jsx(o,{children:i.jsx(h,{className:"p-6",children:i.jsx("div",{className:"text-center text-muted-foreground",children:"No billing data available"})})})}),(0,i.jsxs)(o,{children:[i.jsx(u,{children:i.jsx(m,{children:"Recent Transactions"})}),i.jsx(h,{children:(0,i.jsxs)(en,{children:[i.jsx(ei,{children:(0,i.jsxs)(ec,{children:[i.jsx(ed,{children:"ID"}),i.jsx(ed,{children:"User"}),i.jsx(ed,{children:"Type"}),i.jsx(ed,{children:"Amount"}),i.jsx(ed,{children:"Status"}),i.jsx(ed,{children:"Description"}),i.jsx(ed,{children:"Payment Method"}),i.jsx(ed,{children:"Created"}),i.jsx(ed,{children:"Actions"})]})}),i.jsx(el,{children:0===y.length?i.jsx(ec,{children:i.jsx(eo,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No transactions found"})}):y.map(t=>(0,i.jsxs)(ec,{children:[(0,i.jsxs)(eo,{children:["#",t.id]}),i.jsx(eo,{children:(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium",children:t.userName}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:["ID: ",t.userId]})]})}),i.jsx(eo,{children:i.jsx(J.C,{className:R(t.type),variant:"secondary",children:t.type})}),i.jsx(eo,{children:(0,i.jsxs)("div",{className:"font-medium",children:[t.currency," ",t.amount.toFixed(2)]})}),i.jsx(eo,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[A(t.status),i.jsx(J.C,{className:E(t.status),variant:"secondary",children:t.status})]})}),i.jsx(eo,{children:t.description}),i.jsx(eo,{className:"text-sm text-muted-foreground",children:t.paymentMethod}),i.jsx(eo,{className:"text-sm text-muted-foreground",children:t.createdAt}),i.jsx(eo,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[t.invoiceId&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>_(t.invoiceId),children:i.jsx(rK,{className:"h-4 w-4"})}),"pending"===t.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>S(t.id),disabled:e,children:i.jsx(N,{className:"h-4 w-4"})}),"completed"===t.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>P(t.id),disabled:e,children:i.jsx(C,{className:"h-4 w-4"})})]})})]},t.id))})]})})]}),(0,i.jsxs)(o,{children:[i.jsx(u,{children:i.jsx(m,{children:"Revenue Trends"})}),i.jsx(h,{className:"h-64 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx(et,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Revenue trends chart would be displayed here"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Integration with charting library (Chart.js, Recharts, etc.)"})]})})]})]})}let rX=(0,v.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function rJ({}){let[e,t]=(0,l.useState)(!1),[s,a]=(0,l.useState)("30d"),[r,n]=(0,l.useState)("overview"),{data:d,isLoading:x,refetch:p}=z("/api/admin/analytics"),{data:f,isLoading:j}=z("/api/admin/analytics/users"),{data:g,isLoading:v}=z("/api/admin/analytics/revenue"),{data:y,isLoading:w}=z("/api/admin/analytics/mail"),N=async()=>{t(!0);try{await T("admin_analytics_refresh",{timeRange:s}),await p()}catch(e){await T("admin_analytics_refresh_error",{error_message:D(e),stack:F(e)})}finally{t(!1)}},b=async()=>{t(!0);try{await T("admin_export_analytics",{timeRange:s,metric:r});let e=await L.get(`/api/admin/analytics/export?timeRange=${s}&metric=${r}`),t=new Blob([JSON.stringify(e)],{type:"application/json"}),a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=`analytics-${r}-${s}-${new Date().toISOString().split("T")[0]}.json`,n.click()}catch(e){await T("admin_export_analytics_error",{error_message:D(e),stack:F(e)})}finally{t(!1)}},k=async e=>{t(!0);try{await T("admin_generate_report",{reportType:e,timeRange:s});let t=await L.post("/api/admin/analytics/reports",{reportType:e,timeRange:s,format:"pdf"}),a=new Blob([t],{type:"application/pdf"}),r=window.URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=`${e}-report-${s}-${new Date().toISOString().split("T")[0]}.pdf`,n.click()}catch(t){await T("admin_generate_report_error",{reportType:e,timeRange:s,error_message:D(t),stack:F(t)})}finally{t(!1)}};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Analytics Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Detailed insights and performance metrics"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(aj,{value:s,onValueChange:a,children:[i.jsx(a9,{className:"w-[120px]",children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"7d",children:"Last 7 days"}),i.jsx(ra,{value:"30d",children:"Last 30 days"}),i.jsx(ra,{value:"90d",children:"Last 90 days"}),i.jsx(ra,{value:"1y",children:"Last year"})]})]}),(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:b,disabled:e,children:[i.jsx(K,{className:"h-4 w-4"}),"Export"]}),(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:N,disabled:e,children:[i.jsx(C,{className:`h-4 w-4 ${e?"animate-spin":""}`}),"Refresh"]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Users"}),i.jsx("p",{className:"text-2xl font-bold",children:d?.userGrowth?.total?.toLocaleString()||"0"}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(rX,{className:"h-3 w-3"}),"+",d?.userGrowth.growth,"% growth"]})]}),i.jsx(O,{className:"h-8 w-8 text-blue-500"})]})})}),i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"}),(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["\xa3",d?.revenue.monthly.toLocaleString()]}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(rX,{className:"h-3 w-3"}),"+",d?.revenue.growth,"% growth"]})]}),i.jsx(et,{className:"h-8 w-8 text-green-500"})]})})}),i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Mail Processed"}),i.jsx("p",{className:"text-2xl font-bold",children:d?.mailVolume.monthly.toLocaleString()}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(rX,{className:"h-3 w-3"}),"+",d?.mailVolume.growth,"% growth"]})]}),i.jsx(U.Z,{className:"h-8 w-8 text-purple-500"})]})})}),i.jsx(o,{children:i.jsx(h,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Users"}),i.jsx("p",{className:"text-2xl font-bold",children:d?.userGrowth.activeUsers.toLocaleString()}),(0,i.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(d?.userGrowth.activeUsers/d?.userGrowth.total*100).toFixed(1),"% of total"]})]}),i.jsx(ea,{className:"h-8 w-8 text-orange-500"})]})})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsxs)(o,{children:[(0,i.jsxs)(u,{className:"flex flex-row items-center justify-between",children:[i.jsx(m,{children:"User Growth"}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>k("user-growth"),disabled:e,children:i.jsx(K,{className:"h-4 w-4"})})]}),i.jsx(h,{className:"h-64 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx(V,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"User growth chart would be displayed here"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Shows new registrations, activations, and churn over time"})]})})]}),(0,i.jsxs)(o,{children:[(0,i.jsxs)(u,{className:"flex flex-row items-center justify-between",children:[i.jsx(m,{children:"Revenue Trends"}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>k("revenue-trends"),disabled:e,children:i.jsx(K,{className:"h-4 w-4"})})]}),i.jsx(h,{className:"h-64 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx(rX,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Revenue trends chart would be displayed here"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Shows monthly recurring revenue, one-time payments, and refunds"})]})})]}),(0,i.jsxs)(o,{children:[(0,i.jsxs)(u,{className:"flex flex-row items-center justify-between",children:[i.jsx(m,{children:"Mail Volume"}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>k("mail-volume"),disabled:e,children:i.jsx(K,{className:"h-4 w-4"})})]}),i.jsx(h,{className:"h-64 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx(U.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Mail volume chart would be displayed here"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Shows incoming mail, processing times, and forwarding volumes"})]})})]}),(0,i.jsxs)(o,{children:[(0,i.jsxs)(u,{className:"flex flex-row items-center justify-between",children:[i.jsx(m,{children:"Plan Distribution"}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>k("plan-distribution"),disabled:e,children:i.jsx(K,{className:"h-4 w-4"})})]}),i.jsx(h,{className:"h-64 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx(W,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Plan distribution chart would be displayed here"}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Shows breakdown of Basic (",d?.planDistribution.basic,"%), Premium (",d?.planDistribution.premium,"%), and Professional (",d?.planDistribution.professional,"%) plans"]})]})})]})]}),(0,i.jsxs)(o,{children:[i.jsx(u,{children:i.jsx(m,{children:"Detailed Metrics"})}),i.jsx(h,{children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"User Metrics"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-muted-foreground",children:["New Users (",s,")"]}),i.jsx("span",{className:"font-medium",children:d?.userGrowth.newUsers})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Active Users"}),i.jsx("span",{className:"font-medium",children:d?.userGrowth.activeUsers})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Growth Rate"}),(0,i.jsxs)("span",{className:"font-medium text-green-600",children:["+",d?.userGrowth.growth,"%"]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Revenue Metrics"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Monthly Revenue"}),(0,i.jsxs)("span",{className:"font-medium",children:["\xa3",d?.revenue.monthly.toLocaleString()]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Yearly Revenue"}),(0,i.jsxs)("span",{className:"font-medium",children:["\xa3",d?.revenue.yearly.toLocaleString()]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Growth Rate"}),(0,i.jsxs)("span",{className:"font-medium text-green-600",children:["+",d?.revenue.growth,"%"]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Mail Metrics"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Processed"}),i.jsx("span",{className:"font-medium",children:d?.mailVolume.processed.toLocaleString()})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Monthly Volume"}),i.jsx("span",{className:"font-medium",children:d?.mailVolume.monthly.toLocaleString()})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Growth Rate"}),(0,i.jsxs)("span",{className:"font-medium text-green-600",children:["+",d?.mailVolume.growth,"%"]})]})]})]})]})})]})]})}var rQ="Switch",[r0,r1]=(0,ef.b)(rQ),[r2,r4]=r0(rQ),r5=l.forwardRef((e,t)=>{let{__scopeSwitch:s,name:a,checked:r,defaultChecked:n,required:c,disabled:d,value:o="on",onCheckedChange:u,form:m,...h}=e,[x,p]=l.useState(null),f=(0,ep.e)(t,e=>p(e)),j=l.useRef(!1),g=!x||m||!!x.closest("form"),[v,y]=(0,sg.T)({prop:r,defaultProp:n??!1,onChange:u,caller:rQ});return(0,i.jsxs)(r2,{scope:s,checked:v,disabled:d,children:[(0,i.jsx)(eg.WV.button,{type:"button",role:"switch","aria-checked":v,"aria-required":c,"data-state":r8(v),"data-disabled":d?"":void 0,disabled:d,value:o,...h,ref:f,onClick:(0,eh.Mj)(e.onClick,e=>{y(e=>!e),g&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),g&&(0,i.jsx)(r7,{control:x,bubbles:!j.current,name:a,value:o,checked:v,required:c,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});r5.displayName=rQ;var r3="SwitchThumb",r6=l.forwardRef((e,t)=>{let{__scopeSwitch:s,...a}=e,r=r4(r3,s);return(0,i.jsx)(eg.WV.span,{"data-state":r8(r.checked),"data-disabled":r.disabled?"":void 0,...a,ref:t})});r6.displayName=r3;var r7=l.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:a=!0,...r},n)=>{let c=l.useRef(null),d=(0,ep.e)(c,n),o=(0,sv.D)(s),u=(0,t7.t)(t);return l.useEffect(()=>{let e=c.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==s&&t){let r=new Event("click",{bubbles:a});t.call(e,s),e.dispatchEvent(r)}},[o,s,a]),(0,i.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...r,tabIndex:-1,ref:d,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function r8(e){return e?"checked":"unchecked"}r7.displayName="SwitchBubbleInput";let r9=l.forwardRef(({className:e,...t},s)=>i.jsx(r5,{className:(0,d.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:i.jsx(r6,{className:(0,d.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));r9.displayName=r5.displayName;let ne=(0,v.Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),nt=(0,v.Z)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),ns=(0,v.Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);function na({}){let[e,t]=(0,l.useState)(!1),[s,a]=(0,l.useState)(!1),[r,n]=(0,l.useState)({general:{siteName:"VirtualAddressHub",siteUrl:"https://virtualaddresshub.com",adminEmail:"admin@virtualaddresshub.com",timezone:"Europe/London",maintenanceMode:!1},notifications:{emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,adminAlerts:!0,userAlerts:!0},integrations:{mailProvider:"royal_mail",paymentProvider:"stripe",kycProvider:"sumsub",analyticsProvider:"google_analytics",emailProvider:"postmark"},security:{twoFactorAuth:!0,sessionTimeout:30,passwordPolicy:"strong",ipWhitelist:[],auditLogging:!0}}),{data:d,isLoading:f,refetch:j}=z("/api/admin/settings"),{data:g,isLoading:v}=z("/api/admin/system/health"),y=async()=>{t(!0);try{await T("admin_settings_refresh"),await j()}catch(e){await T("admin_settings_refresh_error",{error_message:D(e),stack:F(e)})}finally{t(!1)}},w=async e=>{a(!0);try{await T("admin_save_settings",{section:e,settings:r[e]}),await L.post(`/api/admin/settings/${e}`,r[e]),await j()}catch(t){await T("admin_save_settings_error",{section:e,error_message:D(t),stack:F(t)})}finally{a(!1)}},N=async e=>{t(!0);try{await T("admin_test_integration",{integration:e}),await L.post(`/api/admin/integrations/${e}/test`)}catch(t){await T("admin_test_integration_error",{integration:e,error_message:D(t),stack:F(t)})}finally{t(!1)}},b=async()=>{t(!0);try{await T("admin_backup_database");let e=await L.post("/api/admin/database/backup"),t=new Blob([e.data],{type:"application/sql"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`database-backup-${new Date().toISOString().split("T")[0]}.sql`,a.click()}catch(e){await T("admin_backup_database_error",{error_message:D(e),stack:F(e)})}finally{t(!1)}},k=async()=>{t(!0);try{await T("admin_clear_cache"),await L.post("/api/admin/cache/clear")}catch(e){await T("admin_clear_cache_error",{error_message:D(e),stack:F(e)})}finally{t(!1)}},_=(e,t,s)=>{n(a=>({...a,[e]:{...a[e],[t]:s}}))};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"System Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Configure system-wide settings and preferences"})]}),i.jsx("div",{className:"flex items-center gap-2",children:(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:y,disabled:e,children:[i.jsx(C,{className:`h-4 w-4 ${e?"animate-spin":""}`}),"Refresh"]})})]}),(0,i.jsxs)(rg,{defaultValue:"general",className:"space-y-4",children:[(0,i.jsxs)(rS,{children:[i.jsx(rP,{value:"general",children:"General"}),i.jsx(rP,{value:"notifications",children:"Notifications"}),i.jsx(rP,{value:"integrations",children:"Integrations"}),i.jsx(rP,{value:"security",children:"Security"}),i.jsx(rP,{value:"maintenance",children:"Maintenance"})]}),i.jsx(rL,{value:"general",className:"space-y-4",children:(0,i.jsxs)(o,{children:[i.jsx(u,{children:i.jsx(m,{children:"General Settings"})}),(0,i.jsxs)(h,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"siteName",children:"Site Name"}),i.jsx(x,{id:"siteName",value:r.general.siteName,onChange:e=>_("general","siteName",e.target.value)})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"siteUrl",children:"Site URL"}),i.jsx(x,{id:"siteUrl",value:r.general.siteUrl,onChange:e=>_("general","siteUrl",e.target.value)})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"adminEmail",children:"Admin Email"}),i.jsx(x,{id:"adminEmail",type:"email",value:r.general.adminEmail,onChange:e=>_("general","adminEmail",e.target.value)})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"timezone",children:"Timezone"}),(0,i.jsxs)(aj,{value:r.general.timezone,onValueChange:e=>_("general","timezone",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"Europe/London",children:"Europe/London"}),i.jsx(ra,{value:"America/New_York",children:"America/New_York"}),i.jsx(ra,{value:"America/Los_Angeles",children:"America/Los_Angeles"}),i.jsx(ra,{value:"Asia/Tokyo",children:"Asia/Tokyo"})]})]})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx(r9,{id:"maintenanceMode",checked:r.general.maintenanceMode,onCheckedChange:e=>_("general","maintenanceMode",e)}),i.jsx(p._,{htmlFor:"maintenanceMode",children:"Maintenance Mode"})]}),(0,i.jsxs)(c.z,{onClick:()=>w("general"),disabled:s,children:[i.jsx(rM,{className:"h-4 w-4 mr-2"}),"Save General Settings"]})]})]})}),i.jsx(rL,{value:"notifications",className:"space-y-4",children:(0,i.jsxs)(o,{children:[i.jsx(u,{children:i.jsx(m,{children:"Notification Settings"})}),(0,i.jsxs)(h,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(p._,{children:"Email Notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send email notifications to users"})]}),i.jsx(r9,{checked:r.notifications.emailNotifications,onCheckedChange:e=>_("notifications","emailNotifications",e)})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(p._,{children:"SMS Notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send SMS notifications to users"})]}),i.jsx(r9,{checked:r.notifications.smsNotifications,onCheckedChange:e=>_("notifications","smsNotifications",e)})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(p._,{children:"Push Notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send push notifications to users"})]}),i.jsx(r9,{checked:r.notifications.pushNotifications,onCheckedChange:e=>_("notifications","pushNotifications",e)})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(p._,{children:"Admin Alerts"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send alerts to admin users"})]}),i.jsx(r9,{checked:r.notifications.adminAlerts,onCheckedChange:e=>_("notifications","adminAlerts",e)})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(p._,{children:"User Alerts"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send alerts to regular users"})]}),i.jsx(r9,{checked:r.notifications.userAlerts,onCheckedChange:e=>_("notifications","userAlerts",e)})]})]}),(0,i.jsxs)(c.z,{onClick:()=>w("notifications"),disabled:s,children:[i.jsx(rM,{className:"h-4 w-4 mr-2"}),"Save Notification Settings"]})]})]})}),i.jsx(rL,{value:"integrations",className:"space-y-4",children:(0,i.jsxs)(o,{children:[i.jsx(u,{children:i.jsx(m,{children:"Third-party Integrations"})}),(0,i.jsxs)(h,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{children:"Mail Provider"}),(0,i.jsxs)(aj,{value:r.integrations.mailProvider,onValueChange:e=>_("integrations","mailProvider",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"royal_mail",children:"Royal Mail"}),i.jsx(ra,{value:"dpd",children:"DPD"}),i.jsx(ra,{value:"ups",children:"UPS"}),i.jsx(ra,{value:"fedex",children:"FedEx"})]})]}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>N("mail"),children:"Test Connection"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{children:"Payment Provider"}),(0,i.jsxs)(aj,{value:r.integrations.paymentProvider,onValueChange:e=>_("integrations","paymentProvider",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"stripe",children:"Stripe"}),i.jsx(ra,{value:"paypal",children:"PayPal"}),i.jsx(ra,{value:"gocardless",children:"GoCardless"})]})]}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>N("payment"),children:"Test Connection"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{children:"KYC Provider"}),(0,i.jsxs)(aj,{value:r.integrations.kycProvider,onValueChange:e=>_("integrations","kycProvider",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"sumsub",children:"Sumsub"}),i.jsx(ra,{value:"jumio",children:"Jumio"}),i.jsx(ra,{value:"onfido",children:"Onfido"})]})]}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>N("kyc"),children:"Test Connection"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{children:"Email Provider"}),(0,i.jsxs)(aj,{value:r.integrations.emailProvider,onValueChange:e=>_("integrations","emailProvider",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"postmark",children:"Postmark"}),i.jsx(ra,{value:"sendgrid",children:"SendGrid"}),i.jsx(ra,{value:"mailgun",children:"Mailgun"})]})]}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>N("email"),children:"Test Connection"})]})]}),(0,i.jsxs)(c.z,{onClick:()=>w("integrations"),disabled:s,children:[i.jsx(rM,{className:"h-4 w-4 mr-2"}),"Save Integration Settings"]})]})]})}),i.jsx(rL,{value:"security",className:"space-y-4",children:(0,i.jsxs)(o,{children:[i.jsx(u,{children:i.jsx(m,{children:"Security Settings"})}),(0,i.jsxs)(h,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(p._,{children:"Two-Factor Authentication"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Require 2FA for admin users"})]}),i.jsx(r9,{checked:r.security.twoFactorAuth,onCheckedChange:e=>_("security","twoFactorAuth",e)})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"sessionTimeout",children:"Session Timeout (minutes)"}),i.jsx(x,{id:"sessionTimeout",type:"number",value:r.security.sessionTimeout,onChange:e=>_("security","sessionTimeout",parseInt(e.target.value))})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{children:"Password Policy"}),(0,i.jsxs)(aj,{value:r.security.passwordPolicy,onValueChange:e=>_("security","passwordPolicy",e),children:[i.jsx(a9,{children:i.jsx(aw,{})}),(0,i.jsxs)(rs,{children:[i.jsx(ra,{value:"basic",children:"Basic"}),i.jsx(ra,{value:"strong",children:"Strong"}),i.jsx(ra,{value:"very_strong",children:"Very Strong"})]})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(p._,{children:"Audit Logging"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Log all admin actions"})]}),i.jsx(r9,{checked:r.security.auditLogging,onCheckedChange:e=>_("security","auditLogging",e)})]})]}),(0,i.jsxs)(c.z,{onClick:()=>w("security"),disabled:s,children:[i.jsx(rM,{className:"h-4 w-4 mr-2"}),"Save Security Settings"]})]})]})}),i.jsx(rL,{value:"maintenance",className:"space-y-4",children:(0,i.jsxs)(o,{children:[i.jsx(u,{children:i.jsx(m,{children:"System Maintenance"})}),(0,i.jsxs)(h,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Database Operations"}),(0,i.jsxs)(c.z,{variant:"outline",className:"w-full gap-2",onClick:b,disabled:e,children:[i.jsx(ne,{className:"h-4 w-4"}),"Backup Database"]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Cache Operations"}),(0,i.jsxs)(c.z,{variant:"outline",className:"w-full gap-2",onClick:k,disabled:e,children:[i.jsx(C,{className:"h-4 w-4"}),"Clear Cache"]})]})]}),g&&(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"System Health"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(nt,{className:"h-4 w-4 text-green-500"}),(0,i.jsxs)("span",{className:"text-sm",children:["Database: ",g.database?"Healthy":"Unhealthy"]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(ns,{className:"h-4 w-4 text-green-500"}),(0,i.jsxs)("span",{className:"text-sm",children:["API Keys: ",g.apiKeys?"Valid":"Invalid"]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(O,{className:"h-4 w-4 text-green-500"}),(0,i.jsxs)("span",{className:"text-sm",children:["Users: ",g.users]})]})]})]})]})]})})]})]})}function nr({onLogout:e,onNavigate:t,onGoBack:s}){let[a,r]=(0,l.useState)("overview"),[n,d]=(0,l.useState)(!1),[o,u]=(0,l.useState)(!1),[m,h]=(0,l.useState)(null),x=[{id:"overview",label:"Overview",icon:i.jsx(V,{className:"h-4 w-4"})},{id:"users",label:"Users",icon:i.jsx(O,{className:"h-4 w-4"})},{id:"mail",label:"Mail",icon:i.jsx(U.Z,{className:"h-4 w-4"})},{id:"forwarding",label:"Forwarding",icon:i.jsx($,{className:"h-4 w-4"})},{id:"billing",label:"Billing",icon:i.jsx(q,{className:"h-4 w-4"})},{id:"analytics",label:"Analytics",icon:i.jsx(W,{className:"h-4 w-4"})},{id:"settings",label:"Settings",icon:i.jsx(H,{className:"h-4 w-4"})}],p=async()=>{u(!0),h(null);try{await T("admin_dashboard_refresh"),window.location.reload()}catch(e){h("Failed to refresh dashboard"),await T("admin_dashboard_refresh_error",{error:e instanceof Error?e.message:String(e)})}finally{u(!1)}},f=async()=>{u(!0);try{await T("admin_export_data",{section:a});let e=await L.get(`/api/admin/export/${a}`),t=new Blob([e.data],{type:"application/json"}),s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`${a}-export-${new Date().toISOString().split("T")[0]}.json`,r.click()}catch(e){h("Failed to export data"),await T("admin_export_error",{error:e instanceof Error?e.message:String(e)})}finally{u(!1)}};return(0,i.jsxs)("div",{className:"min-h-screen bg-background",children:[m&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 m-4 rounded-md",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(B,{className:"h-4 w-4"}),i.jsx("span",{children:m}),i.jsx(c.z,{variant:"ghost",size:"sm",onClick:()=>h(null),children:i.jsx(Z,{className:"h-4 w-4"})})]})}),(0,i.jsxs)("header",{className:"bg-card border-b border-border",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between h-14 px-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(X,{size:"sm",showText:!1}),(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"font-semibold text-sm text-primary",children:"Admin Portal"}),i.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"VirtualAddressHub"})]})]}),i.jsx("nav",{className:"hidden lg:flex items-center gap-1",children:x.map(e=>(0,i.jsxs)(c.z,{variant:a===e.id?"default":"ghost",size:"sm",onClick:()=>r(e.id),className:"gap-1.5 h-8 px-3",children:[e.icon,i.jsx("span",{className:"text-sm",children:e.label})]},e.id))}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[i.jsx(c.z,{variant:"ghost",size:"sm",className:"lg:hidden h-8 w-8 p-0",onClick:()=>d(!n),children:n?i.jsx(Z,{className:"h-4 w-4"}):i.jsx(G,{className:"h-4 w-4"})}),(0,i.jsxs)("div",{className:"hidden lg:flex items-center gap-1",children:[i.jsx(c.z,{variant:"ghost",size:"sm",className:"h-8 px-2",onClick:p,disabled:o,children:i.jsx(C,{className:`h-4 w-4 ${o?"animate-spin":""}`})}),i.jsx(c.z,{variant:"ghost",size:"sm",className:"h-8 px-2",onClick:f,disabled:o,children:i.jsx(K,{className:"h-4 w-4"})})]}),(0,i.jsxs)(c.z,{variant:"ghost",size:"sm",onClick:e,className:"h-8 px-2 text-destructive hover:text-destructive hover:bg-destructive/10",children:[i.jsx(Y,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline ml-1",children:"Sign out"})]})]})]}),n&&i.jsx("div",{className:"lg:hidden border-t border-border p-3",children:i.jsx("div",{className:"grid grid-cols-2 gap-2",children:x.map(e=>(0,i.jsxs)(c.z,{variant:a===e.id?"default":"outline",size:"sm",onClick:()=>{r(e.id),d(!1)},className:"justify-start gap-2 h-8 text-xs",children:[e.icon,i.jsx("span",{className:"truncate",children:e.label})]},e.id))})})]}),i.jsx("main",{className:"p-4 lg:p-6",children:(()=>{switch(a){case"overview":default:return i.jsx(er,{});case"users":return i.jsx(rF,{onNavigate:t});case"mail":return i.jsx(rU,{});case"forwarding":return i.jsx(rB,{});case"billing":return i.jsx(rY,{});case"analytics":return i.jsx(rJ,{});case"settings":return i.jsx(na,{})}})()})]})}let nn=(0,l.createContext)(void 0);function ni({children:e}){let[t,s]=(0,l.useState)(null),[a,r]=(0,l.useState)(!0),n=t?.is_admin||!1,c=async e=>{r(!0);try{await R("user_login_attempt",{email:e.email});let t=await L.post("/api/auth/login",e);if(t.ok)E.setToken(t.token),E.setUser(t.user),s(t.user),await R("user_login_success",{email:e.email,userId:t.user.id});else throw Error("Login failed")}catch(t){throw await R("user_login_failed",{email:e.email,error_message:D(t),stack:F(t)}),t}finally{r(!1)}},d=async e=>{r(!0);try{await R("admin_login_attempt",{email:e.email});let t=await L.post("/api/auth/login",{...e,isAdmin:!0});if(t.ok&&t.user?.is_admin)E.setToken(t.token),E.setUser(t.user),s(t.user),await R("admin_login_success",{email:e.email,adminId:t.user.id}),await T("admin_login",{email:e.email,adminId:t.user.id});else throw Error("Admin access required")}catch(t){throw await R("admin_login_failed",{email:e.email,error_message:D(t),stack:F(t)}),t}finally{r(!1)}},o=async()=>{r(!0);try{t?.is_admin?await T("admin_logout",{adminId:t.id}):await R("user_logout",{userId:t?.id}),await L.post("/api/auth/logout")}catch(e){console.error("Logout API call failed:",e)}finally{E.clearAuth(),s(null),r(!1)}},u=async()=>{try{let e=await E.checkAuth();s(e)}catch(e){console.error("Failed to refresh user data:",e),E.clearAuth(),s(null)}};return i.jsx(nn.Provider,{value:{user:t,isAuthenticated:!!t,isAdmin:n,isLoading:a,login:c,adminLogin:d,logout:o,createDemoSession:e=>{let t="admin"===e?{id:"demo-admin",email:"admin@virtualaddresshub.co.uk",name:"Demo Admin",is_admin:!0,role:"super_admin",kyc_status:"approved",plan:"professional"}:{id:"demo-user",email:"demo@virtualaddresshub.co.uk",name:"Demo User",is_admin:!1,role:"user",kyc_status:"approved",plan:"premium"};E.setUser(t),E.setToken(`demo-${e}-token`),s(t),R(`${e}_demo_session_created`,{email:t.email,userId:t.id})},refreshUser:u},children:e})}function nl(){let{isAuthenticated:e,isAdmin:t,logout:s}=function(){let e=(0,l.useContext)(nn);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}(),[a,r]=(0,l.useState)(!1),n=async()=>{await s(),r(!1)},c=()=>{window.location.href="/"};return a?i.jsx(nr,{onLogout:n,onNavigate:(e,t)=>{console.log("Navigate to:",e,t)},onGoBack:c}):i.jsx(I,{onLogin:()=>{r(!0)},onGoBack:c})}function nc(){return i.jsx(ni,{children:i.jsx(nl,{})})}},567:(e,t,s)=>{"use strict";s.d(t,{C:()=>l});var a=s(326);s(7577);var r=s(9360),n=s(7863);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...s}){return a.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...s})}},772:(e,t,s)=>{"use strict";s.d(t,{z:()=>d});var a=s(326),r=s(7577),n=s(4214),i=s(9360),l=s(7863);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,...i},d)=>{let o=r?n.g7:"button";return a.jsx(o,{className:(0,l.cn)(c({variant:t,size:s,className:e})),ref:d,...i})});d.displayName="Button"},3198:(e,t,s)=>{"use strict";s.d(t,{_:()=>d});var a=s(326),r=s(7577),n=s(4478),i=s(9360),l=s(7863);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...t},s)=>a.jsx(n.f,{ref:s,className:(0,l.cn)(c(),e),...t}));d.displayName=n.f.displayName},7863:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(1135),r=s(1009);function n(...e){return(0,r.m6)((0,a.W)(e))}},8358:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/libanadan/Desktop/final_frontend/app/admin/login/page.tsx#default`)},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>i});var a=s(9510),r=s(5384),n=s.n(r);s(7272);let i={title:"VirtualAddressHub - Professional Virtual Address Service",description:"Get a professional virtual address for your business with mail forwarding, package handling, and premium business services."};function l({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:n().className,children:e})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,892,943],()=>s(1368));module.exports=a})();