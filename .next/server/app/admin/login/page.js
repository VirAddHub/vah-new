(()=>{var e={};e.id=920,e.ids=[920],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1368:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>h,tree:()=>d}),s(8358),s(4213),s(5866);var a=s(3191),r=s(8716),n=s(7922),i=s.n(n),l=s(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["admin",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8358)),"/Users/libanadan/Desktop/final_frontend/app/admin/login/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4213)),"/Users/libanadan/Desktop/final_frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/libanadan/Desktop/final_frontend/app/admin/login/page.tsx"],u="/admin/login/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/login/page",pathname:"/admin/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9146:(e,t,s)=>{Promise.resolve().then(s.bind(s,3332))},3332:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>nn});var a,r,n,i=s(326),l=s(7577),c=s(772),d=s(3071),o=s(7863);let u=l.forwardRef(({className:e,type:t,...s},a)=>i.jsx("input",{type:t,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));u.displayName="Input";var m=s(1048);let h=(0,s(9360).j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),x=l.forwardRef(({className:e,variant:t,...s},a)=>i.jsx("div",{ref:a,role:"alert",className:(0,o.cn)(h({variant:t}),e),...s}));x.displayName="Alert",l.forwardRef(({className:e,...t},s)=>i.jsx("h5",{ref:s,className:(0,o.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let p=l.forwardRef(({className:e,...t},s)=>i.jsx("div",{ref:s,className:(0,o.cn)("text-sm [&_p]:leading-relaxed",e),...t}));p.displayName="AlertDescription";var f=s(6557);let j=(0,f.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),g=(0,f.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),v=(0,f.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),y=(0,f.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),w=(0,f.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),N=(0,f.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),b=(0,f.Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),k=(0,f.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);class _{constructor(e="/api"){this.token=null,this.baseUrl=e,this.token=null}setToken(e){this.token=e}clearToken(){this.token=null}getHeaders(){let e={"Content-Type":"application/json"};return this.token&&(e.Authorization=`Bearer ${this.token}`),e}async get(e,t={}){let s=await fetch(`${this.baseUrl}${e}`,{method:"GET",headers:this.getHeaders(),...t});if(!s.ok)throw Error(`HTTP error! status: ${s.status}`);return s.json()}async post(e,t,s={}){let a=await fetch(`${this.baseUrl}${e}`,{method:"POST",headers:this.getHeaders(),body:t?JSON.stringify(t):void 0,...s});if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);return a.json()}async put(e,t,s={}){let a=await fetch(`${this.baseUrl}${e}`,{method:"PUT",headers:this.getHeaders(),body:t?JSON.stringify(t):void 0,...s});if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);return a.json()}async delete(e,t={}){let s=await fetch(`${this.baseUrl}${e}`,{method:"DELETE",headers:this.getHeaders(),...t});if(!s.ok)throw Error(`HTTP error! status: ${s.status}`);return s.json()}}let C=new _;class S{constructor(){this.token=null,this.user=null}isAuthenticated(){return!!this.token}isAdmin(){return this.user?.is_admin||!1}getUser(){return this.user}setUser(e){this.user=e}setToken(e){this.token=e}clearAuth(){this.token=null,this.user=null}async checkAuth(){try{let e=await C.get("/api/auth/whoami");return this.setUser(e.user),e.user}catch(e){throw this.clearAuth(),e}}}let L=new S;async function A(e,t){try{await C.post("/api/audit/admin-action",{action:e,data:t,timestamp:new Date().toISOString(),adminId:L.getUser()?.id})}catch(e){console.error("Failed to log admin action:",e)}}async function E(e,t){try{await C.post("/api/audit/auth-event",{event:e,data:t,timestamp:new Date().toISOString(),userId:L.getUser()?.id})}catch(e){console.error("Failed to log auth event:",e)}}function P(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function T(e){let[t,s]=(0,l.useState)(null),[a,r]=(0,l.useState)(!0),[n,i]=(0,l.useState)(null),c=async()=>{try{r(!0),i(null);let t=await C.get(e);s(t)}catch(e){i(e)}finally{r(!1)}};return(0,l.useEffect)(()=>{c()},[e]),{data:t,isLoading:a,error:n,refetch:()=>{c()}}}function R(e){if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch{return String(e)}}function M(e){return e instanceof Error?e.stack:void 0}function z({onLogin:e,onGoBack:t}){let[s,a]=(0,l.useState)(""),[r,n]=(0,l.useState)(""),[o,h]=(0,l.useState)(!1),[f,_]=(0,l.useState)(!1),[S,P]=(0,l.useState)(""),[T,z]=(0,l.useState)(""),[D,F]=(0,l.useState)(!1),[I,O]=(0,l.useState)(""),[V,Z]=(0,l.useState)(!1),[U,$]=(0,l.useState)(0),[q,W]=(0,l.useState)(!1),[H,B]=(0,l.useState)(0),Y=async t=>{if(t.preventDefault(),P(""),z(""),!s||!r){P("Please enter both email and password");return}if(q){P(`Account temporarily locked. Please wait ${H} seconds before trying again.`);return}_(!0);try{await E("admin_login_attempt",{email:s});let t=await C.post("/api/auth/login",{email:s,password:r,isAdmin:!0});if(t.ok&&t.user?.is_admin)L.setToken(t.token),L.setUser(t.user),await E("admin_login_success",{email:s,adminId:t.user.id}),await A("admin_login",{email:s,adminId:t.user.id,loginTime:new Date().toISOString()}),localStorage.removeItem("admin_lockout"),$(0),z("Login successful! Redirecting..."),setTimeout(()=>{e()},1e3);else throw Error("Admin access required")}catch(t){let e=U+1;if($(e),await E("admin_login_failed",{email:s,error_message:R(t),stack:M(t),attempts:e}),e>=5)W(!0),B(900),localStorage.setItem("admin_lockout",JSON.stringify({attempts:e,timestamp:Date.now()})),P("Too many failed attempts. Account locked for 15 minutes.");else{let s=R(t)||"Invalid admin credentials";P(`${s} (${5-e} attempts remaining)`)}}finally{_(!1)}},G=async e=>{if(e.preventDefault(),P(""),z(""),!I){P("Please enter your admin email address");return}Z(!0);try{await E("admin_password_reset_request",{email:I}),await C.post("/api/admin/password-reset",{email:I}),await A("admin_password_reset_request",{email:I}),z("Password reset link sent to your email"),F(!1),O("")}catch(e){await E("admin_password_reset_failed",{email:I,error_message:R(e),stack:M(e)}),P(R(e)||"Failed to send password reset link")}finally{Z(!1)}},K=async()=>{_(!0),P("");try{await E("admin_demo_login");let t={id:"demo-admin",email:"admin@virtualaddresshub.co.uk",name:"Demo Admin",is_admin:!0,role:"super_admin"};L.setUser(t),L.setToken("demo-admin-token"),await A("admin_demo_login",{demoUser:t.email,loginTime:new Date().toISOString()}),z("Demo admin session created! Redirecting..."),setTimeout(()=>{e()},1e3)}catch(e){P("Failed to create demo session")}finally{_(!1)}};return i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-6",children:[i.jsx(j,{className:"h-8 w-8 text-primary"}),i.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Portal"})]}),i.jsx("h2",{className:"text-xl font-medium mb-2",children:"Administrator Access"}),i.jsx("p",{className:"text-muted-foreground",children:"Sign in to access the admin dashboard"})]}),(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:(0,i.jsxs)(d.ll,{className:"flex items-center gap-2",children:[i.jsx(j,{className:"h-5 w-5"}),"Admin Sign In"]})}),(0,i.jsxs)(d.aY,{children:[S&&(0,i.jsxs)(x,{className:"mb-4",variant:"destructive",children:[i.jsx(g,{className:"h-4 w-4"}),i.jsx(p,{children:S})]}),T&&(0,i.jsxs)(x,{className:"mb-4",children:[i.jsx(v,{className:"h-4 w-4"}),i.jsx(p,{children:T})]}),q&&(0,i.jsxs)(x,{className:"mb-4",variant:"destructive",children:[i.jsx(y,{className:"h-4 w-4"}),(0,i.jsxs)(p,{children:["Account locked due to too many failed attempts. Please wait ",`${Math.floor(H/60)}:${(H%60).toString().padStart(2,"0")}`," before trying again."]})]}),D?(0,i.jsxs)("form",{onSubmit:G,className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"resetEmail",children:"Admin Email"}),i.jsx(u,{id:"resetEmail",type:"email",value:I,onChange:e=>O(e.target.value),placeholder:"admin@virtualaddresshub.co.uk",required:!0})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[i.jsx(c.z,{type:"submit",className:"flex-1",disabled:V,children:V?(0,i.jsxs)(i.Fragment,{children:[i.jsx(b,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):"Send Reset Link"}),i.jsx(c.z,{type:"button",variant:"outline",onClick:()=>F(!1),children:"Cancel"})]})]}):(0,i.jsxs)("form",{onSubmit:Y,className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"email",children:"Admin Email"}),i.jsx(u,{id:"email",type:"email",value:s,onChange:e=>a(e.target.value),placeholder:"admin@virtualaddresshub.co.uk",disabled:q,required:!0})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"password",children:"Password"}),(0,i.jsxs)("div",{className:"relative",children:[i.jsx(u,{id:"password",type:o?"text":"password",value:r,onChange:e=>n(e.target.value),className:"pr-10",disabled:q,required:!0}),i.jsx("button",{type:"button",onClick:()=>h(!o),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",disabled:q,children:o?i.jsx(w,{className:"h-4 w-4"}):i.jsx(N,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsx(c.z,{type:"button",variant:"link",size:"sm",onClick:()=>F(!0),disabled:q,children:"Forgot password?"})}),i.jsx(c.z,{type:"submit",className:"w-full",disabled:f||q,children:f?(0,i.jsxs)(i.Fragment,{children:[i.jsx(b,{className:"h-4 w-4 mr-2 animate-spin"}),"Signing in..."]}):"Access Admin Panel"})]})]})]}),i.jsx("div",{className:"mt-6 text-center",children:(0,i.jsxs)(c.z,{variant:"outline",size:"sm",onClick:t||(()=>window.history.back()),children:[i.jsx(k,{className:"h-4 w-4 mr-2"}),"Back to website"]})}),(0,i.jsxs)("div",{className:"mt-6 p-4 bg-card rounded-lg border",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-sm font-medium mb-2",children:"Demo Access"}),i.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Use demo credentials for testing purposes"}),i.jsx(c.z,{variant:"outline",size:"sm",onClick:K,disabled:f,className:"w-full",children:f?(0,i.jsxs)(i.Fragment,{children:[i.jsx(b,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating Demo Session..."]}):"Login as Demo Admin"})]}),(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Demo admin credentials:"}),i.jsx("p",{className:"text-xs font-mono",children:"Email: admin@virtualaddresshub.co.uk"}),i.jsx("p",{className:"text-xs font-mono",children:"Password: admin123"})]})]}),i.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-start gap-2",children:[i.jsx(g,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),(0,i.jsxs)("div",{className:"text-xs text-yellow-800",children:[i.jsx("p",{className:"font-medium",children:"Security Notice"}),i.jsx("p",{children:"Admin access is logged and monitored. Unauthorized access attempts will be reported."})]})]})})]})})}let D=(0,f.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),F=(0,f.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var I=s(5932);let O=(0,f.Z)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),V=(0,f.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Z=(0,f.Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),U=(0,f.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),$=(0,f.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var q=s(4019),W=s(748);let H=(0,f.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),B=(0,f.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var Y=s(471),G=s(567);let K=(0,f.Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),X=(0,f.Z)("Users2",[["path",{d:"M14 19a6 6 0 0 0-12 0",key:"vej9p1"}],["circle",{cx:"8",cy:"9",r:"4",key:"143rtg"}],["path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8",key:"hqbn22"}]]),J=(0,f.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Q=(0,f.Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),ee=(0,f.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);function et(){let[e,t]=(0,l.useState)(!1),[s,a]=(0,l.useState)(new Date),{data:r,isLoading:n,refetch:o}=T("/api/admin/stats"),{data:u,isLoading:m,refetch:h}=T("/api/admin/health"),{data:x,isLoading:p,refetch:f}=T("/api/admin/activity"),{data:j,isLoading:g,refetch:y}=T("/api/admin/pending"),w=async()=>{t(!0);try{await A("admin_overview_refresh"),await Promise.all([o(),h(),f(),y()]),a(new Date)}catch(e){await A("admin_overview_refresh_error",{error_message:R(e),stack:M(e)})}finally{t(!1)}},N=async()=>{try{await A("admin_view_all_activity"),window.open("/admin/activity","_blank")}catch(e){await A("admin_view_activity_error",{error_message:R(e),stack:M(e)})}},k=u||[],_=x||[];return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Admin Overview"}),i.jsx("p",{className:"text-muted-foreground",children:"Real-time system status and key performance metrics"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(G.C,{variant:"outline",className:"gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"System Operational"]}),(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:w,disabled:e,children:[i.jsx(b,{className:`h-4 w-4 ${e?"animate-spin":""}`}),"Refresh"]})]})]}),r?(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Users"}),i.jsx("p",{className:"text-2xl font-bold",children:r.totalUsers||0}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(K,{className:"h-3 w-3"}),"+",r.userGrowth||0,"%"]})]}),i.jsx(X,{className:"h-8 w-8 text-blue-500"})]})})}),i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"}),(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["\xa3",r.monthlyRevenue?.toLocaleString()||"0"]}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(K,{className:"h-3 w-3"}),"+",r.revenueGrowth||0,"%"]})]}),i.jsx(J,{className:"h-8 w-8 text-green-500"})]})})}),i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Mail Processed"}),i.jsx("p",{className:"text-2xl font-bold",children:r.mailProcessed?.toLocaleString()||"0"}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(K,{className:"h-3 w-3"}),"+",r.mailGrowth||0,"%"]})]}),i.jsx(I.Z,{className:"h-8 w-8 text-purple-500"})]})})}),i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Forwards"}),i.jsx("p",{className:"text-2xl font-bold",children:r.activeForwards||0}),(0,i.jsxs)("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[i.jsx(Q,{className:"h-3 w-3"}),r.forwardGrowth||0,"%"]})]}),i.jsx(O,{className:"h-8 w-8 text-orange-500"})]})})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:i.jsx("div",{className:"text-center text-muted-foreground",children:"No stats data available"})})})}),(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:i.jsx(d.ll,{className:"text-lg",children:"System Health"})}),i.jsx(d.aY,{children:0===k.length?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No system health data available"}):i.jsx("div",{className:"space-y-4",children:k.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"operational"===e.status?"text-green-500":"text-yellow-500",children:"operational"===e.status?i.jsx(v,{className:"h-4 w-4"}):i.jsx($,{className:"h-4 w-4"})}),i.jsx("span",{className:"text-sm",children:e.label})]}),(0,i.jsxs)("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-muted-foreground",children:"Uptime"}),i.jsx("div",{className:"text-sm font-medium",children:e.uptime})]})]},t))})})]}),(0,i.jsxs)(d.Zb,{children:[(0,i.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[i.jsx(d.ll,{className:"text-lg",children:"Recent Activity"}),i.jsx(c.z,{variant:"outline",size:"sm",onClick:N,children:"View All"})]}),i.jsx(d.aY,{children:0===_.length?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No recent activity"}):i.jsx("div",{className:"space-y-4",children:_.slice(0,5).map((e,t)=>(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 bg-muted rounded-lg",children:i.jsx(ee,{className:"h-4 w-4"})}),(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium",children:e.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:e.description}),i.jsx("p",{className:"text-xs text-muted-foreground",children:e.time})]})]},t))})})]})]})}let es=l.forwardRef(({className:e,...t},s)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:s,className:(0,o.cn)("w-full caption-bottom text-sm",e),...t})}));es.displayName="Table";let ea=l.forwardRef(({className:e,...t},s)=>i.jsx("thead",{ref:s,className:(0,o.cn)("[&_tr]:border-b",e),...t}));ea.displayName="TableHeader";let er=l.forwardRef(({className:e,...t},s)=>i.jsx("tbody",{ref:s,className:(0,o.cn)("[&_tr:last-child]:border-0",e),...t}));er.displayName="TableBody",l.forwardRef(({className:e,...t},s)=>i.jsx("tfoot",{ref:s,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let en=l.forwardRef(({className:e,...t},s)=>i.jsx("tr",{ref:s,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));en.displayName="TableRow";let ei=l.forwardRef(({className:e,...t},s)=>i.jsx("th",{ref:s,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ei.displayName="TableHead";let el=l.forwardRef(({className:e,...t},s)=>i.jsx("td",{ref:s,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));el.displayName="TableCell",l.forwardRef(({className:e,...t},s)=>i.jsx("caption",{ref:s,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";var ec=s(962);function ed(e,[t,s]){return Math.min(s,Math.max(t,e))}var eo=s(2561),eu=s(545),em=s(8051),eh=s(3095),ex=s(7124),ep=s(5226),ef=s(5049),ej="dismissableLayer.update",eg=l.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ev=l.forwardRef((e,t)=>{let{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:a,onPointerDownOutside:n,onFocusOutside:c,onInteractOutside:d,onDismiss:o,...u}=e,m=l.useContext(eg),[h,x]=l.useState(null),p=h?.ownerDocument??globalThis?.document,[,f]=l.useState({}),j=(0,em.e)(t,e=>x(e)),g=Array.from(m.layers),[v]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(v),w=h?g.indexOf(h):-1,N=m.layersWithOutsidePointerEventsDisabled.size>0,b=w>=y,k=function(e,t=globalThis?.document){let s=(0,ef.W)(e),a=l.useRef(!1),r=l.useRef(()=>{});return l.useEffect(()=>{let e=e=>{if(e.target&&!a.current){let a=function(){ew("dismissableLayer.pointerDownOutside",s,n,{discrete:!0})},n={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",r.current),r.current=a,t.addEventListener("click",r.current,{once:!0})):a()}else t.removeEventListener("click",r.current);a.current=!1},n=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(n),t.removeEventListener("pointerdown",e),t.removeEventListener("click",r.current)}},[t,s]),{onPointerDownCapture:()=>a.current=!0}}(e=>{let t=e.target,s=[...m.branches].some(e=>e.contains(t));!b||s||(n?.(e),d?.(e),e.defaultPrevented||o?.())},p),_=function(e,t=globalThis?.document){let s=(0,ef.W)(e),a=l.useRef(!1);return l.useEffect(()=>{let e=e=>{e.target&&!a.current&&ew("dismissableLayer.focusOutside",s,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,s]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}(e=>{let t=e.target;[...m.branches].some(e=>e.contains(t))||(c?.(e),d?.(e),e.defaultPrevented||o?.())},p);return function(e,t=globalThis?.document){let s=(0,ef.W)(e);l.useEffect(()=>{let e=e=>{"Escape"===e.key&&s(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[s,t])}(e=>{w!==m.layers.size-1||(a?.(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},p),l.useEffect(()=>{if(h)return s&&(0===m.layersWithOutsidePointerEventsDisabled.size&&(r=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(h)),m.layers.add(h),ey(),()=>{s&&1===m.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=r)}},[h,p,s,m]),l.useEffect(()=>()=>{h&&(m.layers.delete(h),m.layersWithOutsidePointerEventsDisabled.delete(h),ey())},[h,m]),l.useEffect(()=>{let e=()=>f({});return document.addEventListener(ej,e),()=>document.removeEventListener(ej,e)},[]),(0,i.jsx)(ep.WV.div,{...u,ref:j,style:{pointerEvents:N?b?"auto":"none":void 0,...e.style},onFocusCapture:(0,eo.Mj)(e.onFocusCapture,_.onFocusCapture),onBlurCapture:(0,eo.Mj)(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:(0,eo.Mj)(e.onPointerDownCapture,k.onPointerDownCapture)})});function ey(){let e=new CustomEvent(ej);document.dispatchEvent(e)}function ew(e,t,s,{discrete:a}){let r=s.originalEvent.target,n=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&r.addEventListener(e,t,{once:!0}),a?(0,ep.jH)(r,n):r.dispatchEvent(n)}ev.displayName="DismissableLayer",l.forwardRef((e,t)=>{let s=l.useContext(eg),a=l.useRef(null),r=(0,em.e)(t,a);return l.useEffect(()=>{let e=a.current;if(e)return s.branches.add(e),()=>{s.branches.delete(e)}},[s.branches]),(0,i.jsx)(ep.WV.div,{...e,ref:r})}).displayName="DismissableLayerBranch";var eN=0;function eb(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ek="focusScope.autoFocusOnMount",e_="focusScope.autoFocusOnUnmount",eC={bubbles:!1,cancelable:!0},eS=l.forwardRef((e,t)=>{let{loop:s=!1,trapped:a=!1,onMountAutoFocus:r,onUnmountAutoFocus:n,...c}=e,[d,o]=l.useState(null),u=(0,ef.W)(r),m=(0,ef.W)(n),h=l.useRef(null),x=(0,em.e)(t,e=>o(e)),p=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(a){let e=function(e){if(p.paused||!d)return;let t=e.target;d.contains(t)?h.current=t:eE(h.current,{select:!0})},t=function(e){if(p.paused||!d)return;let t=e.relatedTarget;null===t||d.contains(t)||eE(h.current,{select:!0})};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let s=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&eE(d)});return d&&s.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),s.disconnect()}}},[a,d,p.paused]),l.useEffect(()=>{if(d){eP.add(p);let e=document.activeElement;if(!d.contains(e)){let t=new CustomEvent(ek,eC);d.addEventListener(ek,u),d.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let s=document.activeElement;for(let a of e)if(eE(a,{select:t}),document.activeElement!==s)return}(eL(d).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&eE(d))}return()=>{d.removeEventListener(ek,u),setTimeout(()=>{let t=new CustomEvent(e_,eC);d.addEventListener(e_,m),d.dispatchEvent(t),t.defaultPrevented||eE(e??document.body,{select:!0}),d.removeEventListener(e_,m),eP.remove(p)},0)}}},[d,u,m,p]);let f=l.useCallback(e=>{if(!s&&!a||p.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){let t=e.currentTarget,[a,n]=function(e){let t=eL(e);return[eA(t,e),eA(t.reverse(),e)]}(t);a&&n?e.shiftKey||r!==n?e.shiftKey&&r===a&&(e.preventDefault(),s&&eE(n,{select:!0})):(e.preventDefault(),s&&eE(a,{select:!0})):r===t&&e.preventDefault()}},[s,a,p.paused]);return(0,i.jsx)(ep.WV.div,{tabIndex:-1,...c,ref:x,onKeyDown:f})});function eL(e){let t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function eA(e,t){for(let s of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(s,{upTo:t}))return s}function eE(e,{select:t=!1}={}){if(e&&e.focus){var s;let a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&(s=e)instanceof HTMLInputElement&&"select"in s&&t&&e.select()}}eS.displayName="FocusScope";var eP=function(){let e=[];return{add(t){let s=e[0];t!==s&&s?.pause(),(e=eT(e,t)).unshift(t)},remove(t){e=eT(e,t),e[0]?.resume()}}}();function eT(e,t){let s=[...e],a=s.indexOf(t);return -1!==a&&s.splice(a,1),s}var eR=s(8957);let eM=["top","right","bottom","left"],ez=Math.min,eD=Math.max,eF=Math.round,eI=Math.floor,eO=e=>({x:e,y:e}),eV={left:"right",right:"left",bottom:"top",top:"bottom"},eZ={start:"end",end:"start"};function eU(e,t){return"function"==typeof e?e(t):e}function e$(e){return e.split("-")[0]}function eq(e){return e.split("-")[1]}function eW(e){return"x"===e?"y":"x"}function eH(e){return"y"===e?"height":"width"}let eB=new Set(["top","bottom"]);function eY(e){return eB.has(e$(e))?"y":"x"}function eG(e){return e.replace(/start|end/g,e=>eZ[e])}let eK=["left","right"],eX=["right","left"],eJ=["top","bottom"],eQ=["bottom","top"];function e0(e){return e.replace(/left|right|bottom|top/g,e=>eV[e])}function e1(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function e2(e){let{x:t,y:s,width:a,height:r}=e;return{width:a,height:r,top:s,left:t,right:t+a,bottom:s+r,x:t,y:s}}function e4(e,t,s){let a,{reference:r,floating:n}=e,i=eY(t),l=eW(eY(t)),c=eH(l),d=e$(t),o="y"===i,u=r.x+r.width/2-n.width/2,m=r.y+r.height/2-n.height/2,h=r[c]/2-n[c]/2;switch(d){case"top":a={x:u,y:r.y-n.height};break;case"bottom":a={x:u,y:r.y+r.height};break;case"right":a={x:r.x+r.width,y:m};break;case"left":a={x:r.x-n.width,y:m};break;default:a={x:r.x,y:r.y}}switch(eq(t)){case"start":a[l]-=h*(s&&o?-1:1);break;case"end":a[l]+=h*(s&&o?-1:1)}return a}let e5=async(e,t,s)=>{let{placement:a="bottom",strategy:r="absolute",middleware:n=[],platform:i}=s,l=n.filter(Boolean),c=await (null==i.isRTL?void 0:i.isRTL(t)),d=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:o,y:u}=e4(d,a,c),m=a,h={},x=0;for(let s=0;s<l.length;s++){let{name:n,fn:p}=l[s],{x:f,y:j,data:g,reset:v}=await p({x:o,y:u,initialPlacement:a,placement:m,strategy:r,middlewareData:h,rects:d,platform:i,elements:{reference:e,floating:t}});o=null!=f?f:o,u=null!=j?j:u,h={...h,[n]:{...h[n],...g}},v&&x<=50&&(x++,"object"==typeof v&&(v.placement&&(m=v.placement),v.rects&&(d=!0===v.rects?await i.getElementRects({reference:e,floating:t,strategy:r}):v.rects),{x:o,y:u}=e4(d,m,c)),s=-1)}return{x:o,y:u,placement:m,strategy:r,middlewareData:h}};async function e3(e,t){var s;void 0===t&&(t={});let{x:a,y:r,platform:n,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:o="viewport",elementContext:u="floating",altBoundary:m=!1,padding:h=0}=eU(t,e),x=e1(h),p=l[m?"floating"===u?"reference":"floating":u],f=e2(await n.getClippingRect({element:null==(s=await (null==n.isElement?void 0:n.isElement(p)))||s?p:p.contextElement||await (null==n.getDocumentElement?void 0:n.getDocumentElement(l.floating)),boundary:d,rootBoundary:o,strategy:c})),j="floating"===u?{x:a,y:r,width:i.floating.width,height:i.floating.height}:i.reference,g=await (null==n.getOffsetParent?void 0:n.getOffsetParent(l.floating)),v=await (null==n.isElement?void 0:n.isElement(g))&&await (null==n.getScale?void 0:n.getScale(g))||{x:1,y:1},y=e2(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:j,offsetParent:g,strategy:c}):j);return{top:(f.top-y.top+x.top)/v.y,bottom:(y.bottom-f.bottom+x.bottom)/v.y,left:(f.left-y.left+x.left)/v.x,right:(y.right-f.right+x.right)/v.x}}function e6(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function e7(e){return eM.some(t=>e[t]>=0)}let e8=new Set(["left","top"]);async function e9(e,t){let{placement:s,platform:a,elements:r}=e,n=await (null==a.isRTL?void 0:a.isRTL(r.floating)),i=e$(s),l=eq(s),c="y"===eY(s),d=e8.has(i)?-1:1,o=n&&c?-1:1,u=eU(t,e),{mainAxis:m,crossAxis:h,alignmentAxis:x}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&"number"==typeof x&&(h="end"===l?-1*x:x),c?{x:h*o,y:m*d}:{x:m*d,y:h*o}}function te(){return"undefined"!=typeof window}function tt(e){return tr(e)?(e.nodeName||"").toLowerCase():"#document"}function ts(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function ta(e){var t;return null==(t=(tr(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function tr(e){return!!te()&&(e instanceof Node||e instanceof ts(e).Node)}function tn(e){return!!te()&&(e instanceof Element||e instanceof ts(e).Element)}function ti(e){return!!te()&&(e instanceof HTMLElement||e instanceof ts(e).HTMLElement)}function tl(e){return!!te()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof ts(e).ShadowRoot)}let tc=new Set(["inline","contents"]);function td(e){let{overflow:t,overflowX:s,overflowY:a,display:r}=ty(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+s)&&!tc.has(r)}let to=new Set(["table","td","th"]),tu=[":popover-open",":modal"];function tm(e){return tu.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let th=["transform","translate","scale","rotate","perspective"],tx=["transform","translate","scale","rotate","perspective","filter"],tp=["paint","layout","strict","content"];function tf(e){let t=tj(),s=tn(e)?ty(e):e;return th.some(e=>!!s[e]&&"none"!==s[e])||!!s.containerType&&"normal"!==s.containerType||!t&&!!s.backdropFilter&&"none"!==s.backdropFilter||!t&&!!s.filter&&"none"!==s.filter||tx.some(e=>(s.willChange||"").includes(e))||tp.some(e=>(s.contain||"").includes(e))}function tj(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let tg=new Set(["html","body","#document"]);function tv(e){return tg.has(tt(e))}function ty(e){return ts(e).getComputedStyle(e)}function tw(e){return tn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function tN(e){if("html"===tt(e))return e;let t=e.assignedSlot||e.parentNode||tl(e)&&e.host||ta(e);return tl(t)?t.host:t}function tb(e,t,s){var a;void 0===t&&(t=[]),void 0===s&&(s=!0);let r=function e(t){let s=tN(t);return tv(s)?t.ownerDocument?t.ownerDocument.body:t.body:ti(s)&&td(s)?s:e(s)}(e),n=r===(null==(a=e.ownerDocument)?void 0:a.body),i=ts(r);if(n){let e=tk(i);return t.concat(i,i.visualViewport||[],td(r)?r:[],e&&s?tb(e):[])}return t.concat(r,tb(r,[],s))}function tk(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function t_(e){let t=ty(e),s=parseFloat(t.width)||0,a=parseFloat(t.height)||0,r=ti(e),n=r?e.offsetWidth:s,i=r?e.offsetHeight:a,l=eF(s)!==n||eF(a)!==i;return l&&(s=n,a=i),{width:s,height:a,$:l}}function tC(e){return tn(e)?e:e.contextElement}function tS(e){let t=tC(e);if(!ti(t))return eO(1);let s=t.getBoundingClientRect(),{width:a,height:r,$:n}=t_(t),i=(n?eF(s.width):s.width)/a,l=(n?eF(s.height):s.height)/r;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}let tL=eO(0);function tA(e){let t=ts(e);return tj()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:tL}function tE(e,t,s,a){var r;void 0===t&&(t=!1),void 0===s&&(s=!1);let n=e.getBoundingClientRect(),i=tC(e),l=eO(1);t&&(a?tn(a)&&(l=tS(a)):l=tS(e));let c=(void 0===(r=s)&&(r=!1),a&&(!r||a===ts(i))&&r)?tA(i):eO(0),d=(n.left+c.x)/l.x,o=(n.top+c.y)/l.y,u=n.width/l.x,m=n.height/l.y;if(i){let e=ts(i),t=a&&tn(a)?ts(a):a,s=e,r=tk(s);for(;r&&a&&t!==s;){let e=tS(r),t=r.getBoundingClientRect(),a=ty(r),n=t.left+(r.clientLeft+parseFloat(a.paddingLeft))*e.x,i=t.top+(r.clientTop+parseFloat(a.paddingTop))*e.y;d*=e.x,o*=e.y,u*=e.x,m*=e.y,d+=n,o+=i,r=tk(s=ts(r))}}return e2({width:u,height:m,x:d,y:o})}function tP(e,t){let s=tw(e).scrollLeft;return t?t.left+s:tE(ta(e)).left+s}function tT(e,t){let s=e.getBoundingClientRect();return{x:s.left+t.scrollLeft-tP(e,s),y:s.top+t.scrollTop}}let tR=new Set(["absolute","fixed"]);function tM(e,t,s){let a;if("viewport"===t)a=function(e,t){let s=ts(e),a=ta(e),r=s.visualViewport,n=a.clientWidth,i=a.clientHeight,l=0,c=0;if(r){n=r.width,i=r.height;let e=tj();(!e||e&&"fixed"===t)&&(l=r.offsetLeft,c=r.offsetTop)}let d=tP(a);if(d<=0){let e=a.ownerDocument,t=e.body,s=getComputedStyle(t),r="CSS1Compat"===e.compatMode&&parseFloat(s.marginLeft)+parseFloat(s.marginRight)||0,i=Math.abs(a.clientWidth-t.clientWidth-r);i<=25&&(n-=i)}else d<=25&&(n+=d);return{width:n,height:i,x:l,y:c}}(e,s);else if("document"===t)a=function(e){let t=ta(e),s=tw(e),a=e.ownerDocument.body,r=eD(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),n=eD(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight),i=-s.scrollLeft+tP(e),l=-s.scrollTop;return"rtl"===ty(a).direction&&(i+=eD(t.clientWidth,a.clientWidth)-r),{width:r,height:n,x:i,y:l}}(ta(e));else if(tn(t))a=function(e,t){let s=tE(e,!0,"fixed"===t),a=s.top+e.clientTop,r=s.left+e.clientLeft,n=ti(e)?tS(e):eO(1),i=e.clientWidth*n.x;return{width:i,height:e.clientHeight*n.y,x:r*n.x,y:a*n.y}}(t,s);else{let s=tA(e);a={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return e2(a)}function tz(e){return"static"===ty(e).position}function tD(e,t){if(!ti(e)||"fixed"===ty(e).position)return null;if(t)return t(e);let s=e.offsetParent;return ta(e)===s&&(s=s.ownerDocument.body),s}function tF(e,t){var s;let a=ts(e);if(tm(e))return a;if(!ti(e)){let t=tN(e);for(;t&&!tv(t);){if(tn(t)&&!tz(t))return t;t=tN(t)}return a}let r=tD(e,t);for(;r&&(s=r,to.has(tt(s)))&&tz(r);)r=tD(r,t);return r&&tv(r)&&tz(r)&&!tf(r)?a:r||function(e){let t=tN(e);for(;ti(t)&&!tv(t);){if(tf(t))return t;if(tm(t))break;t=tN(t)}return null}(e)||a}let tI=async function(e){let t=this.getOffsetParent||tF,s=this.getDimensions,a=await s(e.floating);return{reference:function(e,t,s){let a=ti(t),r=ta(t),n="fixed"===s,i=tE(e,!0,n,t),l={scrollLeft:0,scrollTop:0},c=eO(0);if(a||!a&&!n){if(("body"!==tt(t)||td(r))&&(l=tw(t)),a){let e=tE(t,!0,n,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else r&&(c.x=tP(r))}n&&!a&&r&&(c.x=tP(r));let d=!r||a||n?eO(0):tT(r,l);return{x:i.left+l.scrollLeft-c.x-d.x,y:i.top+l.scrollTop-c.y-d.y,width:i.width,height:i.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}},tO={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:s,offsetParent:a,strategy:r}=e,n="fixed"===r,i=ta(a),l=!!t&&tm(t.floating);if(a===i||l&&n)return s;let c={scrollLeft:0,scrollTop:0},d=eO(1),o=eO(0),u=ti(a);if((u||!u&&!n)&&(("body"!==tt(a)||td(i))&&(c=tw(a)),ti(a))){let e=tE(a);d=tS(a),o.x=e.x+a.clientLeft,o.y=e.y+a.clientTop}let m=!i||u||n?eO(0):tT(i,c);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-c.scrollLeft*d.x+o.x+m.x,y:s.y*d.y-c.scrollTop*d.y+o.y+m.y}},getDocumentElement:ta,getClippingRect:function(e){let{element:t,boundary:s,rootBoundary:a,strategy:r}=e,n=[..."clippingAncestors"===s?tm(t)?[]:function(e,t){let s=t.get(e);if(s)return s;let a=tb(e,[],!1).filter(e=>tn(e)&&"body"!==tt(e)),r=null,n="fixed"===ty(e).position,i=n?tN(e):e;for(;tn(i)&&!tv(i);){let t=ty(i),s=tf(i);s||"fixed"!==t.position||(r=null),(n?!s&&!r:!s&&"static"===t.position&&!!r&&tR.has(r.position)||td(i)&&!s&&function e(t,s){let a=tN(t);return!(a===s||!tn(a)||tv(a))&&("fixed"===ty(a).position||e(a,s))}(e,i))?a=a.filter(e=>e!==i):r=t,i=tN(i)}return t.set(e,a),a}(t,this._c):[].concat(s),a],i=n[0],l=n.reduce((e,s)=>{let a=tM(t,s,r);return e.top=eD(a.top,e.top),e.right=ez(a.right,e.right),e.bottom=ez(a.bottom,e.bottom),e.left=eD(a.left,e.left),e},tM(t,i,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:tF,getElementRects:tI,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:s}=t_(e);return{width:t,height:s}},getScale:tS,isElement:tn,isRTL:function(e){return"rtl"===ty(e).direction}};function tV(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let tZ=e=>({name:"arrow",options:e,async fn(t){let{x:s,y:a,placement:r,rects:n,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:o=0}=eU(e,t)||{};if(null==d)return{};let u=e1(o),m={x:s,y:a},h=eW(eY(r)),x=eH(h),p=await i.getDimensions(d),f="y"===h,j=f?"clientHeight":"clientWidth",g=n.reference[x]+n.reference[h]-m[h]-n.floating[x],v=m[h]-n.reference[h],y=await (null==i.getOffsetParent?void 0:i.getOffsetParent(d)),w=y?y[j]:0;w&&await (null==i.isElement?void 0:i.isElement(y))||(w=l.floating[j]||n.floating[x]);let N=w/2-p[x]/2-1,b=ez(u[f?"top":"left"],N),k=ez(u[f?"bottom":"right"],N),_=w-p[x]-k,C=w/2-p[x]/2+(g/2-v/2),S=eD(b,ez(C,_)),L=!c.arrow&&null!=eq(r)&&C!==S&&n.reference[x]/2-(C<b?b:k)-p[x]/2<0,A=L?C<b?C-b:C-_:0;return{[h]:m[h]+A,data:{[h]:S,centerOffset:C-S-A,...L&&{alignmentOffset:A}},reset:L}}}),tU=(e,t,s)=>{let a=new Map,r={platform:tO,...s},n={...r.platform,_c:a};return e5(e,t,{...r,platform:n})};var t$="undefined"!=typeof document?l.useLayoutEffect:function(){};function tq(e,t){let s,a,r;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((s=e.length)!==t.length)return!1;for(a=s;0!=a--;)if(!tq(e[a],t[a]))return!1;return!0}if((s=(r=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(a=s;0!=a--;)if(!({}).hasOwnProperty.call(t,r[a]))return!1;for(a=s;0!=a--;){let s=r[a];if(("_owner"!==s||!e.$$typeof)&&!tq(e[s],t[s]))return!1}return!0}return e!=e&&t!=t}function tW(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function tH(e,t){let s=tW(e);return Math.round(t*s)/s}function tB(e){let t=l.useRef(e);return t$(()=>{t.current=e}),t}let tY=e=>({name:"arrow",options:e,fn(t){let{element:s,padding:a}="function"==typeof e?e(t):e;return s&&({}).hasOwnProperty.call(s,"current")?null!=s.current?tZ({element:s.current,padding:a}).fn(t):{}:s?tZ({element:s,padding:a}).fn(t):{}}}),tG=(e,t)=>({...function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var s,a;let{x:r,y:n,placement:i,middlewareData:l}=t,c=await e9(t,e);return i===(null==(s=l.offset)?void 0:s.placement)&&null!=(a=l.arrow)&&a.alignmentOffset?{}:{x:r+c.x,y:n+c.y,data:{...c,placement:i}}}}}(e),options:[e,t]}),tK=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:s,y:a,placement:r}=t,{mainAxis:n=!0,crossAxis:i=!1,limiter:l={fn:e=>{let{x:t,y:s}=e;return{x:t,y:s}}},...c}=eU(e,t),d={x:s,y:a},o=await e3(t,c),u=eY(e$(r)),m=eW(u),h=d[m],x=d[u];if(n){let e="y"===m?"top":"left",t="y"===m?"bottom":"right",s=h+o[e],a=h-o[t];h=eD(s,ez(h,a))}if(i){let e="y"===u?"top":"left",t="y"===u?"bottom":"right",s=x+o[e],a=x-o[t];x=eD(s,ez(x,a))}let p=l.fn({...t,[m]:h,[u]:x});return{...p,data:{x:p.x-s,y:p.y-a,enabled:{[m]:n,[u]:i}}}}}}(e),options:[e,t]}),tX=(e,t)=>({...function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:s,y:a,placement:r,rects:n,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=eU(e,t),o={x:s,y:a},u=eY(r),m=eW(u),h=o[m],x=o[u],p=eU(l,t),f="number"==typeof p?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){let e="y"===m?"height":"width",t=n.reference[m]-n.floating[e]+f.mainAxis,s=n.reference[m]+n.reference[e]-f.mainAxis;h<t?h=t:h>s&&(h=s)}if(d){var j,g;let e="y"===m?"width":"height",t=e8.has(e$(r)),s=n.reference[u]-n.floating[e]+(t&&(null==(j=i.offset)?void 0:j[u])||0)+(t?0:f.crossAxis),a=n.reference[u]+n.reference[e]+(t?0:(null==(g=i.offset)?void 0:g[u])||0)-(t?f.crossAxis:0);x<s?x=s:x>a&&(x=a)}return{[m]:h,[u]:x}}}}(e),options:[e,t]}),tJ=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var s,a,r,n,i;let{placement:l,middlewareData:c,rects:d,initialPlacement:o,platform:u,elements:m}=t,{mainAxis:h=!0,crossAxis:x=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:g=!0,...v}=eU(e,t);if(null!=(s=c.arrow)&&s.alignmentOffset)return{};let y=e$(l),w=eY(o),N=e$(o)===o,b=await (null==u.isRTL?void 0:u.isRTL(m.floating)),k=p||(N||!g?[e0(o)]:function(e){let t=e0(e);return[eG(e),t,eG(t)]}(o)),_="none"!==j;!p&&_&&k.push(...function(e,t,s,a){let r=eq(e),n=function(e,t,s){switch(e){case"top":case"bottom":if(s)return t?eX:eK;return t?eK:eX;case"left":case"right":return t?eJ:eQ;default:return[]}}(e$(e),"start"===s,a);return r&&(n=n.map(e=>e+"-"+r),t&&(n=n.concat(n.map(eG)))),n}(o,g,j,b));let C=[o,...k],S=await e3(t,v),L=[],A=(null==(a=c.flip)?void 0:a.overflows)||[];if(h&&L.push(S[y]),x){let e=function(e,t,s){void 0===s&&(s=!1);let a=eq(e),r=eW(eY(e)),n=eH(r),i="x"===r?a===(s?"end":"start")?"right":"left":"start"===a?"bottom":"top";return t.reference[n]>t.floating[n]&&(i=e0(i)),[i,e0(i)]}(l,d,b);L.push(S[e[0]],S[e[1]])}if(A=[...A,{placement:l,overflows:L}],!L.every(e=>e<=0)){let e=((null==(r=c.flip)?void 0:r.index)||0)+1,t=C[e];if(t&&(!("alignment"===x&&w!==eY(t))||A.every(e=>eY(e.placement)!==w||e.overflows[0]>0)))return{data:{index:e,overflows:A},reset:{placement:t}};let s=null==(n=A.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:n.placement;if(!s)switch(f){case"bestFit":{let e=null==(i=A.filter(e=>{if(_){let t=eY(e.placement);return t===w||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:i[0];e&&(s=e);break}case"initialPlacement":s=o}if(l!==s)return{reset:{placement:s}}}return{}}}}(e),options:[e,t]}),tQ=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var s,a;let r,n;let{placement:i,rects:l,platform:c,elements:d}=t,{apply:o=()=>{},...u}=eU(e,t),m=await e3(t,u),h=e$(i),x=eq(i),p="y"===eY(i),{width:f,height:j}=l.floating;"top"===h||"bottom"===h?(r=h,n=x===(await (null==c.isRTL?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(n=h,r="end"===x?"top":"bottom");let g=j-m.top-m.bottom,v=f-m.left-m.right,y=ez(j-m[r],g),w=ez(f-m[n],v),N=!t.middlewareData.shift,b=y,k=w;if(null!=(s=t.middlewareData.shift)&&s.enabled.x&&(k=v),null!=(a=t.middlewareData.shift)&&a.enabled.y&&(b=g),N&&!x){let e=eD(m.left,0),t=eD(m.right,0),s=eD(m.top,0),a=eD(m.bottom,0);p?k=f-2*(0!==e||0!==t?e+t:eD(m.left,m.right)):b=j-2*(0!==s||0!==a?s+a:eD(m.top,m.bottom))}await o({...t,availableWidth:k,availableHeight:b});let _=await c.getDimensions(d.floating);return f!==_.width||j!==_.height?{reset:{rects:!0}}:{}}}}(e),options:[e,t]}),t0=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:s}=t,{strategy:a="referenceHidden",...r}=eU(e,t);switch(a){case"referenceHidden":{let e=e6(await e3(t,{...r,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:e7(e)}}}case"escaped":{let e=e6(await e3(t,{...r,altBoundary:!0}),s.floating);return{data:{escapedOffsets:e,escaped:e7(e)}}}default:return{}}}}}(e),options:[e,t]}),t1=(e,t)=>({...tY(e),options:[e,t]});var t2=l.forwardRef((e,t)=>{let{children:s,width:a=10,height:r=5,...n}=e;return(0,i.jsx)(ep.WV.svg,{...n,ref:t,width:a,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:(0,i.jsx)("polygon",{points:"0,0 30,0 15,10"})})});t2.displayName="Arrow";var t4=s(5819),t5=s(2566),t3="Popper",[t6,t7]=(0,eh.b)(t3),[t8,t9]=t6(t3),se=e=>{let{__scopePopper:t,children:s}=e,[a,r]=l.useState(null);return(0,i.jsx)(t8,{scope:t,anchor:a,onAnchorChange:r,children:s})};se.displayName=t3;var st="PopperAnchor",ss=l.forwardRef((e,t)=>{let{__scopePopper:s,virtualRef:a,...r}=e,n=t9(st,s),c=l.useRef(null),d=(0,em.e)(t,c),o=l.useRef(null);return l.useEffect(()=>{let e=o.current;o.current=a?.current||c.current,e!==o.current&&n.onAnchorChange(o.current)}),a?null:(0,i.jsx)(ep.WV.div,{...r,ref:d})});ss.displayName=st;var sa="PopperContent",[sr,sn]=t6(sa),si=l.forwardRef((e,t)=>{let{__scopePopper:s,side:a="bottom",sideOffset:r=0,align:n="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:o=!0,collisionBoundary:u=[],collisionPadding:m=0,sticky:h="partial",hideWhenDetached:x=!1,updatePositionStrategy:p="optimized",onPlaced:f,...j}=e,g=t9(sa,s),[v,y]=l.useState(null),w=(0,em.e)(t,e=>y(e)),[N,b]=l.useState(null),k=(0,t5.t)(N),_=k?.width??0,C=k?.height??0,S="number"==typeof m?m:{top:0,right:0,bottom:0,left:0,...m},L=Array.isArray(u)?u:[u],A=L.length>0,E={padding:S,boundary:L.filter(so),altBoundary:A},{refs:P,floatingStyles:T,placement:R,isPositioned:M,middlewareData:z}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:s="absolute",middleware:a=[],platform:r,elements:{reference:n,floating:i}={},transform:c=!0,whileElementsMounted:d,open:o}=e,[u,m]=l.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[h,x]=l.useState(a);tq(h,a)||x(a);let[p,f]=l.useState(null),[j,g]=l.useState(null),v=l.useCallback(e=>{e!==b.current&&(b.current=e,f(e))},[]),y=l.useCallback(e=>{e!==k.current&&(k.current=e,g(e))},[]),w=n||p,N=i||j,b=l.useRef(null),k=l.useRef(null),_=l.useRef(u),C=null!=d,S=tB(d),L=tB(r),A=tB(o),E=l.useCallback(()=>{if(!b.current||!k.current)return;let e={placement:t,strategy:s,middleware:h};L.current&&(e.platform=L.current),tU(b.current,k.current,e).then(e=>{let t={...e,isPositioned:!1!==A.current};P.current&&!tq(_.current,t)&&(_.current=t,ec.flushSync(()=>{m(t)}))})},[h,t,s,L,A]);t$(()=>{!1===o&&_.current.isPositioned&&(_.current.isPositioned=!1,m(e=>({...e,isPositioned:!1})))},[o]);let P=l.useRef(!1);t$(()=>(P.current=!0,()=>{P.current=!1}),[]),t$(()=>{if(w&&(b.current=w),N&&(k.current=N),w&&N){if(S.current)return S.current(w,N,E);E()}},[w,N,E,S,C]);let T=l.useMemo(()=>({reference:b,floating:k,setReference:v,setFloating:y}),[v,y]),R=l.useMemo(()=>({reference:w,floating:N}),[w,N]),M=l.useMemo(()=>{let e={position:s,left:0,top:0};if(!R.floating)return e;let t=tH(R.floating,u.x),a=tH(R.floating,u.y);return c?{...e,transform:"translate("+t+"px, "+a+"px)",...tW(R.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:t,top:a}},[s,c,R.floating,u.x,u.y]);return l.useMemo(()=>({...u,update:E,refs:T,elements:R,floatingStyles:M}),[u,E,T,R,M])}({strategy:"fixed",placement:a+("center"!==n?"-"+n:""),whileElementsMounted:(...e)=>(function(e,t,s,a){let r;void 0===a&&(a={});let{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:l="function"==typeof ResizeObserver,layoutShift:c="function"==typeof IntersectionObserver,animationFrame:d=!1}=a,o=tC(e),u=n||i?[...o?tb(o):[],...tb(t)]:[];u.forEach(e=>{n&&e.addEventListener("scroll",s,{passive:!0}),i&&e.addEventListener("resize",s)});let m=o&&c?function(e,t){let s,a=null,r=ta(e);function n(){var e;clearTimeout(s),null==(e=a)||e.disconnect(),a=null}return function i(l,c){void 0===l&&(l=!1),void 0===c&&(c=1),n();let d=e.getBoundingClientRect(),{left:o,top:u,width:m,height:h}=d;if(l||t(),!m||!h)return;let x=eI(u),p=eI(r.clientWidth-(o+m)),f={rootMargin:-x+"px "+-p+"px "+-eI(r.clientHeight-(u+h))+"px "+-eI(o)+"px",threshold:eD(0,ez(1,c))||1},j=!0;function g(t){let a=t[0].intersectionRatio;if(a!==c){if(!j)return i();a?i(!1,a):s=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==a||tV(d,e.getBoundingClientRect())||i(),j=!1}try{a=new IntersectionObserver(g,{...f,root:r.ownerDocument})}catch(e){a=new IntersectionObserver(g,f)}a.observe(e)}(!0),n}(o,s):null,h=-1,x=null;l&&(x=new ResizeObserver(e=>{let[a]=e;a&&a.target===o&&x&&(x.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var e;null==(e=x)||e.observe(t)})),s()}),o&&!d&&x.observe(o),x.observe(t));let p=d?tE(e):null;return d&&function t(){let a=tE(e);p&&!tV(p,a)&&s(),p=a,r=requestAnimationFrame(t)}(),s(),()=>{var e;u.forEach(e=>{n&&e.removeEventListener("scroll",s),i&&e.removeEventListener("resize",s)}),null==m||m(),null==(e=x)||e.disconnect(),x=null,d&&cancelAnimationFrame(r)}})(...e,{animationFrame:"always"===p}),elements:{reference:g.anchor},middleware:[tG({mainAxis:r+C,alignmentAxis:c}),o&&tK({mainAxis:!0,crossAxis:!1,limiter:"partial"===h?tX():void 0,...E}),o&&tJ({...E}),tQ({...E,apply:({elements:e,rects:t,availableWidth:s,availableHeight:a})=>{let{width:r,height:n}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${s}px`),i.setProperty("--radix-popper-available-height",`${a}px`),i.setProperty("--radix-popper-anchor-width",`${r}px`),i.setProperty("--radix-popper-anchor-height",`${n}px`)}}),N&&t1({element:N,padding:d}),su({arrowWidth:_,arrowHeight:C}),x&&t0({strategy:"referenceHidden",...E})]}),[D,F]=sm(R),I=(0,ef.W)(f);(0,t4.b)(()=>{M&&I?.()},[M,I]);let O=z.arrow?.x,V=z.arrow?.y,Z=z.arrow?.centerOffset!==0,[U,$]=l.useState();return(0,t4.b)(()=>{v&&$(window.getComputedStyle(v).zIndex)},[v]),(0,i.jsx)("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...T,transform:M?T.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:U,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,i.jsx)(sr,{scope:s,placedSide:D,onArrowChange:b,arrowX:O,arrowY:V,shouldHideArrow:Z,children:(0,i.jsx)(ep.WV.div,{"data-side":D,"data-align":F,...j,ref:w,style:{...j.style,animation:M?void 0:"none"}})})})});si.displayName=sa;var sl="PopperArrow",sc={top:"bottom",right:"left",bottom:"top",left:"right"},sd=l.forwardRef(function(e,t){let{__scopePopper:s,...a}=e,r=sn(sl,s),n=sc[r.placedSide];return(0,i.jsx)("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[n]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:(0,i.jsx)(t2,{...a,ref:t,style:{...a.style,display:"block"}})})});function so(e){return null!==e}sd.displayName=sl;var su=e=>({name:"transformOrigin",options:e,fn(t){let{placement:s,rects:a,middlewareData:r}=t,n=r.arrow?.centerOffset!==0,i=n?0:e.arrowWidth,l=n?0:e.arrowHeight,[c,d]=sm(s),o={start:"0%",center:"50%",end:"100%"}[d],u=(r.arrow?.x??0)+i/2,m=(r.arrow?.y??0)+l/2,h="",x="";return"bottom"===c?(h=n?o:`${u}px`,x=`${-l}px`):"top"===c?(h=n?o:`${u}px`,x=`${a.floating.height+l}px`):"right"===c?(h=`${-l}px`,x=n?o:`${m}px`):"left"===c&&(h=`${a.floating.width+l}px`,x=n?o:`${m}px`),{data:{x:h,y:x}}}});function sm(e){let[t,s="center"]=e.split("-");return[t,s]}var sh=l.forwardRef((e,t)=>{let{container:s,...a}=e,[r,n]=l.useState(!1);(0,t4.b)(()=>n(!0),[]);let c=s||r&&globalThis?.document?.body;return c?ec.createPortal((0,i.jsx)(ep.WV.div,{...a,ref:t}),c):null});sh.displayName="Portal";var sx=s(4214),sp=s(2067),sf=s(3405),sj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});l.forwardRef((e,t)=>(0,i.jsx)(ep.WV.span,{...e,ref:t,style:{...sj,...e.style}})).displayName="VisuallyHidden";var sg=new WeakMap,sv=new WeakMap,sy={},sw=0,sN=function(e){return e&&(e.host||sN(e.parentNode))},sb=function(e,t,s,a){var r=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var s=sN(e);return s&&t.contains(s)?s:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});sy[s]||(sy[s]=new WeakMap);var n=sy[s],i=[],l=new Set,c=new Set(r),d=function(e){!e||l.has(e)||(l.add(e),d(e.parentNode))};r.forEach(d);var o=function(e){!e||c.has(e)||Array.prototype.forEach.call(e.children,function(e){if(l.has(e))o(e);else try{var t=e.getAttribute(a),r=null!==t&&"false"!==t,c=(sg.get(e)||0)+1,d=(n.get(e)||0)+1;sg.set(e,c),n.set(e,d),i.push(e),1===c&&r&&sv.set(e,!0),1===d&&e.setAttribute(s,"true"),r||e.setAttribute(a,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return o(t),l.clear(),sw++,function(){i.forEach(function(e){var t=sg.get(e)-1,r=n.get(e)-1;sg.set(e,t),n.set(e,r),t||(sv.has(e)||e.removeAttribute(a),sv.delete(e)),r||e.removeAttribute(s)}),--sw||(sg=new WeakMap,sg=new WeakMap,sv=new WeakMap,sy={})}},sk=function(e,t,s){void 0===s&&(s="data-aria-hidden");var a,r=Array.from(Array.isArray(e)?e:[e]),n=t||(a=e,"undefined"==typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body);return n?(r.push.apply(r,Array.from(n.querySelectorAll("[aria-live], script"))),sb(r,n,s,"aria-hidden")):function(){return null}},s_=function(){return(s_=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function sC(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]]);return s}Object.create,Object.create;var sS=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),sL="width-before-scroll-bar";function sA(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var sE="undefined"!=typeof window?l.useLayoutEffect:l.useEffect,sP=new WeakMap;function sT(e){return e}var sR=function(e){void 0===e&&(e={});var t,s,a,r=(void 0===t&&(t=sT),s=[],a=!1,{read:function(){if(a)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:null},useMedium:function(e){var r=t(e,a);return s.push(r),function(){s=s.filter(function(e){return e!==r})}},assignSyncMedium:function(e){for(a=!0;s.length;){var t=s;s=[],t.forEach(e)}s={push:function(t){return e(t)},filter:function(){return s}}},assignMedium:function(e){a=!0;var t=[];if(s.length){var r=s;s=[],r.forEach(e),t=s}var n=function(){var s=t;t=[],s.forEach(e)},i=function(){return Promise.resolve().then(n)};i(),s={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),s}}}});return r.options=s_({async:!0,ssr:!1},e),r}(),sM=function(){},sz=l.forwardRef(function(e,t){var s,a,r,n,i=l.useRef(null),c=l.useState({onScrollCapture:sM,onWheelCapture:sM,onTouchMoveCapture:sM}),d=c[0],o=c[1],u=e.forwardProps,m=e.children,h=e.className,x=e.removeScrollBar,p=e.enabled,f=e.shards,j=e.sideCar,g=e.noRelative,v=e.noIsolation,y=e.inert,w=e.allowPinchZoom,N=e.as,b=e.gapMode,k=sC(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=(s=[i,t],a=function(e){return s.forEach(function(t){return sA(t,e)})},(r=(0,l.useState)(function(){return{value:null,callback:a,facade:{get current(){return r.value},set current(value){var e=r.value;e!==value&&(r.value=value,r.callback(value,e))}}}})[0]).callback=a,n=r.facade,sE(function(){var e=sP.get(n);if(e){var t=new Set(e),a=new Set(s),r=n.current;t.forEach(function(e){a.has(e)||sA(e,null)}),a.forEach(function(e){t.has(e)||sA(e,r)})}sP.set(n,s)},[s]),n),C=s_(s_({},k),d);return l.createElement(l.Fragment,null,p&&l.createElement(j,{sideCar:sR,removeScrollBar:x,shards:f,noRelative:g,noIsolation:v,inert:y,setCallbacks:o,allowPinchZoom:!!w,lockRef:i,gapMode:b}),u?l.cloneElement(l.Children.only(m),s_(s_({},C),{ref:_})):l.createElement(void 0===N?"div":N,s_({},C,{className:h,ref:_}),m))});sz.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},sz.classNames={fullWidth:sL,zeroRight:sS};var sD=function(e){var t=e.sideCar,s=sC(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw Error("Sidecar medium not found");return l.createElement(a,s_({},s))};sD.isSideCarExport=!0;var sF=function(){var e=0,t=null;return{add:function(a){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=n||s.nc;return t&&e.setAttribute("nonce",t),e}())){var r,i;(r=t).styleSheet?r.styleSheet.cssText=a:r.appendChild(document.createTextNode(a)),i=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(i)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},sI=function(){var e=sF();return function(t,s){l.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}},sO=function(){var e=sI();return function(t){return e(t.styles,t.dynamic),null}},sV={left:0,top:0,right:0,gap:0},sZ=function(e){return parseInt(e||"",10)||0},sU=function(e){var t=window.getComputedStyle(document.body),s=t["padding"===e?"paddingLeft":"marginLeft"],a=t["padding"===e?"paddingTop":"marginTop"],r=t["padding"===e?"paddingRight":"marginRight"];return[sZ(s),sZ(a),sZ(r)]},s$=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return sV;var t=sU(e),s=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-s+t[2]-t[0])}},sq=sO(),sW="data-scroll-locked",sH=function(e,t,s,a){var r=e.left,n=e.top,i=e.right,l=e.gap;return void 0===s&&(s="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(a,";\n   padding-right: ").concat(l,"px ").concat(a,";\n  }\n  body[").concat(sW,"] {\n    overflow: hidden ").concat(a,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(a,";"),"margin"===s&&"\n    padding-left: ".concat(r,"px;\n    padding-top: ").concat(n,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(l,"px ").concat(a,";\n    "),"padding"===s&&"padding-right: ".concat(l,"px ").concat(a,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(sS," {\n    right: ").concat(l,"px ").concat(a,";\n  }\n  \n  .").concat(sL," {\n    margin-right: ").concat(l,"px ").concat(a,";\n  }\n  \n  .").concat(sS," .").concat(sS," {\n    right: 0 ").concat(a,";\n  }\n  \n  .").concat(sL," .").concat(sL," {\n    margin-right: 0 ").concat(a,";\n  }\n  \n  body[").concat(sW,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(l,"px;\n  }\n")},sB=function(){var e=parseInt(document.body.getAttribute(sW)||"0",10);return isFinite(e)?e:0},sY=function(){l.useEffect(function(){return document.body.setAttribute(sW,(sB()+1).toString()),function(){var e=sB()-1;e<=0?document.body.removeAttribute(sW):document.body.setAttribute(sW,e.toString())}},[])},sG=function(e){var t=e.noRelative,s=e.noImportant,a=e.gapMode,r=void 0===a?"margin":a;sY();var n=l.useMemo(function(){return s$(r)},[r]);return l.createElement(sq,{styles:sH(n,!t,r,s?"":"!important")})},sK=!1;if("undefined"!=typeof window)try{var sX=Object.defineProperty({},"passive",{get:function(){return sK=!0,!0}});window.addEventListener("test",sX,sX),window.removeEventListener("test",sX,sX)}catch(e){sK=!1}var sJ=!!sK&&{passive:!1},sQ=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return"hidden"!==s[t]&&!(s.overflowY===s.overflowX&&"TEXTAREA"!==e.tagName&&"visible"===s[t])},s0=function(e,t){var s=t.ownerDocument,a=t;do{if("undefined"!=typeof ShadowRoot&&a instanceof ShadowRoot&&(a=a.host),s1(e,a)){var r=s2(e,a);if(r[1]>r[2])return!0}a=a.parentNode}while(a&&a!==s.body);return!1},s1=function(e,t){return"v"===e?sQ(t,"overflowY"):sQ(t,"overflowX")},s2=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},s4=function(e,t,s,a,r){var n,i=(n=window.getComputedStyle(t).direction,"h"===e&&"rtl"===n?-1:1),l=i*a,c=s.target,d=t.contains(c),o=!1,u=l>0,m=0,h=0;do{if(!c)break;var x=s2(e,c),p=x[0],f=x[1]-x[2]-i*p;(p||f)&&s1(e,c)&&(m+=f,h+=p);var j=c.parentNode;c=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!d&&c!==document.body||d&&(t.contains(c)||t===c));return u&&(r&&1>Math.abs(m)||!r&&l>m)?o=!0:!u&&(r&&1>Math.abs(h)||!r&&-l>h)&&(o=!0),o},s5=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},s3=function(e){return[e.deltaX,e.deltaY]},s6=function(e){return e&&"current"in e?e.current:e},s7=0,s8=[];let s9=(a=function(e){var t=l.useRef([]),s=l.useRef([0,0]),a=l.useRef(),r=l.useState(s7++)[0],n=l.useState(sO)[0],i=l.useRef(e);l.useEffect(function(){i.current=e},[e]),l.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var t=(function(e,t,s){if(s||2==arguments.length)for(var a,r=0,n=t.length;r<n;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(s6),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var c=l.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var r,n=s5(e),l=s.current,c="deltaX"in e?e.deltaX:l[0]-n[0],d="deltaY"in e?e.deltaY:l[1]-n[1],o=e.target,u=Math.abs(c)>Math.abs(d)?"h":"v";if("touches"in e&&"h"===u&&"range"===o.type)return!1;var m=s0(u,o);if(!m)return!0;if(m?r=u:(r="v"===u?"h":"v",m=s0(u,o)),!m)return!1;if(!a.current&&"changedTouches"in e&&(c||d)&&(a.current=r),!r)return!0;var h=a.current||r;return s4(h,t,e,"h"===h?c:d,!0)},[]),d=l.useCallback(function(e){if(s8.length&&s8[s8.length-1]===n){var s="deltaY"in e?s3(e):s5(e),a=t.current.filter(function(t){var a;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(a=t.delta)[0]===s[0]&&a[1]===s[1]})[0];if(a&&a.should){e.cancelable&&e.preventDefault();return}if(!a){var r=(i.current.shards||[]).map(s6).filter(Boolean).filter(function(t){return t.contains(e.target)});(r.length>0?c(e,r[0]):!i.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),o=l.useCallback(function(e,s,a,r){var n={name:e,delta:s,target:a,should:r,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(a)};t.current.push(n),setTimeout(function(){t.current=t.current.filter(function(e){return e!==n})},1)},[]),u=l.useCallback(function(e){s.current=s5(e),a.current=void 0},[]),m=l.useCallback(function(t){o(t.type,s3(t),t.target,c(t,e.lockRef.current))},[]),h=l.useCallback(function(t){o(t.type,s5(t),t.target,c(t,e.lockRef.current))},[]);l.useEffect(function(){return s8.push(n),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",d,sJ),document.addEventListener("touchmove",d,sJ),document.addEventListener("touchstart",u,sJ),function(){s8=s8.filter(function(e){return e!==n}),document.removeEventListener("wheel",d,sJ),document.removeEventListener("touchmove",d,sJ),document.removeEventListener("touchstart",u,sJ)}},[]);var x=e.removeScrollBar,p=e.inert;return l.createElement(l.Fragment,null,p?l.createElement(n,{styles:"\n  .block-interactivity-".concat(r," {pointer-events: none;}\n  .allow-interactivity-").concat(r," {pointer-events: all;}\n")}):null,x?l.createElement(sG,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},sR.useMedium(a),sD);var ae=l.forwardRef(function(e,t){return l.createElement(sz,s_({},e,{ref:t,sideCar:s9}))});ae.classNames=sz.classNames;var at=[" ","Enter","ArrowUp","ArrowDown"],as=[" ","Enter"],aa="Select",[ar,an,ai]=(0,eu.B)(aa),[al,ac]=(0,eh.b)(aa,[ai,t7]),ad=t7(),[ao,au]=al(aa),[am,ah]=al(aa),ax=e=>{let{__scopeSelect:t,children:s,open:a,defaultOpen:r,onOpenChange:n,value:c,defaultValue:d,onValueChange:o,dir:u,name:m,autoComplete:h,disabled:x,required:p,form:f}=e,j=ad(t),[g,v]=l.useState(null),[y,w]=l.useState(null),[N,b]=l.useState(!1),k=(0,ex.gm)(u),[_,C]=(0,sp.T)({prop:a,defaultProp:r??!1,onChange:n,caller:aa}),[S,L]=(0,sp.T)({prop:c,defaultProp:d,onChange:o,caller:aa}),A=l.useRef(null),E=!g||f||!!g.closest("form"),[P,T]=l.useState(new Set),R=Array.from(P).map(e=>e.props.value).join(";");return(0,i.jsx)(se,{...j,children:(0,i.jsxs)(ao,{required:p,scope:t,trigger:g,onTriggerChange:v,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:N,onValueNodeHasChildrenChange:b,contentId:(0,eR.M)(),value:S,onValueChange:L,open:_,onOpenChange:C,dir:k,triggerPointerDownPosRef:A,disabled:x,children:[(0,i.jsx)(ar.Provider,{scope:t,children:(0,i.jsx)(am,{scope:e.__scopeSelect,onNativeOptionAdd:l.useCallback(e=>{T(t=>new Set(t).add(e))},[]),onNativeOptionRemove:l.useCallback(e=>{T(t=>{let s=new Set(t);return s.delete(e),s})},[]),children:s})}),E?(0,i.jsxs)(aQ,{"aria-hidden":!0,required:p,tabIndex:-1,name:m,autoComplete:h,value:S,onChange:e=>L(e.target.value),disabled:x,form:f,children:[void 0===S?(0,i.jsx)("option",{value:""}):null,Array.from(P)]},R):null]})})};ax.displayName=aa;var ap="SelectTrigger",af=l.forwardRef((e,t)=>{let{__scopeSelect:s,disabled:a=!1,...r}=e,n=ad(s),c=au(ap,s),d=c.disabled||a,o=(0,em.e)(t,c.onTriggerChange),u=an(s),m=l.useRef("touch"),[h,x,p]=a1(e=>{let t=u().filter(e=>!e.disabled),s=t.find(e=>e.value===c.value),a=a2(t,e,s);void 0!==a&&c.onValueChange(a.value)}),f=e=>{d||(c.onOpenChange(!0),p()),e&&(c.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,i.jsx)(ss,{asChild:!0,...n,children:(0,i.jsx)(ep.WV.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":a0(c.value)?"":void 0,...r,ref:o,onClick:(0,eo.Mj)(r.onClick,e=>{e.currentTarget.focus(),"mouse"!==m.current&&f(e)}),onPointerDown:(0,eo.Mj)(r.onPointerDown,e=>{m.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(f(e),e.preventDefault())}),onKeyDown:(0,eo.Mj)(r.onKeyDown,e=>{let t=""!==h.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||x(e.key),(!t||" "!==e.key)&&at.includes(e.key)&&(f(),e.preventDefault())})})})});af.displayName=ap;var aj="SelectValue",ag=l.forwardRef((e,t)=>{let{__scopeSelect:s,className:a,style:r,children:n,placeholder:l="",...c}=e,d=au(aj,s),{onValueNodeHasChildrenChange:o}=d,u=void 0!==n,m=(0,em.e)(t,d.onValueNodeChange);return(0,t4.b)(()=>{o(u)},[o,u]),(0,i.jsx)(ep.WV.span,{...c,ref:m,style:{pointerEvents:"none"},children:a0(d.value)?(0,i.jsx)(i.Fragment,{children:l}):n})});ag.displayName=aj;var av=l.forwardRef((e,t)=>{let{__scopeSelect:s,children:a,...r}=e;return(0,i.jsx)(ep.WV.span,{"aria-hidden":!0,...r,ref:t,children:a||""})});av.displayName="SelectIcon";var ay=e=>(0,i.jsx)(sh,{asChild:!0,...e});ay.displayName="SelectPortal";var aw="SelectContent",aN=l.forwardRef((e,t)=>{let s=au(aw,e.__scopeSelect),[a,r]=l.useState();return((0,t4.b)(()=>{r(new DocumentFragment)},[]),s.open)?(0,i.jsx)(aC,{...e,ref:t}):a?ec.createPortal((0,i.jsx)(ab,{scope:e.__scopeSelect,children:(0,i.jsx)(ar.Slot,{scope:e.__scopeSelect,children:(0,i.jsx)("div",{children:e.children})})}),a):null});aN.displayName=aw;var[ab,ak]=al(aw),a_=(0,sx.Z8)("SelectContent.RemoveScroll"),aC=l.forwardRef((e,t)=>{let{__scopeSelect:s,position:a="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:n,onPointerDownOutside:c,side:d,sideOffset:o,align:u,alignOffset:m,arrowPadding:h,collisionBoundary:x,collisionPadding:p,sticky:f,hideWhenDetached:j,avoidCollisions:g,...v}=e,y=au(aw,s),[w,N]=l.useState(null),[b,k]=l.useState(null),_=(0,em.e)(t,e=>N(e)),[C,S]=l.useState(null),[L,A]=l.useState(null),E=an(s),[P,T]=l.useState(!1),R=l.useRef(!1);l.useEffect(()=>{if(w)return sk(w)},[w]),l.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??eb()),document.body.insertAdjacentElement("beforeend",e[1]??eb()),eN++,()=>{1===eN&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),eN--}},[]);let M=l.useCallback(e=>{let[t,...s]=E().map(e=>e.ref.current),[a]=s.slice(-1),r=document.activeElement;for(let s of e)if(s===r||(s?.scrollIntoView({block:"nearest"}),s===t&&b&&(b.scrollTop=0),s===a&&b&&(b.scrollTop=b.scrollHeight),s?.focus(),document.activeElement!==r))return},[E,b]),z=l.useCallback(()=>M([C,w]),[M,C,w]);l.useEffect(()=>{P&&z()},[P,z]);let{onOpenChange:D,triggerPointerDownPosRef:F}=y;l.useEffect(()=>{if(w){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(F.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(F.current?.y??0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():w.contains(s.target)||D(!1),document.removeEventListener("pointermove",t),F.current=null};return null!==F.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[w,D,F]),l.useEffect(()=>{let e=()=>D(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[D]);let[I,O]=a1(e=>{let t=E().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),a=a2(t,e,s);a&&setTimeout(()=>a.ref.current.focus())}),V=l.useCallback((e,t,s)=>{let a=!R.current&&!s;(void 0!==y.value&&y.value===t||a)&&(S(e),a&&(R.current=!0))},[y.value]),Z=l.useCallback(()=>w?.focus(),[w]),U=l.useCallback((e,t,s)=>{let a=!R.current&&!s;(void 0!==y.value&&y.value===t||a)&&A(e)},[y.value]),$="popper"===a?aL:aS,q=$===aL?{side:d,sideOffset:o,align:u,alignOffset:m,arrowPadding:h,collisionBoundary:x,collisionPadding:p,sticky:f,hideWhenDetached:j,avoidCollisions:g}:{};return(0,i.jsx)(ab,{scope:s,content:w,viewport:b,onViewportChange:k,itemRefCallback:V,selectedItem:C,onItemLeave:Z,itemTextRefCallback:U,focusSelectedItem:z,selectedItemText:L,position:a,isPositioned:P,searchRef:I,children:(0,i.jsx)(ae,{as:a_,allowPinchZoom:!0,children:(0,i.jsx)(eS,{asChild:!0,trapped:y.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,eo.Mj)(r,e=>{y.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,i.jsx)(ev,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:n,onPointerDownOutside:c,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:(0,i.jsx)($,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:e=>e.preventDefault(),...v,...q,onPlaced:()=>T(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:(0,eo.Mj)(v.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||O(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=E().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let s=e.target,a=t.indexOf(s);t=t.slice(a+1)}setTimeout(()=>M(t)),e.preventDefault()}})})})})})})});aC.displayName="SelectContentImpl";var aS=l.forwardRef((e,t)=>{let{__scopeSelect:s,onPlaced:a,...r}=e,n=au(aw,s),c=ak(aw,s),[d,o]=l.useState(null),[u,m]=l.useState(null),h=(0,em.e)(t,e=>m(e)),x=an(s),p=l.useRef(!1),f=l.useRef(!0),{viewport:j,selectedItem:g,selectedItemText:v,focusSelectedItem:y}=c,w=l.useCallback(()=>{if(n.trigger&&n.valueNode&&d&&u&&j&&g&&v){let e=n.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),s=n.valueNode.getBoundingClientRect(),r=v.getBoundingClientRect();if("rtl"!==n.dir){let a=r.left-t.left,n=s.left-a,i=e.left-n,l=e.width+i,c=Math.max(l,t.width),o=ed(n,[10,Math.max(10,window.innerWidth-10-c)]);d.style.minWidth=l+"px",d.style.left=o+"px"}else{let a=t.right-r.right,n=window.innerWidth-s.right-a,i=window.innerWidth-e.right-n,l=e.width+i,c=Math.max(l,t.width),o=ed(n,[10,Math.max(10,window.innerWidth-10-c)]);d.style.minWidth=l+"px",d.style.right=o+"px"}let i=x(),l=window.innerHeight-20,c=j.scrollHeight,o=window.getComputedStyle(u),m=parseInt(o.borderTopWidth,10),h=parseInt(o.paddingTop,10),f=parseInt(o.borderBottomWidth,10),y=m+h+c+parseInt(o.paddingBottom,10)+f,w=Math.min(5*g.offsetHeight,y),N=window.getComputedStyle(j),b=parseInt(N.paddingTop,10),k=parseInt(N.paddingBottom,10),_=e.top+e.height/2-10,C=g.offsetHeight/2,S=m+h+(g.offsetTop+C);if(S<=_){let e=i.length>0&&g===i[i.length-1].ref.current;d.style.bottom="0px";let t=u.clientHeight-j.offsetTop-j.offsetHeight;d.style.height=S+Math.max(l-_,C+(e?k:0)+t+f)+"px"}else{let e=i.length>0&&g===i[0].ref.current;d.style.top="0px";let t=Math.max(_,m+j.offsetTop+(e?b:0)+C);d.style.height=t+(y-S)+"px",j.scrollTop=S-_+j.offsetTop}d.style.margin="10px 0",d.style.minHeight=w+"px",d.style.maxHeight=l+"px",a?.(),requestAnimationFrame(()=>p.current=!0)}},[x,n.trigger,n.valueNode,d,u,j,g,v,n.dir,a]);(0,t4.b)(()=>w(),[w]);let[N,b]=l.useState();(0,t4.b)(()=>{u&&b(window.getComputedStyle(u).zIndex)},[u]);let k=l.useCallback(e=>{e&&!0===f.current&&(w(),y?.(),f.current=!1)},[w,y]);return(0,i.jsx)(aA,{scope:s,contentWrapper:d,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:(0,i.jsx)("div",{ref:o,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:(0,i.jsx)(ep.WV.div,{...r,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});aS.displayName="SelectItemAlignedPosition";var aL=l.forwardRef((e,t)=>{let{__scopeSelect:s,align:a="start",collisionPadding:r=10,...n}=e,l=ad(s);return(0,i.jsx)(si,{...l,...n,ref:t,align:a,collisionPadding:r,style:{boxSizing:"border-box",...n.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});aL.displayName="SelectPopperPosition";var[aA,aE]=al(aw,{}),aP="SelectViewport",aT=l.forwardRef((e,t)=>{let{__scopeSelect:s,nonce:a,...r}=e,n=ak(aP,s),c=aE(aP,s),d=(0,em.e)(t,n.onViewportChange),o=l.useRef(0);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,i.jsx)(ar.Slot,{scope:s,children:(0,i.jsx)(ep.WV.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:(0,eo.Mj)(r.onScroll,e=>{let t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:a}=c;if(a?.current&&s){let e=Math.abs(o.current-t.scrollTop);if(e>0){let a=window.innerHeight-20,r=Math.max(parseFloat(s.style.minHeight),parseFloat(s.style.height));if(r<a){let n=r+e,i=Math.min(a,n),l=n-i;s.style.height=i+"px","0px"===s.style.bottom&&(t.scrollTop=l>0?l:0,s.style.justifyContent="flex-end")}}}o.current=t.scrollTop})})})]})});aT.displayName=aP;var aR="SelectGroup",[aM,az]=al(aR);l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e,r=(0,eR.M)();return(0,i.jsx)(aM,{scope:s,id:r,children:(0,i.jsx)(ep.WV.div,{role:"group","aria-labelledby":r,...a,ref:t})})}).displayName=aR;var aD="SelectLabel",aF=l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e,r=az(aD,s);return(0,i.jsx)(ep.WV.div,{id:r.id,...a,ref:t})});aF.displayName=aD;var aI="SelectItem",[aO,aV]=al(aI),aZ=l.forwardRef((e,t)=>{let{__scopeSelect:s,value:a,disabled:r=!1,textValue:n,...c}=e,d=au(aI,s),o=ak(aI,s),u=d.value===a,[m,h]=l.useState(n??""),[x,p]=l.useState(!1),f=(0,em.e)(t,e=>o.itemRefCallback?.(e,a,r)),j=(0,eR.M)(),g=l.useRef("touch"),v=()=>{r||(d.onValueChange(a),d.onOpenChange(!1))};if(""===a)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,i.jsx)(aO,{scope:s,value:a,disabled:r,textId:j,isSelected:u,onItemTextChange:l.useCallback(e=>{h(t=>t||(e?.textContent??"").trim())},[]),children:(0,i.jsx)(ar.ItemSlot,{scope:s,value:a,disabled:r,textValue:m,children:(0,i.jsx)(ep.WV.div,{role:"option","aria-labelledby":j,"data-highlighted":x?"":void 0,"aria-selected":u&&x,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...c,ref:f,onFocus:(0,eo.Mj)(c.onFocus,()=>p(!0)),onBlur:(0,eo.Mj)(c.onBlur,()=>p(!1)),onClick:(0,eo.Mj)(c.onClick,()=>{"mouse"!==g.current&&v()}),onPointerUp:(0,eo.Mj)(c.onPointerUp,()=>{"mouse"===g.current&&v()}),onPointerDown:(0,eo.Mj)(c.onPointerDown,e=>{g.current=e.pointerType}),onPointerMove:(0,eo.Mj)(c.onPointerMove,e=>{g.current=e.pointerType,r?o.onItemLeave?.():"mouse"===g.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,eo.Mj)(c.onPointerLeave,e=>{e.currentTarget===document.activeElement&&o.onItemLeave?.()}),onKeyDown:(0,eo.Mj)(c.onKeyDown,e=>{o.searchRef?.current!==""&&" "===e.key||(as.includes(e.key)&&v()," "===e.key&&e.preventDefault())})})})})});aZ.displayName=aI;var aU="SelectItemText",a$=l.forwardRef((e,t)=>{let{__scopeSelect:s,className:a,style:r,...n}=e,c=au(aU,s),d=ak(aU,s),o=aV(aU,s),u=ah(aU,s),[m,h]=l.useState(null),x=(0,em.e)(t,e=>h(e),o.onItemTextChange,e=>d.itemTextRefCallback?.(e,o.value,o.disabled)),p=m?.textContent,f=l.useMemo(()=>(0,i.jsx)("option",{value:o.value,disabled:o.disabled,children:p},o.value),[o.disabled,o.value,p]),{onNativeOptionAdd:j,onNativeOptionRemove:g}=u;return(0,t4.b)(()=>(j(f),()=>g(f)),[j,g,f]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ep.WV.span,{id:o.textId,...n,ref:x}),o.isSelected&&c.valueNode&&!c.valueNodeHasChildren?ec.createPortal(n.children,c.valueNode):null]})});a$.displayName=aU;var aq="SelectItemIndicator",aW=l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e;return aV(aq,s).isSelected?(0,i.jsx)(ep.WV.span,{"aria-hidden":!0,...a,ref:t}):null});aW.displayName=aq;var aH="SelectScrollUpButton",aB=l.forwardRef((e,t)=>{let s=ak(aH,e.__scopeSelect),a=aE(aH,e.__scopeSelect),[r,n]=l.useState(!1),c=(0,em.e)(t,a.onScrollButtonChange);return(0,t4.b)(()=>{if(s.viewport&&s.isPositioned){let e=function(){n(t.scrollTop>0)},t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),r?(0,i.jsx)(aK,{...e,ref:c,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});aB.displayName=aH;var aY="SelectScrollDownButton",aG=l.forwardRef((e,t)=>{let s=ak(aY,e.__scopeSelect),a=aE(aY,e.__scopeSelect),[r,n]=l.useState(!1),c=(0,em.e)(t,a.onScrollButtonChange);return(0,t4.b)(()=>{if(s.viewport&&s.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;n(Math.ceil(t.scrollTop)<e)},t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),r?(0,i.jsx)(aK,{...e,ref:c,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});aG.displayName=aY;var aK=l.forwardRef((e,t)=>{let{__scopeSelect:s,onAutoScroll:a,...r}=e,n=ak("SelectScrollButton",s),c=l.useRef(null),d=an(s),o=l.useCallback(()=>{null!==c.current&&(window.clearInterval(c.current),c.current=null)},[]);return l.useEffect(()=>()=>o(),[o]),(0,t4.b)(()=>{let e=d().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[d]),(0,i.jsx)(ep.WV.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:(0,eo.Mj)(r.onPointerDown,()=>{null===c.current&&(c.current=window.setInterval(a,50))}),onPointerMove:(0,eo.Mj)(r.onPointerMove,()=>{n.onItemLeave?.(),null===c.current&&(c.current=window.setInterval(a,50))}),onPointerLeave:(0,eo.Mj)(r.onPointerLeave,()=>{o()})})}),aX=l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e;return(0,i.jsx)(ep.WV.div,{"aria-hidden":!0,...a,ref:t})});aX.displayName="SelectSeparator";var aJ="SelectArrow";l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e,r=ad(s),n=au(aJ,s),l=ak(aJ,s);return n.open&&"popper"===l.position?(0,i.jsx)(sd,{...r,...a,ref:t}):null}).displayName=aJ;var aQ=l.forwardRef(({__scopeSelect:e,value:t,...s},a)=>{let r=l.useRef(null),n=(0,em.e)(a,r),c=(0,sf.D)(t);return l.useEffect(()=>{let e=r.current;if(!e)return;let s=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(c!==t&&s){let a=new Event("change",{bubbles:!0});s.call(e,t),e.dispatchEvent(a)}},[c,t]),(0,i.jsx)(ep.WV.select,{...s,style:{...sj,...s.style},ref:n,defaultValue:t})});function a0(e){return""===e||void 0===e}function a1(e){let t=(0,ef.W)(e),s=l.useRef(""),a=l.useRef(0),r=l.useCallback(e=>{let r=s.current+e;t(r),function e(t){s.current=t,window.clearTimeout(a.current),""!==t&&(a.current=window.setTimeout(()=>e(""),1e3))}(r)},[t]),n=l.useCallback(()=>{s.current="",window.clearTimeout(a.current)},[]);return l.useEffect(()=>()=>window.clearTimeout(a.current),[]),[s,r,n]}function a2(e,t,s){var a;let r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,n=(a=Math.max(s?e.indexOf(s):-1,0),e.map((t,s)=>e[(a+s)%e.length]));1===r.length&&(n=n.filter(e=>e!==s));let i=n.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return i!==s?i:void 0}aQ.displayName="SelectBubbleInput";let a4=(0,f.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),a5=(0,f.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),a3=(0,f.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),a6=l.forwardRef(({className:e,children:t,...s},a)=>(0,i.jsxs)(af,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,i.jsx(av,{asChild:!0,children:i.jsx(a4,{className:"h-4 w-4 opacity-50"})})]}));a6.displayName=af.displayName;let a7=l.forwardRef(({className:e,...t},s)=>i.jsx(aB,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(a5,{className:"h-4 w-4"})}));a7.displayName=aB.displayName;let a8=l.forwardRef(({className:e,...t},s)=>i.jsx(aG,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(a4,{className:"h-4 w-4"})}));a8.displayName=aG.displayName;let a9=l.forwardRef(({className:e,children:t,position:s="popper",...a},r)=>i.jsx(ay,{children:(0,i.jsxs)(aN,{ref:r,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...a,children:[i.jsx(a7,{}),i.jsx(aT,{className:(0,o.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(a8,{})]})}));a9.displayName=aN.displayName,l.forwardRef(({className:e,...t},s)=>i.jsx(aF,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=aF.displayName;let re=l.forwardRef(({className:e,children:t,...s},a)=>(0,i.jsxs)(aZ,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(aW,{children:i.jsx(a3,{className:"h-4 w-4"})})}),i.jsx(a$,{children:t})]}));re.displayName=aZ.displayName,l.forwardRef(({className:e,...t},s)=>i.jsx(aX,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=aX.displayName;let rt=(0,f.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),rs=(0,f.Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),ra=(0,f.Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),rr=(0,f.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),rn=(0,f.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),ri=(0,f.Z)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var rl=s(5594),rc=s(9815),rd="Tabs",[ro,ru]=(0,eh.b)(rd,[rl.Pc]),rm=(0,rl.Pc)(),[rh,rx]=ro(rd),rp=l.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,onValueChange:r,defaultValue:n,orientation:l="horizontal",dir:c,activationMode:d="automatic",...o}=e,u=(0,ex.gm)(c),[m,h]=(0,sp.T)({prop:a,onChange:r,defaultProp:n??"",caller:rd});return(0,i.jsx)(rh,{scope:s,baseId:(0,eR.M)(),value:m,onValueChange:h,orientation:l,dir:u,activationMode:d,children:(0,i.jsx)(ep.WV.div,{dir:u,"data-orientation":l,...o,ref:t})})});rp.displayName=rd;var rf="TabsList",rj=l.forwardRef((e,t)=>{let{__scopeTabs:s,loop:a=!0,...r}=e,n=rx(rf,s),l=rm(s);return(0,i.jsx)(rl.fC,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:a,children:(0,i.jsx)(ep.WV.div,{role:"tablist","aria-orientation":n.orientation,...r,ref:t})})});rj.displayName=rf;var rg="TabsTrigger",rv=l.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,disabled:r=!1,...n}=e,l=rx(rg,s),c=rm(s),d=rN(l.baseId,a),o=rb(l.baseId,a),u=a===l.value;return(0,i.jsx)(rl.ck,{asChild:!0,...c,focusable:!r,active:u,children:(0,i.jsx)(ep.WV.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":o,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:d,...n,ref:t,onMouseDown:(0,eo.Mj)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(a)}),onKeyDown:(0,eo.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(a)}),onFocus:(0,eo.Mj)(e.onFocus,()=>{let e="manual"!==l.activationMode;u||r||!e||l.onValueChange(a)})})})});rv.displayName=rg;var ry="TabsContent",rw=l.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,forceMount:r,children:n,...c}=e,d=rx(ry,s),o=rN(d.baseId,a),u=rb(d.baseId,a),m=a===d.value,h=l.useRef(m);return l.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,i.jsx)(rc.z,{present:r||m,children:({present:s})=>(0,i.jsx)(ep.WV.div,{"data-state":m?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":o,hidden:!s,id:u,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:s&&n})})});function rN(e,t){return`${e}-trigger-${t}`}function rb(e,t){return`${e}-content-${t}`}rw.displayName=ry;let rk=l.forwardRef(({className:e,...t},s)=>i.jsx(rj,{ref:s,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));rk.displayName=rj.displayName;let r_=l.forwardRef(({className:e,...t},s)=>i.jsx(rv,{ref:s,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));r_.displayName=rv.displayName;let rC=l.forwardRef(({className:e,...t},s)=>i.jsx(rw,{ref:s,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));rC.displayName=rw.displayName;let rS=(0,f.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),rL=(0,f.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var rA=s(9734),rE=s(7636);let rP=(0,f.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);function rT({onSuccess:e,onCancel:t}){let[s,a]=(0,l.useState)({firstName:"",lastName:"",email:"",phone:"",companyName:"",businessType:"",companyNumber:"",vatNumber:"",addressLine1:"",addressLine2:"",city:"",postcode:"",country:"United Kingdom",plan:"basic",role:"user",isAdmin:!1,sendWelcomeEmail:!0,password:"",confirmPassword:""}),[r,n]=(0,l.useState)(!1),[o,h]=(0,l.useState)(""),[f,y]=(0,l.useState)(""),[b,k]=(0,l.useState)(!1),[_,S]=(0,l.useState)(!1),[L,E]=(0,l.useState)({}),T=(e,t)=>{a(s=>({...s,[e]:t})),L[e]&&E(t=>({...t,[e]:""}))},z=()=>{let e={};if(s.firstName.trim()||(e.firstName="First name is required"),s.lastName.trim()||(e.lastName="Last name is required"),s.email.trim()?P(s.email)||(e.email="Please enter a valid email address"):e.email="Email is required",s.companyName.trim()||(e.companyName="Company name is required"),s.addressLine1.trim()||(e.addressLine1="Address is required"),s.city.trim()||(e.city="City is required"),s.postcode.trim()||(e.postcode="Postcode is required"),s.password){let t=function(e){let t=[];return e.length<8&&t.push("Password must be at least 8 characters long"),/[A-Z]/.test(e)||t.push("Password must contain at least one uppercase letter"),/[a-z]/.test(e)||t.push("Password must contain at least one lowercase letter"),/\d/.test(e)||t.push("Password must contain at least one number"),/[!@#$%^&*(),.?":{}|<>]/.test(e)||t.push("Password must contain at least one special character"),{valid:0===t.length,errors:t}}(s.password);t.valid||(e.password=t.errors[0])}else e.password="Password is required";return s.password!==s.confirmPassword&&(e.confirmPassword="Passwords do not match"),s.phone&&!/^[\+]?[0-9\s\-\(\)]{10,}$/.test(s.phone)&&(e.phone="Please enter a valid phone number"),E(e),0===Object.keys(e).length},D=async t=>{if(t.preventDefault(),h(""),y(""),!z()){h("Please fix the validation errors below");return}n(!0);try{await A("admin_create_user_started",{email:s.email,companyName:s.companyName,plan:s.plan,isAdmin:s.isAdmin});let t={firstName:s.firstName.trim(),lastName:s.lastName.trim(),email:s.email.trim().toLowerCase(),phone:s.phone.trim(),companyName:s.companyName.trim(),businessType:s.businessType.trim(),companyNumber:s.companyNumber.trim(),vatNumber:s.vatNumber.trim(),address:{line1:s.addressLine1.trim(),line2:s.addressLine2.trim(),city:s.city.trim(),postcode:s.postcode.trim(),country:s.country},plan:s.plan,role:s.role,is_admin:s.isAdmin,send_welcome_email:s.sendWelcomeEmail,password:s.password},a=await C.post("/api/admin/users/create",t);await A("admin_create_user_success",{userId:a.user.id,email:s.email,companyName:s.companyName}),y("User created successfully!"),setTimeout(()=>{e(a.user)},1500)}catch(e){await A("admin_create_user_error",{email:s.email,error_message:R(e),stack:M(e)}),h(R(e)||"Failed to create user")}finally{n(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-background rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(rS,{className:"h-6 w-6 text-primary"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Create New User"})]}),i.jsx(c.z,{variant:"ghost",size:"sm",onClick:t,children:i.jsx(q.Z,{className:"h-4 w-4"})})]}),o&&(0,i.jsxs)(x,{className:"mb-4",variant:"destructive",children:[i.jsx(g,{className:"h-4 w-4"}),i.jsx(p,{children:o})]}),f&&(0,i.jsxs)(x,{className:"mb-4",children:[i.jsx(v,{className:"h-4 w-4"}),i.jsx(p,{children:f})]}),(0,i.jsxs)("form",{onSubmit:D,children:[(0,i.jsxs)(rp,{defaultValue:"personal",className:"space-y-6",children:[(0,i.jsxs)(rk,{className:"grid w-full grid-cols-4",children:[i.jsx(r_,{value:"personal",children:"Personal"}),i.jsx(r_,{value:"business",children:"Business"}),i.jsx(r_,{value:"address",children:"Address"}),i.jsx(r_,{value:"account",children:"Account"})]}),i.jsx(rC,{value:"personal",className:"space-y-4",children:(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:(0,i.jsxs)(d.ll,{className:"flex items-center gap-2",children:[i.jsx(rL,{className:"h-5 w-5"}),"Personal Information"]})}),(0,i.jsxs)(d.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"firstName",children:"First Name *"}),i.jsx(u,{id:"firstName",value:s.firstName,onChange:e=>T("firstName",e.target.value),placeholder:"John",className:L.firstName?"border-red-500":""}),L.firstName&&i.jsx("p",{className:"text-sm text-red-500",children:L.firstName})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"lastName",children:"Last Name *"}),i.jsx(u,{id:"lastName",value:s.lastName,onChange:e=>T("lastName",e.target.value),placeholder:"Doe",className:L.lastName?"border-red-500":""}),L.lastName&&i.jsx("p",{className:"text-sm text-red-500",children:L.lastName})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"email",children:"Email Address *"}),i.jsx(u,{id:"email",type:"email",value:s.email,onChange:e=>T("email",e.target.value),placeholder:"john.doe@company.com",className:L.email?"border-red-500":""}),L.email&&i.jsx("p",{className:"text-sm text-red-500",children:L.email})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"phone",children:"Phone Number"}),i.jsx(u,{id:"phone",type:"tel",value:s.phone,onChange:e=>T("phone",e.target.value),placeholder:"+44 20 7123 4567",className:L.phone?"border-red-500":""}),L.phone&&i.jsx("p",{className:"text-sm text-red-500",children:L.phone})]})]})]})}),i.jsx(rC,{value:"business",className:"space-y-4",children:(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:(0,i.jsxs)(d.ll,{className:"flex items-center gap-2",children:[i.jsx(rA.Z,{className:"h-5 w-5"}),"Business Information"]})}),(0,i.jsxs)(d.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"companyName",children:"Company Name *"}),i.jsx(u,{id:"companyName",value:s.companyName,onChange:e=>T("companyName",e.target.value),placeholder:"Acme Corporation Ltd",className:L.companyName?"border-red-500":""}),L.companyName&&i.jsx("p",{className:"text-sm text-red-500",children:L.companyName})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"businessType",children:"Business Type"}),(0,i.jsxs)(ax,{value:s.businessType,onValueChange:e=>T("businessType",e),children:[i.jsx(a6,{children:i.jsx(ag,{placeholder:"Select business type"})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"limited_company",children:"Limited Company"}),i.jsx(re,{value:"sole_trader",children:"Sole Trader"}),i.jsx(re,{value:"partnership",children:"Partnership"}),i.jsx(re,{value:"llp",children:"Limited Liability Partnership"}),i.jsx(re,{value:"charity",children:"Charity"}),i.jsx(re,{value:"other",children:"Other"})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"companyNumber",children:"Company Number"}),i.jsx(u,{id:"companyNumber",value:s.companyNumber,onChange:e=>T("companyNumber",e.target.value),placeholder:"12345678"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"vatNumber",children:"VAT Number"}),i.jsx(u,{id:"vatNumber",value:s.vatNumber,onChange:e=>T("vatNumber",e.target.value),placeholder:"GB123456789"})]})]})]})]})}),i.jsx(rC,{value:"address",className:"space-y-4",children:(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:(0,i.jsxs)(d.ll,{className:"flex items-center gap-2",children:[i.jsx(rE.Z,{className:"h-5 w-5"}),"Address Information"]})}),(0,i.jsxs)(d.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"addressLine1",children:"Address Line 1 *"}),i.jsx(u,{id:"addressLine1",value:s.addressLine1,onChange:e=>T("addressLine1",e.target.value),placeholder:"123 Business Street",className:L.addressLine1?"border-red-500":""}),L.addressLine1&&i.jsx("p",{className:"text-sm text-red-500",children:L.addressLine1})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"addressLine2",children:"Address Line 2"}),i.jsx(u,{id:"addressLine2",value:s.addressLine2,onChange:e=>T("addressLine2",e.target.value),placeholder:"Suite 100"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"city",children:"City *"}),i.jsx(u,{id:"city",value:s.city,onChange:e=>T("city",e.target.value),placeholder:"London",className:L.city?"border-red-500":""}),L.city&&i.jsx("p",{className:"text-sm text-red-500",children:L.city})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"postcode",children:"Postcode *"}),i.jsx(u,{id:"postcode",value:s.postcode,onChange:e=>T("postcode",e.target.value),placeholder:"SW1A 1AA",className:L.postcode?"border-red-500":""}),L.postcode&&i.jsx("p",{className:"text-sm text-red-500",children:L.postcode})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"country",children:"Country"}),(0,i.jsxs)(ax,{value:s.country,onValueChange:e=>T("country",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"United Kingdom",children:"United Kingdom"}),i.jsx(re,{value:"United States",children:"United States"}),i.jsx(re,{value:"Canada",children:"Canada"}),i.jsx(re,{value:"Australia",children:"Australia"}),i.jsx(re,{value:"Germany",children:"Germany"}),i.jsx(re,{value:"France",children:"France"}),i.jsx(re,{value:"Other",children:"Other"})]})]})]})]})]})]})}),i.jsx(rC,{value:"account",className:"space-y-4",children:(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:(0,i.jsxs)(d.ll,{className:"flex items-center gap-2",children:[i.jsx(j,{className:"h-5 w-5"}),"Account Settings"]})}),(0,i.jsxs)(d.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"plan",children:"Subscription Plan"}),(0,i.jsxs)(ax,{value:s.plan,onValueChange:e=>T("plan",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"basic",children:"Basic - \xa319.99/month"}),i.jsx(re,{value:"premium",children:"Premium - \xa339.99/month"}),i.jsx(re,{value:"professional",children:"Professional - \xa379.99/month"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"role",children:"User Role"}),(0,i.jsxs)(ax,{value:s.role,onValueChange:e=>T("role",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"user",children:"User"}),i.jsx(re,{value:"admin",children:"Admin"}),i.jsx(re,{value:"super_admin",children:"Super Admin"})]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"isAdmin",checked:s.isAdmin,onChange:e=>T("isAdmin",e.target.checked),className:"rounded"}),i.jsx(m._,{htmlFor:"isAdmin",children:"Grant Admin Access"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"sendWelcomeEmail",checked:s.sendWelcomeEmail,onChange:e=>T("sendWelcomeEmail",e.target.checked),className:"rounded"}),i.jsx(m._,{htmlFor:"sendWelcomeEmail",children:"Send Welcome Email"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"password",children:"Password *"}),(0,i.jsxs)("div",{className:"relative",children:[i.jsx(u,{id:"password",type:b?"text":"password",value:s.password,onChange:e=>T("password",e.target.value),placeholder:"Enter secure password",className:L.password?"border-red-500":""}),i.jsx("button",{type:"button",onClick:()=>k(!b),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:b?i.jsx(w,{className:"h-4 w-4"}):i.jsx(N,{className:"h-4 w-4"})})]}),L.password&&i.jsx("p",{className:"text-sm text-red-500",children:L.password}),i.jsx(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*",t="";for(let s=0;s<12;s++)t+=e.charAt(Math.floor(Math.random()*e.length));a(e=>({...e,password:t,confirmPassword:t}))},className:"mt-2",children:"Generate Secure Password"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"confirmPassword",children:"Confirm Password *"}),(0,i.jsxs)("div",{className:"relative",children:[i.jsx(u,{id:"confirmPassword",type:_?"text":"password",value:s.confirmPassword,onChange:e=>T("confirmPassword",e.target.value),placeholder:"Confirm password",className:L.confirmPassword?"border-red-500":""}),i.jsx("button",{type:"button",onClick:()=>S(!_),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:_?i.jsx(w,{className:"h-4 w-4"}):i.jsx(N,{className:"h-4 w-4"})})]}),L.confirmPassword&&i.jsx("p",{className:"text-sm text-red-500",children:L.confirmPassword})]})]})]})})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[i.jsx(c.z,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),i.jsx(c.z,{type:"submit",disabled:r,children:r?(0,i.jsxs)(i.Fragment,{children:[i.jsx(rP,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating User..."]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx(rS,{className:"h-4 w-4 mr-2"}),"Create User"]})})]})]})]})})})}function rR({user:e,onSuccess:t,onCancel:s}){let[a,r]=(0,l.useState)({firstName:e.firstName||e.name?.split(" ")[0]||"",lastName:e.lastName||e.name?.split(" ")[1]||"",email:e.email||"",phone:e.phone||"",companyName:e.companyName||"",businessType:e.businessType||"",companyNumber:e.companyNumber||"",vatNumber:e.vatNumber||"",addressLine1:e.address?.line1||"",addressLine2:e.address?.line2||"",city:e.address?.city||"",postcode:e.address?.postcode||"",country:e.address?.country||"United Kingdom",plan:e.plan||"basic",role:e.role||"user",isAdmin:e.is_admin||!1,status:e.status||"active",kycStatus:e.kyc_status||"pending"}),[n,o]=(0,l.useState)(!1),[h,f]=(0,l.useState)(""),[y,w]=(0,l.useState)(""),[N,k]=(0,l.useState)({}),_=(e,t)=>{r(s=>({...s,[e]:t})),N[e]&&k(t=>({...t,[e]:""}))},S=()=>{let e={};return a.firstName.trim()||(e.firstName="First name is required"),a.lastName.trim()||(e.lastName="Last name is required"),a.email.trim()?P(a.email)||(e.email="Please enter a valid email address"):e.email="Email is required",a.companyName.trim()||(e.companyName="Company name is required"),a.addressLine1.trim()||(e.addressLine1="Address is required"),a.city.trim()||(e.city="City is required"),a.postcode.trim()||(e.postcode="Postcode is required"),a.phone&&!/^[\+]?[0-9\s\-\(\)]{10,}$/.test(a.phone)&&(e.phone="Please enter a valid phone number"),k(e),0===Object.keys(e).length},L=async s=>{if(s.preventDefault(),f(""),w(""),!S()){f("Please fix the validation errors below");return}o(!0);try{await A("admin_edit_user_started",{userId:e.id,email:a.email,changes:a});let s={firstName:a.firstName.trim(),lastName:a.lastName.trim(),email:a.email.trim().toLowerCase(),phone:a.phone.trim(),companyName:a.companyName.trim(),businessType:a.businessType.trim(),companyNumber:a.companyNumber.trim(),vatNumber:a.vatNumber.trim(),address:{line1:a.addressLine1.trim(),line2:a.addressLine2.trim(),city:a.city.trim(),postcode:a.postcode.trim(),country:a.country},plan:a.plan,role:a.role,is_admin:a.isAdmin,status:a.status,kyc_status:a.kycStatus},r=await C.put(`/api/admin/users/${e.id}`,s);await A("admin_edit_user_success",{userId:e.id,email:a.email,changes:a}),w("User updated successfully!"),setTimeout(()=>{t(r.user)},1500)}catch(t){await A("admin_edit_user_error",{userId:e.id,email:a.email,error_message:R(t),stack:M(t)}),f(R(t)||"Failed to update user")}finally{o(!1)}},E=async()=>{o(!0);try{await A("admin_suspend_user",{userId:e.id}),await C.put(`/api/admin/users/${e.id}/suspend`),w("User suspended successfully!"),setTimeout(()=>{t({...e,status:"suspended"})},1500)}catch(e){f(R(e)||"Failed to suspend user")}finally{o(!1)}},T=async()=>{o(!0);try{await A("admin_activate_user",{userId:e.id}),await C.put(`/api/admin/users/${e.id}/activate`),w("User activated successfully!"),setTimeout(()=>{t({...e,status:"active"})},1500)}catch(e){f(R(e)||"Failed to activate user")}finally{o(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-background rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(rL,{className:"h-6 w-6 text-primary"}),(0,i.jsxs)("h2",{className:"text-2xl font-bold",children:["Edit User: ",e.name]})]}),i.jsx(c.z,{variant:"ghost",size:"sm",onClick:s,children:i.jsx(q.Z,{className:"h-4 w-4"})})]}),h&&(0,i.jsxs)(x,{className:"mb-4",variant:"destructive",children:[i.jsx(g,{className:"h-4 w-4"}),i.jsx(p,{children:h})]}),y&&(0,i.jsxs)(x,{className:"mb-4",children:[i.jsx(v,{className:"h-4 w-4"}),i.jsx(p,{children:y})]}),(0,i.jsxs)("form",{onSubmit:L,children:[(0,i.jsxs)(rp,{defaultValue:"personal",className:"space-y-6",children:[(0,i.jsxs)(rk,{className:"grid w-full grid-cols-4",children:[i.jsx(r_,{value:"personal",children:"Personal"}),i.jsx(r_,{value:"business",children:"Business"}),i.jsx(r_,{value:"address",children:"Address"}),i.jsx(r_,{value:"account",children:"Account"})]}),i.jsx(rC,{value:"personal",className:"space-y-4",children:(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:(0,i.jsxs)(d.ll,{className:"flex items-center gap-2",children:[i.jsx(rL,{className:"h-5 w-5"}),"Personal Information"]})}),(0,i.jsxs)(d.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"firstName",children:"First Name *"}),i.jsx(u,{id:"firstName",value:a.firstName,onChange:e=>_("firstName",e.target.value),placeholder:"John",className:N.firstName?"border-red-500":""}),N.firstName&&i.jsx("p",{className:"text-sm text-red-500",children:N.firstName})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"lastName",children:"Last Name *"}),i.jsx(u,{id:"lastName",value:a.lastName,onChange:e=>_("lastName",e.target.value),placeholder:"Doe",className:N.lastName?"border-red-500":""}),N.lastName&&i.jsx("p",{className:"text-sm text-red-500",children:N.lastName})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"email",children:"Email Address *"}),i.jsx(u,{id:"email",type:"email",value:a.email,onChange:e=>_("email",e.target.value),placeholder:"john.doe@company.com",className:N.email?"border-red-500":""}),N.email&&i.jsx("p",{className:"text-sm text-red-500",children:N.email})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"phone",children:"Phone Number"}),i.jsx(u,{id:"phone",type:"tel",value:a.phone,onChange:e=>_("phone",e.target.value),placeholder:"+44 20 7123 4567",className:N.phone?"border-red-500":""}),N.phone&&i.jsx("p",{className:"text-sm text-red-500",children:N.phone})]})]})]})}),i.jsx(rC,{value:"business",className:"space-y-4",children:(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:(0,i.jsxs)(d.ll,{className:"flex items-center gap-2",children:[i.jsx(rA.Z,{className:"h-5 w-5"}),"Business Information"]})}),(0,i.jsxs)(d.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"companyName",children:"Company Name *"}),i.jsx(u,{id:"companyName",value:a.companyName,onChange:e=>_("companyName",e.target.value),placeholder:"Acme Corporation Ltd",className:N.companyName?"border-red-500":""}),N.companyName&&i.jsx("p",{className:"text-sm text-red-500",children:N.companyName})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"businessType",children:"Business Type"}),(0,i.jsxs)(ax,{value:a.businessType,onValueChange:e=>_("businessType",e),children:[i.jsx(a6,{children:i.jsx(ag,{placeholder:"Select business type"})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"limited_company",children:"Limited Company"}),i.jsx(re,{value:"sole_trader",children:"Sole Trader"}),i.jsx(re,{value:"partnership",children:"Partnership"}),i.jsx(re,{value:"llp",children:"Limited Liability Partnership"}),i.jsx(re,{value:"charity",children:"Charity"}),i.jsx(re,{value:"other",children:"Other"})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"companyNumber",children:"Company Number"}),i.jsx(u,{id:"companyNumber",value:a.companyNumber,onChange:e=>_("companyNumber",e.target.value),placeholder:"12345678"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"vatNumber",children:"VAT Number"}),i.jsx(u,{id:"vatNumber",value:a.vatNumber,onChange:e=>_("vatNumber",e.target.value),placeholder:"GB123456789"})]})]})]})]})}),i.jsx(rC,{value:"address",className:"space-y-4",children:(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:(0,i.jsxs)(d.ll,{className:"flex items-center gap-2",children:[i.jsx(rE.Z,{className:"h-5 w-5"}),"Address Information"]})}),(0,i.jsxs)(d.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"addressLine1",children:"Address Line 1 *"}),i.jsx(u,{id:"addressLine1",value:a.addressLine1,onChange:e=>_("addressLine1",e.target.value),placeholder:"123 Business Street",className:N.addressLine1?"border-red-500":""}),N.addressLine1&&i.jsx("p",{className:"text-sm text-red-500",children:N.addressLine1})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"addressLine2",children:"Address Line 2"}),i.jsx(u,{id:"addressLine2",value:a.addressLine2,onChange:e=>_("addressLine2",e.target.value),placeholder:"Suite 100"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"city",children:"City *"}),i.jsx(u,{id:"city",value:a.city,onChange:e=>_("city",e.target.value),placeholder:"London",className:N.city?"border-red-500":""}),N.city&&i.jsx("p",{className:"text-sm text-red-500",children:N.city})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"postcode",children:"Postcode *"}),i.jsx(u,{id:"postcode",value:a.postcode,onChange:e=>_("postcode",e.target.value),placeholder:"SW1A 1AA",className:N.postcode?"border-red-500":""}),N.postcode&&i.jsx("p",{className:"text-sm text-red-500",children:N.postcode})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"country",children:"Country"}),(0,i.jsxs)(ax,{value:a.country,onValueChange:e=>_("country",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"United Kingdom",children:"United Kingdom"}),i.jsx(re,{value:"United States",children:"United States"}),i.jsx(re,{value:"Canada",children:"Canada"}),i.jsx(re,{value:"Australia",children:"Australia"}),i.jsx(re,{value:"Germany",children:"Germany"}),i.jsx(re,{value:"France",children:"France"}),i.jsx(re,{value:"Other",children:"Other"})]})]})]})]})]})]})}),i.jsx(rC,{value:"account",className:"space-y-4",children:(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:(0,i.jsxs)(d.ll,{className:"flex items-center gap-2",children:[i.jsx(j,{className:"h-5 w-5"}),"Account Settings"]})}),(0,i.jsxs)(d.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"plan",children:"Subscription Plan"}),(0,i.jsxs)(ax,{value:a.plan,onValueChange:e=>_("plan",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"basic",children:"Basic - \xa319.99/month"}),i.jsx(re,{value:"premium",children:"Premium - \xa339.99/month"}),i.jsx(re,{value:"professional",children:"Professional - \xa379.99/month"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"role",children:"User Role"}),(0,i.jsxs)(ax,{value:a.role,onValueChange:e=>_("role",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"user",children:"User"}),i.jsx(re,{value:"admin",children:"Admin"}),i.jsx(re,{value:"super_admin",children:"Super Admin"})]})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"status",children:"Account Status"}),(0,i.jsxs)(ax,{value:a.status,onValueChange:e=>_("status",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"active",children:"Active"}),i.jsx(re,{value:"suspended",children:"Suspended"}),i.jsx(re,{value:"pending",children:"Pending"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"kycStatus",children:"KYC Status"}),(0,i.jsxs)(ax,{value:a.kycStatus,onValueChange:e=>_("kycStatus",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"pending",children:"Pending"}),i.jsx(re,{value:"approved",children:"Approved"}),i.jsx(re,{value:"rejected",children:"Rejected"})]})]})]})]}),i.jsx("div",{className:"space-y-4",children:(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"isAdmin",checked:a.isAdmin,onChange:e=>_("isAdmin",e.target.checked),className:"rounded"}),i.jsx(m._,{htmlFor:"isAdmin",children:"Grant Admin Access"})]})})]})]})})]}),(0,i.jsxs)("div",{className:"flex justify-between mt-6",children:[i.jsx("div",{className:"flex gap-2",children:"active"===a.status?(0,i.jsxs)(c.z,{type:"button",variant:"destructive",onClick:E,disabled:n,children:[i.jsx(rs,{className:"h-4 w-4 mr-2"}),"Suspend User"]}):(0,i.jsxs)(c.z,{type:"button",onClick:T,disabled:n,children:[i.jsx(ra,{className:"h-4 w-4 mr-2"}),"Activate User"]})}),(0,i.jsxs)("div",{className:"flex gap-3",children:[i.jsx(c.z,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),i.jsx(c.z,{type:"submit",disabled:n,children:n?(0,i.jsxs)(i.Fragment,{children:[i.jsx(b,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx(rP,{className:"h-4 w-4 mr-2"}),"Update User"]})})]})]})]})]})})})}function rM({onNavigate:e}){let[t,s]=(0,l.useState)(""),[a,r]=(0,l.useState)("all"),[n,o]=(0,l.useState)("all"),[m,h]=(0,l.useState)("all"),[x,p]=(0,l.useState)(!1),[f,j]=(0,l.useState)([]),[g,y]=(0,l.useState)(!1),[w,b]=(0,l.useState)(!1),[k,_]=(0,l.useState)(null),{data:S,isLoading:L,refetch:E}=T("/api/admin/users"),{data:P,isLoading:z}=T("/api/admin/users/stats"),D=S||[],F=D.filter(e=>{let s=e.name.toLowerCase().includes(t.toLowerCase())||e.email.toLowerCase().includes(t.toLowerCase())||e.companyName&&e.companyName.toLowerCase().includes(t.toLowerCase()),r="all"===a||e.status===a,i="all"===n||e.plan===n,l="all"===m||e.kyc===m;return s&&r&&i&&l}),I=async()=>{p(!0);try{await A("admin_export_users",{filters:{statusFilter:a,planFilter:n,kycFilter:m,searchTerm:t}});let e=await C.get(`/api/admin/users/export?status=${a}&plan=${n}&kyc=${m}&search=${t}`),s=new Blob([e.data],{type:"application/json"}),r=window.URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download=`users-export-${new Date().toISOString().split("T")[0]}.json`,i.click()}catch(e){await A("admin_export_users_error",{error_message:R(e),stack:M(e)})}finally{p(!1)}},O=async()=>{try{await A("admin_add_user_initiated"),y(!0)}catch(e){await A("admin_add_user_error",{error_message:R(e),stack:M(e)})}},V=async e=>{try{await A("admin_user_created_success",{userId:e.id,email:e.email}),y(!1),E()}catch(e){await A("admin_user_created_error",{error_message:R(e),stack:M(e)})}},Z=async t=>{try{await A("admin_view_user",{userId:t}),e?e("user-detail",{userId:t}):window.open(`/admin/users/${t}`,"_blank")}catch(e){await A("admin_view_user_error",{userId:t,error_message:R(e),stack:M(e)})}},U=async e=>{try{await A("admin_edit_user_initiated",{userId:e});let t=D.find(t=>t.id===e);t&&(_(t),b(!0))}catch(t){await A("admin_edit_user_error",{userId:e,error_message:R(t),stack:M(t)})}},$=async e=>{try{await A("admin_user_updated_success",{userId:e.id,email:e.email}),b(!1),_(null),E()}catch(e){await A("admin_user_updated_error",{error_message:R(e),stack:M(e)})}},q=async(e,t)=>{p(!0);try{await A("admin_update_kyc_status",{userId:e,newStatus:t}),await C.put(`/api/admin/users/${e}/kyc-status`,{status:t}),E()}catch(s){await A("admin_update_kyc_status_error",{userId:e,newStatus:t,error_message:R(s),stack:M(s)})}finally{p(!1)}},W=async e=>{p(!0);try{await A("admin_suspend_user",{userId:e}),await C.put(`/api/admin/users/${e}/suspend`),E()}catch(t){await A("admin_suspend_user_error",{userId:e,error_message:R(t),stack:M(t)})}finally{p(!1)}},B=async e=>{p(!0);try{await A("admin_activate_user",{userId:e}),await C.put(`/api/admin/users/${e}/activate`),E()}catch(t){await A("admin_activate_user_error",{userId:e,error_message:R(t),stack:M(t)})}finally{p(!1)}},Y=async e=>{if(0!==f.length){p(!0);try{await A("admin_bulk_action",{action:e,userIds:f}),await C.post(`/api/admin/users/bulk/${e}`,{userIds:f}),j([]),E()}catch(t){await A("admin_bulk_action_error",{action:e,userIds:f,error_message:R(t),stack:M(t)})}finally{p(!1)}}},K=e=>{j(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},X=()=>{j([])};return(0,i.jsxs)("div",{className:"space-y-6",children:[g&&i.jsx(rT,{onSuccess:V,onCancel:()=>{y(!1)}}),w&&k&&i.jsx(rR,{user:k,onSuccess:$,onCancel:()=>{b(!1),_(null)}}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"User Management"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage user accounts, KYC status, and subscriptions"}),P&&(0,i.jsxs)("div",{className:"flex gap-4 mt-2 text-sm text-muted-foreground",children:[(0,i.jsxs)("span",{children:["Total: ",P?.total||0]}),(0,i.jsxs)("span",{children:["Active: ",P?.active||0]}),(0,i.jsxs)("span",{children:["Pending KYC: ",P?.pendingKyc||0]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:I,disabled:x,children:[i.jsx(H,{className:"h-4 w-4"}),"Export Users"]}),(0,i.jsxs)(c.z,{className:"gap-2",onClick:O,disabled:x,children:[i.jsx(rt,{className:"h-4 w-4"}),"Add User"]})]})]}),f.length>0&&i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"text-sm font-medium",children:[f.length," users selected"]}),i.jsx(c.z,{variant:"ghost",size:"sm",onClick:X,children:"Clear"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>Y("suspend"),disabled:x,children:[i.jsx(rs,{className:"h-4 w-4"}),"Suspend"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>Y("activate"),disabled:x,children:[i.jsx(ra,{className:"h-4 w-4"}),"Activate"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>Y("export"),disabled:x,children:[i.jsx(H,{className:"h-4 w-4"}),"Export Selected"]})]})]})})}),i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx("div",{className:"flex-1",children:(0,i.jsxs)("div",{className:"relative",children:[i.jsx(rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(u,{placeholder:"Search users by name, email, or company...",value:t,onChange:e=>s(e.target.value),className:"pl-10"})]})}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(ax,{value:a,onValueChange:r,children:[i.jsx(a6,{className:"w-[140px]",children:i.jsx(ag,{placeholder:"Status"})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"all",children:"All Status"}),i.jsx(re,{value:"active",children:"Active"}),i.jsx(re,{value:"suspended",children:"Suspended"}),i.jsx(re,{value:"pending",children:"Pending"})]})]}),(0,i.jsxs)(ax,{value:n,onValueChange:o,children:[i.jsx(a6,{className:"w-[140px]",children:i.jsx(ag,{placeholder:"Plan"})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"all",children:"All Plans"}),i.jsx(re,{value:"basic",children:"Basic"}),i.jsx(re,{value:"premium",children:"Premium"}),i.jsx(re,{value:"professional",children:"Professional"})]})]}),(0,i.jsxs)(ax,{value:m,onValueChange:h,children:[i.jsx(a6,{className:"w-[140px]",children:i.jsx(ag,{placeholder:"KYC"})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"all",children:"All KYC"}),i.jsx(re,{value:"approved",children:"Approved"}),i.jsx(re,{value:"pending",children:"Pending"}),i.jsx(re,{value:"rejected",children:"Rejected"})]})]})]})]})})}),i.jsx("div",{className:"hidden lg:block",children:i.jsx(d.Zb,{children:(0,i.jsxs)(es,{children:[i.jsx(ea,{children:(0,i.jsxs)(en,{children:[i.jsx(ei,{className:"w-12",children:i.jsx("input",{type:"checkbox",checked:f.length===F.length&&F.length>0,onChange:f.length===F.length?X:()=>{j(F.map(e=>e.id))},className:"rounded"})}),i.jsx(ei,{children:"User"}),i.jsx(ei,{children:"KYC Status"}),i.jsx(ei,{children:"Plan"}),i.jsx(ei,{children:"Status"}),i.jsx(ei,{children:"Mail Count"}),i.jsx(ei,{children:"Total Spent"}),i.jsx(ei,{children:"Last Login"}),i.jsx(ei,{children:"Actions"})]})}),i.jsx(er,{children:0===F.length?i.jsx(en,{children:i.jsx(el,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No users found"})}):F.map(e=>(0,i.jsxs)(en,{children:[i.jsx(el,{children:i.jsx("input",{type:"checkbox",checked:f.includes(e.id),onChange:()=>K(e.id),className:"rounded"})}),i.jsx(el,{children:(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium",children:e.name}),i.jsx("div",{className:"text-sm text-muted-foreground",children:e.email}),e.companyName&&i.jsx("div",{className:"text-xs text-muted-foreground",children:e.companyName}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Joined ",e.joined]})]})}),i.jsx(el,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(G.C,{variant:"approved"===e.kyc?"default":"pending"===e.kyc?"secondary":"destructive",children:e.kyc}),"pending"===e.kyc&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>q(e.id,"approved"),disabled:x,children:i.jsx(v,{className:"h-3 w-3"})})]})}),i.jsx(el,{children:i.jsx(G.C,{variant:"outline",className:"capitalize",children:e.plan})}),i.jsx(el,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(G.C,{variant:"active"===e.status?"default":"destructive",children:e.status}),"suspended"===e.status?i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>B(e.id),disabled:x,children:i.jsx(ra,{className:"h-3 w-3"})}):i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>W(e.id),disabled:x,children:i.jsx(rs,{className:"h-3 w-3"})})]})}),i.jsx(el,{children:e.mailCount}),i.jsx(el,{children:e.totalSpent}),i.jsx(el,{className:"text-sm text-muted-foreground",children:e.lastLogin}),i.jsx(el,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>Z(e.id),children:i.jsx(N,{className:"h-4 w-4"})}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>U(e.id),children:i.jsx(rn,{className:"h-4 w-4"})}),i.jsx(c.z,{size:"sm",variant:"outline",children:i.jsx(ri,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),i.jsx("div",{className:"lg:hidden space-y-4",children:F.map(e=>i.jsx(d.Zb,{children:(0,i.jsxs)(d.aY,{className:"p-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",checked:f.includes(e.id),onChange:()=>K(e.id),className:"rounded mt-1"}),(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"font-medium",children:e.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.email}),e.companyName&&i.jsx("p",{className:"text-xs text-muted-foreground",children:e.companyName}),(0,i.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Joined ",e.joined]})]})]}),(0,i.jsxs)("div",{className:"text-right",children:[i.jsx(G.C,{variant:"approved"===e.kyc?"default":"secondary",className:"mb-1",children:e.kyc}),i.jsx("br",{}),i.jsx(G.C,{variant:"active"===e.status?"default":"destructive",children:e.status})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Plan:"})," ",i.jsx("span",{className:"capitalize",children:e.plan})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Mail:"})," ",e.mailCount]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Spent:"})," ",e.totalSpent]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Login:"})," ",e.lastLogin]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[i.jsx(c.z,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>Z(e.id),children:"View"}),i.jsx(c.z,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>U(e.id),children:"Edit"}),i.jsx(c.z,{size:"sm",variant:"outline",className:"flex-1",children:"Actions"})]})]})},e.id))})]})}var rz=s(8998);let rD=(0,f.Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),rF=(0,f.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function rI({}){let[e,t]=(0,l.useState)("received"),[s,a]=(0,l.useState)(""),[r,n]=(0,l.useState)("all"),[o,m]=(0,l.useState)("all"),[h,x]=(0,l.useState)(!1),[p,f]=(0,l.useState)([]),{data:j,isLoading:g,refetch:y}=T("/api/admin/mail-items"),{data:w,isLoading:N}=T("/api/admin/mail-items/stats"),b=(j||[]).filter(t=>{let a=t.userName.toLowerCase().includes(s.toLowerCase())||t.sender.toLowerCase().includes(s.toLowerCase())||t.subject.toLowerCase().includes(s.toLowerCase()),n="all"===r||t.status===r,i="all"===o||t.tag===o,l="all"===e||t.status===e;return a&&n&&i&&l}),k=async()=>{try{await A("admin_add_mail_item"),window.open("/admin/mail/add","_blank")}catch(e){await A("admin_add_mail_item_error",{error_message:R(e),stack:M(e)})}},_=async e=>{try{await A("admin_view_mail_item",{itemId:e}),window.open(`/admin/mail/${e}`,"_blank")}catch(t){await A("admin_view_mail_item_error",{itemId:e,error_message:R(t),stack:M(t)})}},S=async e=>{try{await A("admin_edit_mail_item",{itemId:e}),window.open(`/admin/mail/${e}/edit`,"_blank")}catch(t){await A("admin_edit_mail_item_error",{itemId:e,error_message:R(t),stack:M(t)})}},L=async e=>{x(!0);try{await A("admin_process_mail_item",{itemId:e}),await C.post(`/api/admin/mail-items/${e}/process`),y()}catch(t){await A("admin_process_mail_item_error",{itemId:e,error_message:R(t),stack:M(t)})}finally{x(!1)}},E=async(e,t)=>{x(!0);try{await A("admin_tag_mail_item",{itemId:e,tag:t}),await C.post(`/api/admin/mail-items/${e}/tag`,{tag:t}),y()}catch(s){await A("admin_tag_mail_item_error",{itemId:e,tag:t,error_message:R(s),stack:M(s)})}finally{x(!1)}},P=async e=>{x(!0);try{await A("admin_forward_mail_item",{itemId:e}),await C.post(`/api/admin/mail-items/${e}/forward`),y()}catch(t){await A("admin_forward_mail_item_error",{itemId:e,error_message:R(t),stack:M(t)})}finally{x(!1)}},z=async e=>{x(!0);try{await A("admin_delete_mail_item",{itemId:e}),await C.delete(`/api/admin/mail-items/${e}`),y()}catch(t){await A("admin_delete_mail_item_error",{itemId:e,error_message:R(t),stack:M(t)})}finally{x(!1)}},D=async e=>{if(0!==p.length){x(!0);try{await A("admin_bulk_mail_action",{action:e,itemIds:p}),await C.post(`/api/admin/mail-items/bulk/${e}`,{itemIds:p}),f([]),y()}catch(t){await A("admin_bulk_mail_action_error",{action:e,itemIds:p,error_message:R(t),stack:M(t)})}finally{x(!1)}}},F=async()=>{x(!0);try{await A("admin_export_mail",{filters:{statusFilter:r,tagFilter:o,searchTerm:s,tab:e}});let t=await C.get(`/api/admin/mail-items/export?status=${r}&tag=${o}&search=${s}&tab=${e}`),a=new Blob([t.data],{type:"application/json"}),n=window.URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download=`mail-items-export-${new Date().toISOString().split("T")[0]}.json`,i.click()}catch(e){await A("admin_export_mail_error",{error_message:R(e),stack:M(e)})}finally{x(!1)}},I=e=>{f(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Mail Management"}),i.jsx("p",{className:"text-muted-foreground",children:"Process and manage incoming mail and packages"}),w&&(0,i.jsxs)("div",{className:"flex gap-4 mt-2 text-sm text-muted-foreground",children:[(0,i.jsxs)("span",{children:["Total: ",w?.total||0]}),(0,i.jsxs)("span",{children:["Received: ",w?.received||0]}),(0,i.jsxs)("span",{children:["Pending: ",w?.pending||0]}),(0,i.jsxs)("span",{children:["Processed: ",w?.processed||0]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:F,disabled:h,children:[i.jsx(H,{className:"h-4 w-4"}),"Export"]}),(0,i.jsxs)(c.z,{className:"gap-2",onClick:k,disabled:h,children:[i.jsx(rt,{className:"h-4 w-4"}),"Add Item"]})]})]}),p.length>0&&i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"text-sm font-medium",children:[p.length," items selected"]}),i.jsx(c.z,{variant:"ghost",size:"sm",onClick:()=>{f([])},children:"Clear"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>D("process"),disabled:h,children:[i.jsx(v,{className:"h-4 w-4"}),"Process"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>D("tag"),disabled:h,children:[i.jsx(rD,{className:"h-4 w-4"}),"Tag"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>D("forward"),disabled:h,children:[i.jsx(O,{className:"h-4 w-4"}),"Forward"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>D("delete"),disabled:h,children:[i.jsx(rF,{className:"h-4 w-4"}),"Delete"]})]})]})})}),i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx("div",{className:"flex-1",children:(0,i.jsxs)("div",{className:"relative",children:[i.jsx(rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(u,{placeholder:"Search mail items...",value:s,onChange:e=>a(e.target.value),className:"pl-10"})]})}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(ax,{value:r,onValueChange:n,children:[i.jsx(a6,{className:"w-[140px]",children:i.jsx(ag,{placeholder:"Status"})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"all",children:"All Status"}),i.jsx(re,{value:"received",children:"Received"}),i.jsx(re,{value:"pending",children:"Pending"}),i.jsx(re,{value:"processed",children:"Processed"}),i.jsx(re,{value:"forwarded",children:"Forwarded"})]})]}),(0,i.jsxs)(ax,{value:o,onValueChange:m,children:[i.jsx(a6,{className:"w-[140px]",children:i.jsx(ag,{placeholder:"Tag"})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"all",children:"All Tags"}),i.jsx(re,{value:"Government",children:"Government"}),i.jsx(re,{value:"Financial",children:"Financial"}),i.jsx(re,{value:"Logistics",children:"Logistics"}),i.jsx(re,{value:"Legal",children:"Legal"}),i.jsx(re,{value:"Personal",children:"Personal"})]})]})]})]})})}),(0,i.jsxs)(rp,{value:e,onValueChange:t,children:[(0,i.jsxs)(rk,{className:"grid w-full grid-cols-4",children:[i.jsx(r_,{value:"received",children:"Received"}),i.jsx(r_,{value:"pending",children:"Pending"}),i.jsx(r_,{value:"processed",children:"Processed"}),i.jsx(r_,{value:"forwarded",children:"Forwarded"})]}),i.jsx(rC,{value:"received",className:"space-y-4",children:i.jsx(rO,{items:b.filter(e=>"received"===e.status),onView:_,onEdit:S,onProcess:L,onTag:E,onForward:P,onDelete:z,onSelect:I,selectedItems:p,loading:h})}),i.jsx(rC,{value:"pending",className:"space-y-4",children:i.jsx(rO,{items:b.filter(e=>"pending"===e.status),onView:_,onEdit:S,onProcess:L,onTag:E,onForward:P,onDelete:z,onSelect:I,selectedItems:p,loading:h})}),i.jsx(rC,{value:"processed",className:"space-y-4",children:i.jsx(rO,{items:b.filter(e=>"processed"===e.status),onView:_,onEdit:S,onProcess:L,onTag:E,onForward:P,onDelete:z,onSelect:I,selectedItems:p,loading:h})}),i.jsx(rC,{value:"forwarded",className:"space-y-4",children:i.jsx(rO,{items:b.filter(e=>"forwarded"===e.status),onView:_,onEdit:S,onProcess:L,onTag:E,onForward:P,onDelete:z,onSelect:I,selectedItems:p,loading:h})})]})]})}function rO({items:e,onView:t,onEdit:s,onProcess:a,onTag:r,onForward:n,onDelete:l,onSelect:o,selectedItems:u,loading:m}){let h=e=>{switch(e){case"received":return i.jsx(I.Z,{className:"h-4 w-4 text-blue-500"});case"pending":return i.jsx(rz.Z,{className:"h-4 w-4 text-yellow-500"});case"processed":return i.jsx(v,{className:"h-4 w-4 text-green-500"});case"forwarded":return i.jsx(O,{className:"h-4 w-4 text-purple-500"});default:return i.jsx($,{className:"h-4 w-4 text-gray-500"})}};return i.jsx(d.Zb,{children:(0,i.jsxs)(es,{children:[i.jsx(ea,{children:(0,i.jsxs)(en,{children:[i.jsx(ei,{className:"w-12",children:i.jsx("input",{type:"checkbox",checked:e.length>0&&e.every(e=>u.includes(e.id)),onChange:e.length>0&&e.every(e=>u.includes(e.id))?()=>{e.forEach(e=>{u.includes(e.id)&&o(e.id)})}:()=>{e.forEach(e=>{u.includes(e.id)||o(e.id)})},className:"rounded"})}),i.jsx(ei,{children:"ID"}),i.jsx(ei,{children:"User"}),i.jsx(ei,{children:"Sender"}),i.jsx(ei,{children:"Subject"}),i.jsx(ei,{children:"Tag"}),i.jsx(ei,{children:"Status"}),i.jsx(ei,{children:"Received"}),i.jsx(ei,{children:"Actions"})]})}),i.jsx(er,{children:0===e.length?i.jsx(en,{children:i.jsx(el,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No mail items found"})}):e.map(e=>(0,i.jsxs)(en,{children:[i.jsx(el,{children:i.jsx("input",{type:"checkbox",checked:u.includes(e.id),onChange:()=>o(e.id),className:"rounded"})}),(0,i.jsxs)(el,{children:["#",e.id]}),i.jsx(el,{children:(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium",children:e.userName}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:["ID: ",e.userId]})]})}),i.jsx(el,{children:e.sender}),i.jsx(el,{children:e.subject}),i.jsx(el,{children:i.jsx(G.C,{variant:"outline",children:e.tag})}),i.jsx(el,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[h(e.status),i.jsx(G.C,{variant:"outline",className:"capitalize",children:e.status})]})}),i.jsx(el,{className:"text-muted-foreground",children:e.received}),i.jsx(el,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>t(e.id),children:i.jsx(N,{className:"h-4 w-4"})}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>s(e.id),children:i.jsx(rn,{className:"h-4 w-4"})}),"received"===e.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>a(e.id),disabled:m,children:i.jsx(v,{className:"h-4 w-4"})}),"processed"===e.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>n(e.id),disabled:m,children:i.jsx(O,{className:"h-4 w-4"})}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>l(e.id),disabled:m,children:i.jsx(rF,{className:"h-4 w-4"})})]})})]},e.id))})]})})}let rV=(0,f.Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),rZ=(0,f.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),rU=(0,f.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);function r$({}){let[e,t]=(0,l.useState)(""),[s,a]=(0,l.useState)("all"),[r,n]=(0,l.useState)("all"),[o,m]=(0,l.useState)(!1),[h,x]=(0,l.useState)([]),{data:p,isLoading:f,refetch:j}=T("/api/admin/forwarding-requests"),{data:g,isLoading:y}=T("/api/admin/forwarding-requests/stats"),w=(p||[]).filter(t=>{let a=t.userName.toLowerCase().includes(e.toLowerCase())||t.mailSubject.toLowerCase().includes(e.toLowerCase())||t.destination.toLowerCase().includes(e.toLowerCase())||t.trackingNumber&&t.trackingNumber.toLowerCase().includes(e.toLowerCase()),n="all"===s||t.status===s,i="all"===r||t.priority===r;return a&&n&&i}),k=async()=>{m(!0);try{await A("admin_forwarding_refresh"),await j()}catch(e){await A("admin_forwarding_refresh_error",{error_message:R(e),stack:M(e)})}finally{m(!1)}},_=async e=>{try{await A("admin_view_forwarding_request",{requestId:e}),window.open(`/admin/forwarding/${e}`,"_blank")}catch(t){await A("admin_view_forwarding_request_error",{requestId:e,error_message:R(t),stack:M(t)})}},S=async e=>{try{await A("admin_edit_forwarding_request",{requestId:e}),window.open(`/admin/forwarding/${e}/edit`,"_blank")}catch(t){await A("admin_edit_forwarding_request_error",{requestId:e,error_message:R(t),stack:M(t)})}},L=async e=>{m(!0);try{await A("admin_process_forwarding_request",{requestId:e}),await C.post(`/api/admin/forwarding-requests/${e}/process`),j()}catch(t){await A("admin_process_forwarding_request_error",{requestId:e,error_message:R(t),stack:M(t)})}finally{m(!1)}},E=async e=>{m(!0);try{await A("admin_ship_forwarding_request",{requestId:e}),await C.post(`/api/admin/forwarding-requests/${e}/ship`),j()}catch(t){await A("admin_ship_forwarding_request_error",{requestId:e,error_message:R(t),stack:M(t)})}finally{m(!1)}},P=async e=>{m(!0);try{await A("admin_cancel_forwarding_request",{requestId:e}),await C.post(`/api/admin/forwarding-requests/${e}/cancel`),j()}catch(t){await A("admin_cancel_forwarding_request_error",{requestId:e,error_message:R(t),stack:M(t)})}finally{m(!1)}},z=async e=>{if(0!==h.length){m(!0);try{await A("admin_bulk_forwarding_action",{action:e,requestIds:h}),await C.post(`/api/admin/forwarding-requests/bulk/${e}`,{requestIds:h}),x([]),j()}catch(t){await A("admin_bulk_forwarding_action_error",{action:e,requestIds:h,error_message:R(t),stack:M(t)})}finally{m(!1)}}},D=async()=>{m(!0);try{await A("admin_export_forwarding_requests",{filters:{statusFilter:s,priorityFilter:r,searchTerm:e}});let t=await C.get(`/api/admin/forwarding-requests/export?status=${s}&priority=${r}&search=${encodeURIComponent(e)}`),a=new Blob([t.data],{type:"application/json"}),n=window.URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download=`forwarding-requests-export-${new Date().toISOString().split("T")[0]}.json`,i.click()}catch(e){await A("admin_export_forwarding_requests_error",{error_message:R(e),stack:M(e)})}finally{m(!1)}},F=e=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},I=()=>{x([])},V=e=>{switch(e){case"pending":return i.jsx(rz.Z,{className:"h-4 w-4 text-yellow-500"});case"processing":return i.jsx(rV,{className:"h-4 w-4 text-blue-500"});case"shipped":return i.jsx(O,{className:"h-4 w-4 text-purple-500"});case"delivered":return i.jsx(v,{className:"h-4 w-4 text-green-500"});case"cancelled":return i.jsx(rZ,{className:"h-4 w-4 text-red-500"});default:return i.jsx($,{className:"h-4 w-4 text-gray-500"})}},Z=e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"express":return"bg-yellow-100 text-yellow-800";case"standard":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Forwarding Management"}),i.jsx("p",{className:"text-muted-foreground",children:"Track and manage mail forwarding requests"}),g&&(0,i.jsxs)("div",{className:"flex gap-4 mt-2 text-sm text-muted-foreground",children:[(0,i.jsxs)("span",{children:["Total: ",g?.total||0]}),(0,i.jsxs)("span",{children:["Pending: ",g?.pending||0]}),(0,i.jsxs)("span",{children:["Processing: ",g?.processing||0]}),(0,i.jsxs)("span",{children:["Shipped: ",g?.shipped||0]}),(0,i.jsxs)("span",{children:["Delivered: ",g?.delivered||0]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:D,disabled:o,children:[i.jsx(H,{className:"h-4 w-4"}),"Export"]}),(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:k,disabled:o,children:[i.jsx(b,{className:`h-4 w-4 ${o?"animate-spin":""}`}),"Refresh"]})]})]}),h.length>0&&i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"text-sm font-medium",children:[h.length," requests selected"]}),i.jsx(c.z,{variant:"ghost",size:"sm",onClick:I,children:"Clear"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>z("process"),disabled:o,children:[i.jsx(rU,{className:"h-4 w-4"}),"Process"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>z("ship"),disabled:o,children:[i.jsx(O,{className:"h-4 w-4"}),"Ship"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>z("cancel"),disabled:o,children:[i.jsx(rZ,{className:"h-4 w-4"}),"Cancel"]})]})]})})}),i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx("div",{className:"flex-1",children:(0,i.jsxs)("div",{className:"relative",children:[i.jsx(rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(u,{placeholder:"Search forwarding requests...",value:e,onChange:e=>t(e.target.value),className:"pl-10"})]})}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(ax,{value:s,onValueChange:a,children:[i.jsx(a6,{className:"w-[140px]",children:i.jsx(ag,{placeholder:"Status"})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"all",children:"All Status"}),i.jsx(re,{value:"pending",children:"Pending"}),i.jsx(re,{value:"processing",children:"Processing"}),i.jsx(re,{value:"shipped",children:"Shipped"}),i.jsx(re,{value:"delivered",children:"Delivered"}),i.jsx(re,{value:"cancelled",children:"Cancelled"})]})]}),(0,i.jsxs)(ax,{value:r,onValueChange:n,children:[i.jsx(a6,{className:"w-[140px]",children:i.jsx(ag,{placeholder:"Priority"})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"all",children:"All Priority"}),i.jsx(re,{value:"standard",children:"Standard"}),i.jsx(re,{value:"express",children:"Express"}),i.jsx(re,{value:"urgent",children:"Urgent"})]})]})]})]})})}),i.jsx(d.Zb,{children:(0,i.jsxs)(es,{children:[i.jsx(ea,{children:(0,i.jsxs)(en,{children:[i.jsx(ei,{className:"w-12",children:i.jsx("input",{type:"checkbox",checked:w.length>0&&w.every(e=>h.includes(e.id)),onChange:w.length>0&&w.every(e=>h.includes(e.id))?I:()=>{x(w.map(e=>e.id))},className:"rounded"})}),i.jsx(ei,{children:"ID"}),i.jsx(ei,{children:"User"}),i.jsx(ei,{children:"Mail Item"}),i.jsx(ei,{children:"Destination"}),i.jsx(ei,{children:"Priority"}),i.jsx(ei,{children:"Status"}),i.jsx(ei,{children:"Tracking"}),i.jsx(ei,{children:"Cost"}),i.jsx(ei,{children:"Created"}),i.jsx(ei,{children:"Actions"})]})}),i.jsx(er,{children:0===w.length?i.jsx(en,{children:i.jsx(el,{colSpan:10,className:"text-center py-8 text-muted-foreground",children:"No forwarding requests found"})}):w.map(e=>(0,i.jsxs)(en,{children:[i.jsx(el,{children:i.jsx("input",{type:"checkbox",checked:h.includes(e.id),onChange:()=>F(e.id),className:"rounded"})}),(0,i.jsxs)(el,{children:["#",e.id]}),i.jsx(el,{children:(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium",children:e.userName}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:["ID: ",e.userId]})]})}),i.jsx(el,{children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"font-medium",children:["#",e.mailItemId]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:e.mailSubject})]})}),i.jsx(el,{children:i.jsx("div",{className:"max-w-xs",children:i.jsx("div",{className:"text-sm font-medium",children:e.destination})})}),i.jsx(el,{children:i.jsx(G.C,{className:Z(e.priority),variant:"secondary",children:e.priority})}),i.jsx(el,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[V(e.status),i.jsx(G.C,{variant:"outline",className:"capitalize",children:e.status})]})}),i.jsx(el,{children:e.trackingNumber?(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:e.trackingNumber}),i.jsx("div",{className:"text-xs text-muted-foreground",children:e.carrier})]}):i.jsx("span",{className:"text-muted-foreground",children:"-"})}),i.jsx(el,{children:e.cost}),i.jsx(el,{className:"text-sm text-muted-foreground",children:e.createdAt}),i.jsx(el,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>_(e.id),children:i.jsx(N,{className:"h-4 w-4"})}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>S(e.id),children:i.jsx(rn,{className:"h-4 w-4"})}),"pending"===e.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>L(e.id),disabled:o,children:i.jsx(rU,{className:"h-4 w-4"})}),"processing"===e.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>E(e.id),disabled:o,children:i.jsx(O,{className:"h-4 w-4"})}),"delivered"!==e.status&&"cancelled"!==e.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>P(e.id),disabled:o,children:i.jsx(rZ,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})}let rq=(0,f.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),rW=(0,f.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),rH=(0,f.Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);function rB({}){let[e,t]=(0,l.useState)(!1),[s,a]=(0,l.useState)("30d"),{data:r,isLoading:n,refetch:o}=T("/api/admin/billing"),{data:u,isLoading:m,refetch:h}=T("/api/admin/transactions"),{data:x,isLoading:p,refetch:f}=T("/api/admin/invoices"),j=u||[],y=async()=>{t(!0);try{await A("admin_billing_refresh"),await Promise.all([o(),h(),f()])}catch(e){await A("admin_billing_refresh_error",{error_message:R(e),stack:M(e)})}finally{t(!1)}},w=async()=>{t(!0);try{await A("admin_export_billing_reports",{timeRange:s});let e=await C.get(`/api/admin/billing/export?timeRange=${s}`),t=new Blob([e.data],{type:"application/json"}),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`billing-report-${s}-${new Date().toISOString().split("T")[0]}.json`,r.click()}catch(e){await A("admin_export_billing_reports_error",{error_message:R(e),stack:M(e)})}finally{t(!1)}},N=async e=>{try{await A("admin_view_invoice",{invoiceId:e}),window.open(`/admin/invoices/${e}`,"_blank")}catch(t){await A("admin_view_invoice_error",{invoiceId:e,error_message:R(t),stack:M(t)})}},k=async e=>{t(!0);try{await A("admin_process_payment",{transactionId:e}),await C.post(`/api/admin/transactions/${e}/process`),h()}catch(t){await A("admin_process_payment_error",{transactionId:e,error_message:R(t),stack:M(t)})}finally{t(!1)}},_=async e=>{t(!0);try{await A("admin_refund_transaction",{transactionId:e}),await C.post(`/api/admin/transactions/${e}/refund`),h()}catch(t){await A("admin_refund_transaction_error",{transactionId:e,error_message:R(t),stack:M(t)})}finally{t(!1)}},S=e=>{switch(e){case"completed":return i.jsx(v,{className:"h-4 w-4 text-green-500"});case"pending":return i.jsx(rz.Z,{className:"h-4 w-4 text-yellow-500"});case"failed":return i.jsx(g,{className:"h-4 w-4 text-red-500"});case"refunded":return i.jsx(b,{className:"h-4 w-4 text-blue-500"});default:return i.jsx(rz.Z,{className:"h-4 w-4 text-gray-500"})}},L=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},E=e=>{switch(e){case"subscription":return"bg-purple-100 text-purple-800";case"one_time":return"bg-blue-100 text-blue-800";case"refund":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Billing & Revenue"}),i.jsx("p",{className:"text-muted-foreground",children:"Monitor payments, invoices, and revenue metrics"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(ax,{value:s,onValueChange:a,children:[i.jsx(a6,{className:"w-[120px]",children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"7d",children:"Last 7 days"}),i.jsx(re,{value:"30d",children:"Last 30 days"}),i.jsx(re,{value:"90d",children:"Last 90 days"}),i.jsx(re,{value:"1y",children:"Last year"})]})]}),(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:w,disabled:e,children:[i.jsx(H,{className:"h-4 w-4"}),"Export Reports"]}),(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:y,disabled:e,children:[i.jsx(b,{className:`h-4 w-4 ${e?"animate-spin":""}`}),"Refresh"]})]})]}),r?(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"}),(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["\xa3",r?.monthlyRevenue?.toLocaleString()||"0"]}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(K,{className:"h-3 w-3"}),"+",r?.revenueGrowth||0,"% from last month"]})]}),i.jsx(J,{className:"h-8 w-8 text-green-500"})]})})}),i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Outstanding Invoices"}),(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["\xa3",(r?.outstandingInvoices||0).toLocaleString()]}),(0,i.jsxs)("p",{className:"text-xs text-orange-600",children:[r?.pendingPayments||0," pending payments"]})]}),i.jsx(rq,{className:"h-8 w-8 text-orange-500"})]})})}),i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Churn Rate"}),(0,i.jsxs)("p",{className:"text-2xl font-bold",children:[r?.churnRate||0,"%"]}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(Q,{className:"h-3 w-3"}),r?.churnChange||0,"% from last month"]})]}),i.jsx(rW,{className:"h-8 w-8 text-red-500"})]})})})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:i.jsx("div",{className:"text-center text-muted-foreground",children:"No billing data available"})})})}),(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:i.jsx(d.ll,{children:"Recent Transactions"})}),i.jsx(d.aY,{children:(0,i.jsxs)(es,{children:[i.jsx(ea,{children:(0,i.jsxs)(en,{children:[i.jsx(ei,{children:"ID"}),i.jsx(ei,{children:"User"}),i.jsx(ei,{children:"Type"}),i.jsx(ei,{children:"Amount"}),i.jsx(ei,{children:"Status"}),i.jsx(ei,{children:"Description"}),i.jsx(ei,{children:"Payment Method"}),i.jsx(ei,{children:"Created"}),i.jsx(ei,{children:"Actions"})]})}),i.jsx(er,{children:0===j.length?i.jsx(en,{children:i.jsx(el,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No transactions found"})}):j.map(t=>(0,i.jsxs)(en,{children:[(0,i.jsxs)(el,{children:["#",t.id]}),i.jsx(el,{children:(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium",children:t.userName}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:["ID: ",t.userId]})]})}),i.jsx(el,{children:i.jsx(G.C,{className:E(t.type),variant:"secondary",children:t.type})}),i.jsx(el,{children:(0,i.jsxs)("div",{className:"font-medium",children:[t.currency," ",t.amount.toFixed(2)]})}),i.jsx(el,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[S(t.status),i.jsx(G.C,{className:L(t.status),variant:"secondary",children:t.status})]})}),i.jsx(el,{children:t.description}),i.jsx(el,{className:"text-sm text-muted-foreground",children:t.paymentMethod}),i.jsx(el,{className:"text-sm text-muted-foreground",children:t.createdAt}),i.jsx(el,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[t.invoiceId&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>N(t.invoiceId),children:i.jsx(rH,{className:"h-4 w-4"})}),"pending"===t.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>k(t.id),disabled:e,children:i.jsx(v,{className:"h-4 w-4"})}),"completed"===t.status&&i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>_(t.id),disabled:e,children:i.jsx(b,{className:"h-4 w-4"})})]})})]},t.id))})]})})]}),(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:i.jsx(d.ll,{children:"Revenue Trends"})}),i.jsx(d.aY,{className:"h-64 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx(J,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Revenue trends chart would be displayed here"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Integration with charting library (Chart.js, Recharts, etc.)"})]})})]})]})}let rY=(0,f.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function rG({}){let[e,t]=(0,l.useState)(!1),[s,a]=(0,l.useState)("30d"),[r,n]=(0,l.useState)("overview"),{data:o,isLoading:u,refetch:m}=T("/api/admin/analytics"),{data:h,isLoading:x}=T("/api/admin/analytics/users"),{data:p,isLoading:f}=T("/api/admin/analytics/revenue"),{data:j,isLoading:g}=T("/api/admin/analytics/mail"),v=async()=>{t(!0);try{await A("admin_analytics_refresh",{timeRange:s}),await m()}catch(e){await A("admin_analytics_refresh_error",{error_message:R(e),stack:M(e)})}finally{t(!1)}},y=async()=>{t(!0);try{await A("admin_export_analytics",{timeRange:s,metric:r});let e=await C.get(`/api/admin/analytics/export?timeRange=${s}&metric=${r}`),t=new Blob([JSON.stringify(e)],{type:"application/json"}),a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=`analytics-${r}-${s}-${new Date().toISOString().split("T")[0]}.json`,n.click()}catch(e){await A("admin_export_analytics_error",{error_message:R(e),stack:M(e)})}finally{t(!1)}},w=async e=>{t(!0);try{await A("admin_generate_report",{reportType:e,timeRange:s});let t=await C.post("/api/admin/analytics/reports",{reportType:e,timeRange:s,format:"pdf"}),a=new Blob([t],{type:"application/pdf"}),r=window.URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=`${e}-report-${s}-${new Date().toISOString().split("T")[0]}.pdf`,n.click()}catch(t){await A("admin_generate_report_error",{reportType:e,timeRange:s,error_message:R(t),stack:M(t)})}finally{t(!1)}};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Analytics Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Detailed insights and performance metrics"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(ax,{value:s,onValueChange:a,children:[i.jsx(a6,{className:"w-[120px]",children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"7d",children:"Last 7 days"}),i.jsx(re,{value:"30d",children:"Last 30 days"}),i.jsx(re,{value:"90d",children:"Last 90 days"}),i.jsx(re,{value:"1y",children:"Last year"})]})]}),(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:y,disabled:e,children:[i.jsx(H,{className:"h-4 w-4"}),"Export"]}),(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:v,disabled:e,children:[i.jsx(b,{className:`h-4 w-4 ${e?"animate-spin":""}`}),"Refresh"]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Users"}),i.jsx("p",{className:"text-2xl font-bold",children:o?.userGrowth?.total?.toLocaleString()||"0"}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(rY,{className:"h-3 w-3"}),"+",o?.userGrowth.growth,"% growth"]})]}),i.jsx(F,{className:"h-8 w-8 text-blue-500"})]})})}),i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"}),(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["\xa3",o?.revenue.monthly.toLocaleString()]}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(rY,{className:"h-3 w-3"}),"+",o?.revenue.growth,"% growth"]})]}),i.jsx(J,{className:"h-8 w-8 text-green-500"})]})})}),i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Mail Processed"}),i.jsx("p",{className:"text-2xl font-bold",children:o?.mailVolume.monthly.toLocaleString()}),(0,i.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx(rY,{className:"h-3 w-3"}),"+",o?.mailVolume.growth,"% growth"]})]}),i.jsx(I.Z,{className:"h-8 w-8 text-purple-500"})]})})}),i.jsx(d.Zb,{children:i.jsx(d.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Users"}),i.jsx("p",{className:"text-2xl font-bold",children:o?.userGrowth.activeUsers.toLocaleString()}),(0,i.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(o?.userGrowth.activeUsers/o?.userGrowth.total*100).toFixed(1),"% of total"]})]}),i.jsx(ee,{className:"h-8 w-8 text-orange-500"})]})})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsxs)(d.Zb,{children:[(0,i.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[i.jsx(d.ll,{children:"User Growth"}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>w("user-growth"),disabled:e,children:i.jsx(H,{className:"h-4 w-4"})})]}),i.jsx(d.aY,{className:"h-64 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx(D,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"User growth chart would be displayed here"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Shows new registrations, activations, and churn over time"})]})})]}),(0,i.jsxs)(d.Zb,{children:[(0,i.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[i.jsx(d.ll,{children:"Revenue Trends"}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>w("revenue-trends"),disabled:e,children:i.jsx(H,{className:"h-4 w-4"})})]}),i.jsx(d.aY,{className:"h-64 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx(rY,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Revenue trends chart would be displayed here"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Shows monthly recurring revenue, one-time payments, and refunds"})]})})]}),(0,i.jsxs)(d.Zb,{children:[(0,i.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[i.jsx(d.ll,{children:"Mail Volume"}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>w("mail-volume"),disabled:e,children:i.jsx(H,{className:"h-4 w-4"})})]}),i.jsx(d.aY,{className:"h-64 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx(I.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Mail volume chart would be displayed here"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Shows incoming mail, processing times, and forwarding volumes"})]})})]}),(0,i.jsxs)(d.Zb,{children:[(0,i.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[i.jsx(d.ll,{children:"Plan Distribution"}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>w("plan-distribution"),disabled:e,children:i.jsx(H,{className:"h-4 w-4"})})]}),i.jsx(d.aY,{className:"h-64 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx(Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Plan distribution chart would be displayed here"}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Shows breakdown of Basic (",o?.planDistribution.basic,"%), Premium (",o?.planDistribution.premium,"%), and Professional (",o?.planDistribution.professional,"%) plans"]})]})})]})]}),(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:i.jsx(d.ll,{children:"Detailed Metrics"})}),i.jsx(d.aY,{children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"User Metrics"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-muted-foreground",children:["New Users (",s,")"]}),i.jsx("span",{className:"font-medium",children:o?.userGrowth.newUsers})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Active Users"}),i.jsx("span",{className:"font-medium",children:o?.userGrowth.activeUsers})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Growth Rate"}),(0,i.jsxs)("span",{className:"font-medium text-green-600",children:["+",o?.userGrowth.growth,"%"]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Revenue Metrics"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Monthly Revenue"}),(0,i.jsxs)("span",{className:"font-medium",children:["\xa3",o?.revenue.monthly.toLocaleString()]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Yearly Revenue"}),(0,i.jsxs)("span",{className:"font-medium",children:["\xa3",o?.revenue.yearly.toLocaleString()]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Growth Rate"}),(0,i.jsxs)("span",{className:"font-medium text-green-600",children:["+",o?.revenue.growth,"%"]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Mail Metrics"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Processed"}),i.jsx("span",{className:"font-medium",children:o?.mailVolume.processed.toLocaleString()})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Monthly Volume"}),i.jsx("span",{className:"font-medium",children:o?.mailVolume.monthly.toLocaleString()})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Growth Rate"}),(0,i.jsxs)("span",{className:"font-medium text-green-600",children:["+",o?.mailVolume.growth,"%"]})]})]})]})]})})]})]})}var rK="Switch",[rX,rJ]=(0,eh.b)(rK),[rQ,r0]=rX(rK),r1=l.forwardRef((e,t)=>{let{__scopeSwitch:s,name:a,checked:r,defaultChecked:n,required:c,disabled:d,value:o="on",onCheckedChange:u,form:m,...h}=e,[x,p]=l.useState(null),f=(0,em.e)(t,e=>p(e)),j=l.useRef(!1),g=!x||m||!!x.closest("form"),[v,y]=(0,sp.T)({prop:r,defaultProp:n??!1,onChange:u,caller:rK});return(0,i.jsxs)(rQ,{scope:s,checked:v,disabled:d,children:[(0,i.jsx)(ep.WV.button,{type:"button",role:"switch","aria-checked":v,"aria-required":c,"data-state":r3(v),"data-disabled":d?"":void 0,disabled:d,value:o,...h,ref:f,onClick:(0,eo.Mj)(e.onClick,e=>{y(e=>!e),g&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),g&&(0,i.jsx)(r5,{control:x,bubbles:!j.current,name:a,value:o,checked:v,required:c,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});r1.displayName=rK;var r2="SwitchThumb",r4=l.forwardRef((e,t)=>{let{__scopeSwitch:s,...a}=e,r=r0(r2,s);return(0,i.jsx)(ep.WV.span,{"data-state":r3(r.checked),"data-disabled":r.disabled?"":void 0,...a,ref:t})});r4.displayName=r2;var r5=l.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:a=!0,...r},n)=>{let c=l.useRef(null),d=(0,em.e)(c,n),o=(0,sf.D)(s),u=(0,t5.t)(t);return l.useEffect(()=>{let e=c.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==s&&t){let r=new Event("click",{bubbles:a});t.call(e,s),e.dispatchEvent(r)}},[o,s,a]),(0,i.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...r,tabIndex:-1,ref:d,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function r3(e){return e?"checked":"unchecked"}r5.displayName="SwitchBubbleInput";let r6=l.forwardRef(({className:e,...t},s)=>i.jsx(r1,{className:(0,o.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:i.jsx(r4,{className:(0,o.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));r6.displayName=r1.displayName;let r7=(0,f.Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),r8=(0,f.Z)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),r9=(0,f.Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);function ne({}){let[e,t]=(0,l.useState)(!1),[s,a]=(0,l.useState)(!1),[r,n]=(0,l.useState)({general:{siteName:"VirtualAddressHub",siteUrl:"https://virtualaddresshub.com",adminEmail:"admin@virtualaddresshub.com",timezone:"Europe/London",maintenanceMode:!1},notifications:{emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,adminAlerts:!0,userAlerts:!0},integrations:{mailProvider:"royal_mail",paymentProvider:"stripe",kycProvider:"sumsub",analyticsProvider:"google_analytics",emailProvider:"postmark"},security:{twoFactorAuth:!0,sessionTimeout:30,passwordPolicy:"strong",ipWhitelist:[],auditLogging:!0}}),{data:o,isLoading:h,refetch:x}=T("/api/admin/settings"),{data:p,isLoading:f}=T("/api/admin/system/health"),j=async()=>{t(!0);try{await A("admin_settings_refresh"),await x()}catch(e){await A("admin_settings_refresh_error",{error_message:R(e),stack:M(e)})}finally{t(!1)}},g=async e=>{a(!0);try{await A("admin_save_settings",{section:e,settings:r[e]}),await C.post(`/api/admin/settings/${e}`,r[e]),await x()}catch(t){await A("admin_save_settings_error",{section:e,error_message:R(t),stack:M(t)})}finally{a(!1)}},v=async e=>{t(!0);try{await A("admin_test_integration",{integration:e}),await C.post(`/api/admin/integrations/${e}/test`)}catch(t){await A("admin_test_integration_error",{integration:e,error_message:R(t),stack:M(t)})}finally{t(!1)}},y=async()=>{t(!0);try{await A("admin_backup_database");let e=await C.post("/api/admin/database/backup"),t=new Blob([e.data],{type:"application/sql"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`database-backup-${new Date().toISOString().split("T")[0]}.sql`,a.click()}catch(e){await A("admin_backup_database_error",{error_message:R(e),stack:M(e)})}finally{t(!1)}},w=async()=>{t(!0);try{await A("admin_clear_cache"),await C.post("/api/admin/cache/clear")}catch(e){await A("admin_clear_cache_error",{error_message:R(e),stack:M(e)})}finally{t(!1)}},N=(e,t,s)=>{n(a=>({...a,[e]:{...a[e],[t]:s}}))};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"System Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Configure system-wide settings and preferences"})]}),i.jsx("div",{className:"flex items-center gap-2",children:(0,i.jsxs)(c.z,{variant:"outline",className:"gap-2",onClick:j,disabled:e,children:[i.jsx(b,{className:`h-4 w-4 ${e?"animate-spin":""}`}),"Refresh"]})})]}),(0,i.jsxs)(rp,{defaultValue:"general",className:"space-y-4",children:[(0,i.jsxs)(rk,{children:[i.jsx(r_,{value:"general",children:"General"}),i.jsx(r_,{value:"notifications",children:"Notifications"}),i.jsx(r_,{value:"integrations",children:"Integrations"}),i.jsx(r_,{value:"security",children:"Security"}),i.jsx(r_,{value:"maintenance",children:"Maintenance"})]}),i.jsx(rC,{value:"general",className:"space-y-4",children:(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:i.jsx(d.ll,{children:"General Settings"})}),(0,i.jsxs)(d.aY,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"siteName",children:"Site Name"}),i.jsx(u,{id:"siteName",value:r.general.siteName,onChange:e=>N("general","siteName",e.target.value)})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"siteUrl",children:"Site URL"}),i.jsx(u,{id:"siteUrl",value:r.general.siteUrl,onChange:e=>N("general","siteUrl",e.target.value)})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"adminEmail",children:"Admin Email"}),i.jsx(u,{id:"adminEmail",type:"email",value:r.general.adminEmail,onChange:e=>N("general","adminEmail",e.target.value)})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"timezone",children:"Timezone"}),(0,i.jsxs)(ax,{value:r.general.timezone,onValueChange:e=>N("general","timezone",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"Europe/London",children:"Europe/London"}),i.jsx(re,{value:"America/New_York",children:"America/New_York"}),i.jsx(re,{value:"America/Los_Angeles",children:"America/Los_Angeles"}),i.jsx(re,{value:"Asia/Tokyo",children:"Asia/Tokyo"})]})]})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx(r6,{id:"maintenanceMode",checked:r.general.maintenanceMode,onCheckedChange:e=>N("general","maintenanceMode",e)}),i.jsx(m._,{htmlFor:"maintenanceMode",children:"Maintenance Mode"})]}),(0,i.jsxs)(c.z,{onClick:()=>g("general"),disabled:s,children:[i.jsx(rP,{className:"h-4 w-4 mr-2"}),"Save General Settings"]})]})]})}),i.jsx(rC,{value:"notifications",className:"space-y-4",children:(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:i.jsx(d.ll,{children:"Notification Settings"})}),(0,i.jsxs)(d.aY,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(m._,{children:"Email Notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send email notifications to users"})]}),i.jsx(r6,{checked:r.notifications.emailNotifications,onCheckedChange:e=>N("notifications","emailNotifications",e)})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(m._,{children:"SMS Notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send SMS notifications to users"})]}),i.jsx(r6,{checked:r.notifications.smsNotifications,onCheckedChange:e=>N("notifications","smsNotifications",e)})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(m._,{children:"Push Notifications"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send push notifications to users"})]}),i.jsx(r6,{checked:r.notifications.pushNotifications,onCheckedChange:e=>N("notifications","pushNotifications",e)})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(m._,{children:"Admin Alerts"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send alerts to admin users"})]}),i.jsx(r6,{checked:r.notifications.adminAlerts,onCheckedChange:e=>N("notifications","adminAlerts",e)})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(m._,{children:"User Alerts"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send alerts to regular users"})]}),i.jsx(r6,{checked:r.notifications.userAlerts,onCheckedChange:e=>N("notifications","userAlerts",e)})]})]}),(0,i.jsxs)(c.z,{onClick:()=>g("notifications"),disabled:s,children:[i.jsx(rP,{className:"h-4 w-4 mr-2"}),"Save Notification Settings"]})]})]})}),i.jsx(rC,{value:"integrations",className:"space-y-4",children:(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:i.jsx(d.ll,{children:"Third-party Integrations"})}),(0,i.jsxs)(d.aY,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{children:"Mail Provider"}),(0,i.jsxs)(ax,{value:r.integrations.mailProvider,onValueChange:e=>N("integrations","mailProvider",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"royal_mail",children:"Royal Mail"}),i.jsx(re,{value:"dpd",children:"DPD"}),i.jsx(re,{value:"ups",children:"UPS"}),i.jsx(re,{value:"fedex",children:"FedEx"})]})]}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>v("mail"),children:"Test Connection"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{children:"Payment Provider"}),(0,i.jsxs)(ax,{value:r.integrations.paymentProvider,onValueChange:e=>N("integrations","paymentProvider",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"stripe",children:"Stripe"}),i.jsx(re,{value:"paypal",children:"PayPal"}),i.jsx(re,{value:"gocardless",children:"GoCardless"})]})]}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>v("payment"),children:"Test Connection"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{children:"KYC Provider"}),(0,i.jsxs)(ax,{value:r.integrations.kycProvider,onValueChange:e=>N("integrations","kycProvider",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"sumsub",children:"Sumsub"}),i.jsx(re,{value:"jumio",children:"Jumio"}),i.jsx(re,{value:"onfido",children:"Onfido"})]})]}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>v("kyc"),children:"Test Connection"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{children:"Email Provider"}),(0,i.jsxs)(ax,{value:r.integrations.emailProvider,onValueChange:e=>N("integrations","emailProvider",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"postmark",children:"Postmark"}),i.jsx(re,{value:"sendgrid",children:"SendGrid"}),i.jsx(re,{value:"mailgun",children:"Mailgun"})]})]}),i.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>v("email"),children:"Test Connection"})]})]}),(0,i.jsxs)(c.z,{onClick:()=>g("integrations"),disabled:s,children:[i.jsx(rP,{className:"h-4 w-4 mr-2"}),"Save Integration Settings"]})]})]})}),i.jsx(rC,{value:"security",className:"space-y-4",children:(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:i.jsx(d.ll,{children:"Security Settings"})}),(0,i.jsxs)(d.aY,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(m._,{children:"Two-Factor Authentication"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Require 2FA for admin users"})]}),i.jsx(r6,{checked:r.security.twoFactorAuth,onCheckedChange:e=>N("security","twoFactorAuth",e)})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{htmlFor:"sessionTimeout",children:"Session Timeout (minutes)"}),i.jsx(u,{id:"sessionTimeout",type:"number",value:r.security.sessionTimeout,onChange:e=>N("security","sessionTimeout",parseInt(e.target.value))})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(m._,{children:"Password Policy"}),(0,i.jsxs)(ax,{value:r.security.passwordPolicy,onValueChange:e=>N("security","passwordPolicy",e),children:[i.jsx(a6,{children:i.jsx(ag,{})}),(0,i.jsxs)(a9,{children:[i.jsx(re,{value:"basic",children:"Basic"}),i.jsx(re,{value:"strong",children:"Strong"}),i.jsx(re,{value:"very_strong",children:"Very Strong"})]})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[i.jsx(m._,{children:"Audit Logging"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Log all admin actions"})]}),i.jsx(r6,{checked:r.security.auditLogging,onCheckedChange:e=>N("security","auditLogging",e)})]})]}),(0,i.jsxs)(c.z,{onClick:()=>g("security"),disabled:s,children:[i.jsx(rP,{className:"h-4 w-4 mr-2"}),"Save Security Settings"]})]})]})}),i.jsx(rC,{value:"maintenance",className:"space-y-4",children:(0,i.jsxs)(d.Zb,{children:[i.jsx(d.Ol,{children:i.jsx(d.ll,{children:"System Maintenance"})}),(0,i.jsxs)(d.aY,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Database Operations"}),(0,i.jsxs)(c.z,{variant:"outline",className:"w-full gap-2",onClick:y,disabled:e,children:[i.jsx(r7,{className:"h-4 w-4"}),"Backup Database"]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"Cache Operations"}),(0,i.jsxs)(c.z,{variant:"outline",className:"w-full gap-2",onClick:w,disabled:e,children:[i.jsx(b,{className:"h-4 w-4"}),"Clear Cache"]})]})]}),p&&(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold",children:"System Health"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(r8,{className:"h-4 w-4 text-green-500"}),(0,i.jsxs)("span",{className:"text-sm",children:["Database: ",p.database?"Healthy":"Unhealthy"]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(r9,{className:"h-4 w-4 text-green-500"}),(0,i.jsxs)("span",{className:"text-sm",children:["API Keys: ",p.apiKeys?"Valid":"Invalid"]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(F,{className:"h-4 w-4 text-green-500"}),(0,i.jsxs)("span",{className:"text-sm",children:["Users: ",p.users]})]})]})]})]})]})})]})]})}function nt({onLogout:e,onNavigate:t,onGoBack:s}){let[a,r]=(0,l.useState)("overview"),[n,d]=(0,l.useState)(!1),[o,u]=(0,l.useState)(!1),[m,h]=(0,l.useState)(null),x=[{id:"overview",label:"Overview",icon:i.jsx(D,{className:"h-4 w-4"})},{id:"users",label:"Users",icon:i.jsx(F,{className:"h-4 w-4"})},{id:"mail",label:"Mail",icon:i.jsx(I.Z,{className:"h-4 w-4"})},{id:"forwarding",label:"Forwarding",icon:i.jsx(O,{className:"h-4 w-4"})},{id:"billing",label:"Billing",icon:i.jsx(V,{className:"h-4 w-4"})},{id:"analytics",label:"Analytics",icon:i.jsx(Z,{className:"h-4 w-4"})},{id:"settings",label:"Settings",icon:i.jsx(U,{className:"h-4 w-4"})}],p=async()=>{u(!0),h(null);try{await A("admin_dashboard_refresh"),window.location.reload()}catch(e){h("Failed to refresh dashboard"),await A("admin_dashboard_refresh_error",{error:e instanceof Error?e.message:String(e)})}finally{u(!1)}},f=async()=>{u(!0);try{await A("admin_export_data",{section:a});let e=await C.get(`/api/admin/export/${a}`),t=new Blob([e.data],{type:"application/json"}),s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`${a}-export-${new Date().toISOString().split("T")[0]}.json`,r.click()}catch(e){h("Failed to export data"),await A("admin_export_error",{error:e instanceof Error?e.message:String(e)})}finally{u(!1)}};return(0,i.jsxs)("div",{className:"min-h-screen bg-background",children:[m&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 m-4 rounded-md",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx($,{className:"h-4 w-4"}),i.jsx("span",{children:m}),i.jsx(c.z,{variant:"ghost",size:"sm",onClick:()=>h(null),children:i.jsx(q.Z,{className:"h-4 w-4"})})]})}),(0,i.jsxs)("header",{className:"bg-card border-b border-border",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between h-14 px-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(Y.k,{size:"sm",showText:!1}),(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"font-semibold text-sm text-primary",children:"Admin Portal"}),i.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"VirtualAddressHub"})]})]}),i.jsx("nav",{className:"hidden lg:flex items-center gap-1",children:x.map(e=>(0,i.jsxs)(c.z,{variant:a===e.id?"default":"ghost",size:"sm",onClick:()=>r(e.id),className:"gap-1.5 h-8 px-3",children:[e.icon,i.jsx("span",{className:"text-sm",children:e.label})]},e.id))}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[i.jsx(c.z,{variant:"ghost",size:"sm",className:"lg:hidden h-8 w-8 p-0",onClick:()=>d(!n),children:n?i.jsx(q.Z,{className:"h-4 w-4"}):i.jsx(W.Z,{className:"h-4 w-4"})}),(0,i.jsxs)("div",{className:"hidden lg:flex items-center gap-1",children:[i.jsx(c.z,{variant:"ghost",size:"sm",className:"h-8 px-2",onClick:p,disabled:o,children:i.jsx(b,{className:`h-4 w-4 ${o?"animate-spin":""}`})}),i.jsx(c.z,{variant:"ghost",size:"sm",className:"h-8 px-2",onClick:f,disabled:o,children:i.jsx(H,{className:"h-4 w-4"})})]}),(0,i.jsxs)(c.z,{variant:"ghost",size:"sm",onClick:e,className:"h-8 px-2 text-destructive hover:text-destructive hover:bg-destructive/10",children:[i.jsx(B,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline ml-1",children:"Sign out"})]})]})]}),n&&i.jsx("div",{className:"lg:hidden border-t border-border p-3",children:i.jsx("div",{className:"grid grid-cols-2 gap-2",children:x.map(e=>(0,i.jsxs)(c.z,{variant:a===e.id?"default":"outline",size:"sm",onClick:()=>{r(e.id),d(!1)},className:"justify-start gap-2 h-8 text-xs",children:[e.icon,i.jsx("span",{className:"truncate",children:e.label})]},e.id))})})]}),i.jsx("main",{className:"p-4 lg:p-6",children:(()=>{switch(a){case"overview":default:return i.jsx(et,{});case"users":return i.jsx(rM,{onNavigate:t});case"mail":return i.jsx(rI,{});case"forwarding":return i.jsx(r$,{});case"billing":return i.jsx(rB,{});case"analytics":return i.jsx(rG,{});case"settings":return i.jsx(ne,{})}})()})]})}let ns=(0,l.createContext)(void 0);function na({children:e}){let[t,s]=(0,l.useState)(null),[a,r]=(0,l.useState)(!0),n=t?.is_admin||!1,c=async e=>{r(!0);try{await E("user_login_attempt",{email:e.email});let t=await C.post("/api/auth/login",e);if(t.ok)L.setToken(t.token),L.setUser(t.user),s(t.user),await E("user_login_success",{email:e.email,userId:t.user.id});else throw Error("Login failed")}catch(t){throw await E("user_login_failed",{email:e.email,error_message:R(t),stack:M(t)}),t}finally{r(!1)}},d=async e=>{r(!0);try{await E("admin_login_attempt",{email:e.email});let t=await C.post("/api/auth/login",{...e,isAdmin:!0});if(t.ok&&t.user?.is_admin)L.setToken(t.token),L.setUser(t.user),s(t.user),await E("admin_login_success",{email:e.email,adminId:t.user.id}),await A("admin_login",{email:e.email,adminId:t.user.id});else throw Error("Admin access required")}catch(t){throw await E("admin_login_failed",{email:e.email,error_message:R(t),stack:M(t)}),t}finally{r(!1)}},o=async()=>{r(!0);try{t?.is_admin?await A("admin_logout",{adminId:t.id}):await E("user_logout",{userId:t?.id}),await C.post("/api/auth/logout")}catch(e){console.error("Logout API call failed:",e)}finally{L.clearAuth(),s(null),r(!1)}},u=async()=>{try{let e=await L.checkAuth();s(e)}catch(e){console.error("Failed to refresh user data:",e),L.clearAuth(),s(null)}};return i.jsx(ns.Provider,{value:{user:t,isAuthenticated:!!t,isAdmin:n,isLoading:a,login:c,adminLogin:d,logout:o,createDemoSession:e=>{let t="admin"===e?{id:"demo-admin",email:"admin@virtualaddresshub.co.uk",name:"Demo Admin",is_admin:!0,role:"super_admin",kyc_status:"approved",plan:"professional"}:{id:"demo-user",email:"demo@virtualaddresshub.co.uk",name:"Demo User",is_admin:!1,role:"user",kyc_status:"approved",plan:"premium"};L.setUser(t),L.setToken(`demo-${e}-token`),s(t),E(`${e}_demo_session_created`,{email:t.email,userId:t.id})},refreshUser:u},children:e})}function nr(){let{isAuthenticated:e,isAdmin:t,logout:s}=function(){let e=(0,l.useContext)(ns);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}(),[a,r]=(0,l.useState)(!1),n=async()=>{await s(),r(!1)},c=()=>{window.location.href="/"};return a?i.jsx(nt,{onLogout:n,onNavigate:(e,t)=>{console.log("Navigate to:",e,t)},onGoBack:c}):i.jsx(z,{onLogin:()=>{r(!0)},onGoBack:c})}function nn(){return i.jsx(na,{children:i.jsx(nr,{})})}},567:(e,t,s)=>{"use strict";s.d(t,{C:()=>l});var a=s(326);s(7577);var r=s(9360),n=s(7863);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...s}){return a.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...s})}},3071:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,Zb:()=>i,aY:()=>d,ll:()=>c});var a=s(326),r=s(7577),n=s(7863);let i=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let l=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let c=r.forwardRef(({className:e,...t},s)=>a.jsx("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle",r.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let d=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},1048:(e,t,s)=>{"use strict";s.d(t,{_:()=>d});var a=s(326),r=s(7577),n=s(4478),i=s(9360),l=s(7863);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...t},s)=>a.jsx(n.f,{ref:s,className:(0,l.cn)(c(),e),...t}));d.displayName=n.f.displayName},8358:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/libanadan/Desktop/final_frontend/app/admin/login/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,126,454,328],()=>s(1368));module.exports=a})();