# Canonical env template for backend
# - For local dev, copy to `.env` (or configure in your shell) and fill in values
# - For production, configure these in Render/host secrets UI

# ----------------------------
# Core runtime
# ----------------------------
NODE_ENV=development
HOST=0.0.0.0
PORT=3001

# ----------------------------
# Database
# ----------------------------
DATABASE_URL=postgresql://user:password@localhost:5432/vah_db
DB_CLIENT=pg
DISABLE_SQLITE=true

# ----------------------------
# Auth / security
# ----------------------------
JWT_SECRET=changeme-in-local
JWT_COOKIE=vah_session

# If you need secure cookies locally (rare), set this to true
FORCE_SECURE_COOKIES=false

# CSRF token cookie will be set automatically by backend

# ----------------------------
# CORS
# ----------------------------
# Comma-separated list of allowed origins for CORS
# Supports both CORS_ORIGINS and ALLOWED_ORIGINS (for backwards compatibility)
# For Render production: set CORS_ORIGINS to include your frontend URL and localhost if needed
# Example: CORS_ORIGINS=https://virtualaddresshub.co.uk,http://localhost:3000
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
# Legacy alias (also supported)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
FRONTEND_ORIGINS=http://localhost:3000,http://localhost:3001

# ----------------------------
# App URLs
# ----------------------------
# Used in email links + redirects
APP_BASE_URL=http://localhost:3000
# Legacy alias also supported in some places
APP_URL=

# ----------------------------
# Email (Postmark)
# ----------------------------
POSTMARK_TOKEN=
POSTMARK_FROM=hello@virtualaddresshub.co.uk
POSTMARK_FROM_NAME=VirtualAddressHub
POSTMARK_REPLY_TO=support@virtualaddresshub.co.uk
POSTMARK_STREAM=outbound
POSTMARK_WEBHOOK_SECRET=
MAILROOM_EMAIL=mailroom@virtualaddresshub.co.uk

# Optional: redirect all non-prod emails to a safe address
DEV_EMAIL_OVERRIDE=

# ----------------------------
# Email feature flags (1=on)
# ----------------------------
EMAIL_ONBOARDING=1
EMAIL_BILLING=1
EMAIL_KYC=1
EMAIL_MAIL=1
EMAIL_SUPPORT=1
EMAIL_SECURITY=1

# ----------------------------
# Rate limiting toggles (staging/local)
# ----------------------------
DISABLE_RATE_LIMIT=0
DISABLE_RATE_LIMIT_FOR_HEALTHZ=0

# ----------------------------
# Invoices (PDF storage)
# ----------------------------
# Where invoice PDFs are stored (backend will default to ./data/invoices if unset)
INVOICES_DIR=

# ----------------------------
# GoCardless (payments) - live only
# ----------------------------
GC_ACCESS_TOKEN=
GC_WEBHOOK_SECRET=
GC_ENVIRONMENT=live

# Billing Request Template URLs (redirect for signup)
GC_MONTHLY_BRT_URL=https://pay.gocardless.com/BRT00047KBQTG85
GC_ANNUAL_BRT_URL=https://pay.gocardless.com/BRT00047PHVGQK9

# Legacy env var names (supported for backwards compatibility)
GOCARDLESS_ACCESS_TOKEN=
GOCARDLESS_WEBHOOK_SECRET=
GOCARDLESS_ENV=live

# ----------------------------
# Sumsub (KYC)
# ----------------------------
SUMSUB_API_KEY=
SUMSUB_WEBHOOK_SECRET=
SUMSUB_BASE_URL=https://api.sumsub.com

# ----------------------------
# Microsoft Graph / SharePoint / OneDrive (mail ingestion)
# ----------------------------
GRAPH_TENANT_ID=
GRAPH_CLIENT_ID=
GRAPH_CLIENT_SECRET=
GRAPH_SITE_HOST=
GRAPH_SITE_PATH=
GRAPH_DEBUG=0

ONEDRIVE_DRIVE_ID=
ONEDRIVE_USER_UPN=
ONEDRIVE_MAIL_INBOX_FOLDER_ID=
ONEDRIVE_MAIL_PROCESSED_FOLDER_ID=
ONEDRIVE_MAIL_POLL_INTERVAL_MS=300000

# OneDrive webhooks (optional)
ONEDRIVE_WEBHOOK_SECRET=
ONEDRIVE_WEBHOOK_BASIC_USER=
ONEDRIVE_WEBHOOK_BASIC_PASS=

# ----------------------------
# Internal ops
# ----------------------------
INTERNAL_CRON_TOKEN=
DEV_SEED_SECRET=
