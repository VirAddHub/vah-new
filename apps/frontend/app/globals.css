@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   MOBILE-FIRST FOUNDATION
   ======================================== */

/* Safe area insets for notched devices (iPhone X+, etc.) */
:root {
    --safe-top: env(safe-area-inset-top, 0px);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --safe-left: env(safe-area-inset-left, 0px);
    --safe-right: env(safe-area-inset-right, 0px);
}

/* Montserrat for Corporate/Tech Aesthetic - Multi-layer font loading strategy */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap');

/* FontLoader integration - ensures Montserrat is applied when loaded */
html.fonts-loaded *,
html.fonts-loaded *:before,
html.fonts-loaded *:after {
    font-family: 'Montserrat', 'Montserrat-Fallback', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
}

/* ========================================
   RESPONSIVE FOUNDATION - NO OVERLAP SETUP
   ======================================== */

/* Universal CSS safety net */
*,
*::before,
*::after {
    box-sizing: border-box;
}

html {
    font-size: 16px;
    scroll-behavior: smooth;
}

/* Respect user's motion preferences (accessibility) */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

body {
    margin: 0;
    line-height: 1.5;
    -webkit-text-size-adjust: 100%;
    /* Prevent horizontal scroll on mobile */
    overflow-x: hidden;
}

img,
picture,
video,
canvas,
svg {
    display: block;
    max-width: 100%;
    height: auto;
}

iframe {
    max-width: 100%;
}

/* Prevent text overflow */
.wrap {
    word-wrap: break-word;
    overflow-wrap: anywhere;
}

/* Responsive grid that stacks on mobile */
.grid-resp {
    display: grid;
    gap: 1rem;
    grid-template-columns: 1fr;
    /* mobile first */
}

@media (min-width: 640px) {
    .grid-resp {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (min-width: 1024px) {
    .grid-resp {
        grid-template-columns: repeat(3, 1fr);
    }
}

/* Avoid fixed heights; let content grow */
.card {
    min-height: 0;
}

/* Force Montserrat font loading and fallback */
@font-face {
    font-family: 'Montserrat-Fallback';
    src: local('Montserrat'), local('ui-sans-serif'), local('system-ui');
    font-display: swap;
}

/* Tailwind V4 Theme Configuration */
@theme {
    --font-family-sans: 'Montserrat', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    --font-family-serif: 'Montserrat', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";

    --color-background: hsl(var(--background));
    --color-foreground: hsl(var(--foreground));
    --color-card: hsl(var(--card));
    --color-card-foreground: hsl(var(--card-foreground));
    --color-popover: hsl(var(--popover));
    --color-popover-foreground: hsl(var(--popover-foreground));
    --color-primary: hsl(var(--primary));
    --color-primary-foreground: hsl(var(--primary-foreground));
    --color-secondary: hsl(var(--secondary));
    --color-secondary-foreground: hsl(var(--secondary-foreground));
    --color-muted: hsl(var(--muted));
    --color-muted-foreground: hsl(var(--muted-foreground));
    --color-accent: hsl(var(--accent));
    --color-accent-foreground: hsl(var(--accent-foreground));
    --color-destructive: hsl(var(--destructive));
    --color-destructive-foreground: hsl(var(--destructive-foreground));
    --color-border: hsl(var(--border));
    --color-input: hsl(var(--input));
    --color-ring: hsl(var(--ring));

    --border-radius: var(--radius);
    --border-radius-xs: var(--radius-xs);
    --border-radius-sm: var(--radius-sm);
    --border-radius-md: var(--radius-md);
    --border-radius-lg: var(--radius-lg);
    --border-radius-xl: var(--radius-xl);
    --border-radius-2xl: var(--radius-2xl);
}

/* ===========================
   Claude-like Global Theme (HSL) — place LAST in globals.css
   =========================== */
@layer base {

    /* LIGHT THEME (HSL triples) */
    :root,
    html {
        /* airy surfaces */
        --background: 0 0% 97%;
        /* #F8F8F6 */
        --foreground: 210 20% 15%;
        /* Improved contrast for better readability */

        --card: 0 0% 100%;
        /* #ffffff */
        --card-foreground: 210 20% 15%;

        --popover: 0 0% 100%;
        --popover-foreground: 210 20% 15%;

        /* Enhanced brand green */
        --primary: 145 50% 25%;
        /* More vibrant primary */
        --primary-foreground: 0 0% 100%;
        --primary-hover: 145 50% 20%;
        /* Darker hover state */

        /* Enhanced primary scale */
        --primary-50: 145 50% 97%;
        --primary-100: 145 50% 90%;
        --primary-200: 145 50% 80%;
        --primary-300: 145 50% 70%;
        --primary-400: 145 50% 60%;
        --primary-500: 145 50% 50%;
        --primary-600: 145 50% 40%;
        --primary-700: 145 50% 30%;
        --primary-800: 145 50% 20%;
        --primary-900: 145 50% 15%;

        /* Enhanced utility colors */
        --secondary: 0 0% 100%;
        --secondary-foreground: 210 20% 15%;

        --muted: 48 10% 94%;
        /* #f1f0ec */
        --muted-foreground: 210 15% 35%;
        /* Improved contrast */

        --accent: 48 15% 88%;
        /* Better accent for hover */
        --accent-foreground: 210 20% 15%;
        --accent-hover: 48 15% 85%;
        /* Slightly darker on hover */

        /* Enhanced semantic colors */
        --destructive: 0 70% 50%;
        --destructive-foreground: 0 0% 100%;
        --success: 145 60% 35%;
        --success-foreground: 0 0% 100%;
        --warning: 45 80% 50%;
        --warning-foreground: 0 0% 100%;
        --info: 210 70% 50%;
        --info-foreground: 0 0% 100%;

        /* lines / inputs */
        --border: 30 12% 90%;
        /* #e7e5e4 */
        --border-light: 30 10% 93%;
        --input: 36 10% 92%;
        /* #edeae6 */
        --input-background: 0 0% 100%;
        --switch-background: 30 12% 90%;

        /* focus & selection */
        --ring: 210 21% 10% / 0.10;
        --selection: 145 41% 22% / 0.08;

        /* charts */
        --chart-1: 210 37% 9%;
        --chart-2: 145 41% 22%;
        --chart-3: 210 13% 45%;
        --chart-4: 0 0% 64%;
        --chart-5: 0 0% 83%;

        /* radii */
        --radius-xs: .25rem;
        --radius-sm: .375rem;
        --radius: .75rem;
        --radius-md: .875rem;
        --radius-lg: 1rem;
        --radius-xl: 1.25rem;
        --radius-2xl: 1.5rem;

        /* fluid typography - scales with viewport */
        --fs-body: clamp(0.95rem, 1vw + 0.6rem, 1.05rem);
        --fs-h1: clamp(1.75rem, 4vw + 0.5rem, 3rem);
        --fs-h2: clamp(1.5rem, 3vw + 0.5rem, 2.25rem);
        --fs-h3: clamp(1.25rem, 2.5vw + 0.5rem, 1.75rem);
        --fs-h4: clamp(1.125rem, 2vw + 0.25rem, 1.25rem);
        --fs-h5: clamp(1rem, 1.5vw + 0.25rem, 1.125rem);
        --fs-h6: clamp(0.875rem, 1vw + 0.25rem, 1rem);

        /* shadows (quiet) */
        --shadow-xs: 0 1px 2px rgba(2, 6, 23, .04);
        --shadow-sm: 0 1px 2px rgba(2, 6, 23, .06), 0 1px 1px rgba(2, 6, 23, .04);
        --shadow-md: 0 8px 26px rgba(2, 6, 23, .06);
        --shadow-lg: 0 14px 40px rgba(2, 6, 23, .08);
        --shadow-xl: 0 24px 60px rgba(2, 6, 23, .10);
        --shadow-2xl: 0 36px 80px rgba(2, 6, 23, .12);

        /* glass (optional) */
        --glass-background: rgba(255, 255, 255, .9);
        --glass-border: rgba(0, 0, 0, .06);
        --backdrop-blur: blur(12px);
    }

    /* DARK THEME (HSL triples) — apply via <html class="dark"> */
    html.dark {
        --background: 210 15% 8%;
        /* Warmer dark background */
        --foreground: 210 10% 90%;
        /* Softer light text */

        --card: 213 20% 10%;
        /* Slightly lighter than background */
        --card-foreground: 210 10% 90%;

        --popover: 213 20% 10%;
        --popover-foreground: 210 10% 90%;

        --primary: 145 50% 25%;
        --primary-foreground: 0 0% 100%;
        --primary-hover: 145 50% 30%;

        --secondary: 213 20% 10%;
        --secondary-foreground: 210 10% 90%;

        --muted: 216 15% 15%;
        /* Better dark muted */
        --muted-foreground: 210 8% 70%;
        /* Softer muted text */

        --accent: 216 20% 12%;
        /* Better dark accent */
        --accent-foreground: 210 10% 90%;
        --accent-hover: 216 20% 15%;

        --destructive: 0 70% 50%;
        --destructive-foreground: 0 0% 100%;
        --success: 145 60% 35%;
        --success-foreground: 0 0% 100%;
        --warning: 45 80% 50%;
        --warning-foreground: 0 0% 100%;
        --info: 210 70% 50%;
        --info-foreground: 0 0% 100%;

        --border: 211 20% 20%;
        /* Better dark borders */
        --border-light: 209 25% 15%;
        --input: 209 20% 15%;
        --input-background: 213 20% 10%;

        --ring: 0 0% 100% / .08;
        --selection: 145 50% 25% / .14;

        --chart-1: 206 18% 92%;
        --chart-2: 145 41% 22%;
        --chart-3: 210 11% 64%;
        --chart-4: 210 13% 45%;
        --chart-5: 212 24% 21%;
    }

    /* Global feel with Montserrat Typography System */
    * {
        font-family: 'Montserrat', 'Montserrat-Fallback', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji" !important;
    }

    html,
    body {
        font-family: 'Montserrat', 'Montserrat-Fallback', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji" !important;
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        transition: background-color .25s ease, color .25s ease, border-color .25s ease;
        font-weight: 400;
        line-height: 1.5;
        /* ~150% as specified */
    }

    /* Override default heading styles to use Montserrat with proper hierarchy */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: 'Montserrat', 'Montserrat-Fallback', ui-sans-serif, system-ui !important;
    }

    h1 {
        font-size: var(--fs-h1);
        line-height: 1.1;
        font-weight: 700;
        letter-spacing: -0.02em;
        word-wrap: break-word;
    }

    h2 {
        font-size: var(--fs-h2);
        line-height: 1.2;
        font-weight: 600;
        letter-spacing: -0.01em;
        word-wrap: break-word;
    }

    h3 {
        font-size: var(--fs-h3);
        line-height: 1.3;
        font-weight: 600;
        letter-spacing: -0.01em;
        word-wrap: break-word;
    }

    h4 {
        font-size: var(--fs-h4);
        line-height: 1.4;
        font-weight: 500;
        letter-spacing: 0;
        word-wrap: break-word;
    }

    h5 {
        font-size: var(--fs-h5);
        line-height: 1.5;
        font-weight: 500;
        letter-spacing: 0;
        word-wrap: break-word;
    }

    h6 {
        font-size: var(--fs-h6);
        line-height: 1.5;
        font-weight: 500;
        letter-spacing: 0;
        word-wrap: break-word;
    }

    /* Body text defaults */
    p,
    span,
    div,
    button,
    input,
    textarea,
    label {
        font-family: 'Montserrat', 'Montserrat-Fallback', ui-sans-serif, system-ui !important;
    }

    p {
        font-size: var(--fs-body);
        line-height: 1.6;
        font-weight: 400;
        word-wrap: break-word;
        overflow-wrap: break-word;
    }

    small {
        font-size: 0.75rem;
        /* 12px */
        line-height: 1.125rem;
        /* 18px */
        font-weight: 500;
        letter-spacing: 0.01em;
    }

    /* Enhanced card styling */
    .card,
    .claude-card {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: var(--radius-lg);
        transition: all 0.2s ease;
    }

    .card:hover,
    .claude-card:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
        transform: translateY(-1px);
    }

    /* Enhanced button styling */
    .btn-primary {
        background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary-hover)));
        box-shadow: 0 4px 12px rgba(33, 78, 52, 0.3);
        transition: all 0.2s ease;
    }

    .btn-primary:hover {
        box-shadow: 0 6px 20px rgba(33, 78, 52, 0.4);
        transform: translateY(-1px);
    }

    .btn-secondary {
        background: hsl(var(--secondary));
        border: 1px solid hsl(var(--border));
        transition: all 0.2s ease;
    }

    .btn-secondary:hover {
        background: hsl(var(--accent));
        border-color: hsl(var(--accent-hover));
        transform: translateY(-1px);
    }
}

/* -----------------------------------------
   COMPAT SHIM (optional):
   maps common Tailwind "hard" colors to tokens
   so legacy markup picks up the theme instantly.
   Remove once everything uses bg-background/text-foreground.
------------------------------------------ */
@layer utilities {
    .bg-white {
        background-color: hsl(var(--card)) !important;
    }

    .text-black {
        color: hsl(var(--foreground)) !important;
    }

    .text-gray-500 {
        color: hsl(var(--muted-foreground)) !important;
    }

    .border-gray-200 {
        border-color: hsl(var(--border)) !important;
    }

    .bg-gray-50 {
        background-color: hsl(var(--muted)) !important;
    }

    /* Semantic color utilities */
    .text-success {
        color: hsl(var(--success)) !important;
    }

    .bg-success {
        background-color: hsl(var(--success)) !important;
    }

    .text-warning {
        color: hsl(var(--warning)) !important;
    }

    .bg-warning {
        background-color: hsl(var(--warning)) !important;
    }

    .text-error {
        color: hsl(var(--destructive)) !important;
    }

    .bg-error {
        background-color: hsl(var(--destructive)) !important;
    }

    .text-info {
        color: hsl(var(--info)) !important;
    }

    .bg-info {
        background-color: hsl(var(--info)) !important;
    }

    /* Force Montserrat on specific Tailwind utilities */
    .font-sans {
        font-family: 'Montserrat', 'Montserrat-Fallback', ui-sans-serif, system-ui !important;
    }

    .font-serif {
        font-family: 'Montserrat', 'Montserrat-Fallback', ui-sans-serif, system-ui !important;
    }

    .font-mono {
        font-family: 'Montserrat', 'Montserrat-Fallback', ui-monospace, monospace !important;
    }

    /* Global font enforcement for fonts-loaded state */
    html.fonts-loaded *,
    html.fonts-loaded *:before,
    html.fonts-loaded *:after {
        font-family: 'Montserrat', 'Montserrat-Fallback', ui-sans-serif, system-ui !important;
    }

    /* Blog Post Content Styling */
    .prose h2 {
        font-family: 'Montserrat', 'Montserrat-Fallback', ui-sans-serif, system-ui !important;
        font-size: 1.875rem;
        font-weight: 600;
        line-height: 1.3;
        letter-spacing: -0.01em;
        margin-top: 3rem;
        margin-bottom: 1.5rem;
    }

    .prose h3 {
        font-family: 'Montserrat', 'Montserrat-Fallback', ui-sans-serif, system-ui !important;
        font-size: 1.5rem;
        font-weight: 600;
        line-height: 1.4;
        letter-spacing: -0.01em;
        margin-top: 2.5rem;
        margin-bottom: 1rem;
    }

    .prose p {
        font-size: 1.125rem;
        line-height: 1.8;
        margin-bottom: 1.5rem;
    }

    .prose ul {
        margin: 1.5rem 0;
        padding-left: 1.5rem;
    }

    .prose li {
        font-size: 1.125rem;
        line-height: 1.8;
        margin-bottom: 0.75rem;
    }

    .prose strong {
        font-weight: 600;
    }

    /* Additional responsive utilities */
    .text-balance {
        text-wrap: balance;
    }

    .text-pretty {
        text-wrap: pretty;
    }

    .break-words {
        word-wrap: break-word;
        overflow-wrap: break-word;
        word-break: break-word;
    }

    .break-all {
        word-break: break-all;
    }

    /* Responsive container utilities */
    .container-responsive {
        max-width: 100%;
        margin-left: auto;
        margin-right: auto;
        padding-left: 1rem;
        padding-right: 1rem;
    }

    @media (min-width: 640px) {
        .container-responsive {
            max-width: 640px;
            padding-left: 1.5rem;
            padding-right: 1.5rem;
        }
    }

    @media (min-width: 768px) {
        .container-responsive {
            max-width: 768px;
        }
    }

    @media (min-width: 1024px) {
        .container-responsive {
            max-width: 1024px;
            padding-left: 2rem;
            padding-right: 2rem;
        }
    }

    @media (min-width: 1280px) {
        .container-responsive {
            max-width: 1280px;
        }
    }

    @media (min-width: 1536px) {
        .container-responsive {
            max-width: 1536px;
        }
    }

    /* Responsive grid utilities */
    .grid-responsive-1 {
        display: grid;
        gap: 1rem;
        grid-template-columns: 1fr;
    }

    .grid-responsive-2 {
        display: grid;
        gap: 1rem;
        grid-template-columns: 1fr;
    }

    @media (min-width: 640px) {
        .grid-responsive-2 {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    .grid-responsive-3 {
        display: grid;
        gap: 1rem;
        grid-template-columns: 1fr;
    }

    @media (min-width: 640px) {
        .grid-responsive-3 {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (min-width: 1024px) {
        .grid-responsive-3 {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    .grid-responsive-4 {
        display: grid;
        gap: 1rem;
        grid-template-columns: 1fr;
    }

    @media (min-width: 640px) {
        .grid-responsive-4 {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (min-width: 1024px) {
        .grid-responsive-4 {
            grid-template-columns: repeat(4, 1fr);
        }
    }

    /* Safe area utilities for mobile notches */
    .safe-top {
        padding-top: env(safe-area-inset-top);
    }

    .safe-bottom {
        padding-bottom: env(safe-area-inset-bottom);
    }

    .safe-left {
        padding-left: env(safe-area-inset-left);
    }

    .safe-right {
        padding-right: env(safe-area-inset-right);
    }

    /* Accordion animations */
    @keyframes accordion-down {
        from {
            height: 0;
        }

        to {
            height: var(--radix-accordion-content-height);
        }
    }

    @keyframes accordion-up {
        from {
            height: var(--radix-accordion-content-height);
        }

        to {
            height: 0;
        }
    }

    .animate-accordion-down {
        animation: accordion-down 0.2s ease-out;
    }

    .animate-accordion-up {
        animation: accordion-up 0.2s ease-out;
    }
}