@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   MOBILE-FIRST FOUNDATION
   ======================================== */

/* Safe area insets for notched devices (iPhone X+, etc.) */
:root {
    --safe-top: env(safe-area-inset-top, 0px);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --safe-left: env(safe-area-inset-left, 0px);
    --safe-right: env(safe-area-inset-right, 0px);
}

/* Inter font is loaded via next/font in layout.tsx */

/* ========================================
   RESPONSIVE FOUNDATION - NO OVERLAP SETUP
   ======================================== */

/* Universal CSS safety net */
*,
*::before,
*::after {
    box-sizing: border-box;
}

html {
    font-size: 16px;
    scroll-behavior: smooth;
}

/* Respect user's motion preferences (accessibility) */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

body {
    margin: 0;
    line-height: 1.5;
    -webkit-text-size-adjust: 100%;
    /* Prevent horizontal scroll on mobile */
    overflow-x: hidden;
}

*:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
    border-radius: 2px;
}

img,
picture,
video,
canvas,
svg {
    display: block;
    max-width: 100%;
    height: auto;
}

iframe {
    max-width: 100%;
}

/* Prevent text overflow */
.wrap {
    word-wrap: break-word;
    overflow-wrap: anywhere;
}

/* Grid utilities removed - use Tailwind grid classes in components */

/* Avoid fixed heights; let content grow */
.card {
    min-height: 0;
}

/* Fonts are loaded via next/font in layout.tsx (Inter) */

/* Tailwind V4 Theme Configuration */
@theme {
    --font-family-sans: var(--font-sans), ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";

    --color-background: hsl(var(--background));
    --color-foreground: hsl(var(--foreground));
    --color-card: hsl(var(--card));
    --color-card-foreground: hsl(var(--card-foreground));
    --color-popover: hsl(var(--popover));
    --color-popover-foreground: hsl(var(--popover-foreground));
    --color-primary: hsl(var(--primary));
    --color-primary-foreground: hsl(var(--primary-foreground));
    --color-secondary: hsl(var(--secondary));
    --color-secondary-foreground: hsl(var(--secondary-foreground));
    --color-muted: hsl(var(--muted));
    --color-muted-foreground: hsl(var(--muted-foreground));
    --color-accent: hsl(var(--accent));
    --color-accent-foreground: hsl(var(--accent-foreground));
    --color-destructive: hsl(var(--destructive));
    --color-destructive-foreground: hsl(var(--destructive-foreground));
    --color-border: hsl(var(--border));
    --color-input: hsl(var(--input));
    --color-ring: hsl(var(--ring));

    --border-radius: var(--radius);
    --border-radius-xs: var(--radius-xs);
    --border-radius-sm: var(--radius-sm);
    --border-radius-md: var(--radius-md);
    --border-radius-lg: var(--radius-lg);
    --border-radius-xl: var(--radius-xl);
    --border-radius-2xl: var(--radius-2xl);
}

/* ===========================
   Claude-like Global Theme (HSL) — place LAST in globals.css
   =========================== */
@layer base {

    /* LIGHT THEME (HSL triples) - Premium Clean Design */
    :root,
    html {
        /* Premium light gray background */
        --background: 0 0% 97%;
        /* #F6F6F7 - Light gray for modern look */
        --foreground: 220 10% 15%;
        /* Darker text for better contrast on white */

        --card: 0 0% 99%;
        /* Slightly off-white for subtle contrast */
        --card-foreground: 220 10% 15%;

        --popover: 0 0% 100%;
        --popover-foreground: 220 10% 15%;

        /* Subtle section breaks for depth */
        --section-alt: 210 5% 98%;
        /* Very light neutral for feature bands */

        /* Dual-tone color system */
        --color-primary: #20603A;
        --color-accent: #166534;
        --color-background: #F6F6F7;
        --color-foreground: #212325;
        --color-muted: #6B7280;

        /* VAH Brand Green #20603A */
        --primary: 144 50% 25%;
        /* Brand primary color */
        --primary-foreground: 0 0% 100%;
        --primary-hover: 144 50% 20%;
        /* Slightly darker hover state */

        /* Brand primary scale - #20603A based */
        --primary-50: 144 50% 97%;
        --primary-100: 144 50% 93%;
        --primary-200: 144 50% 86%;
        --primary-300: 144 50% 79%;
        --primary-400: 144 50% 72%;
        --primary-500: 144 50% 25%;
        --primary-600: 144 50% 20%;
        --primary-700: 144 50% 18%;
        --primary-800: 144 50% 15%;
        --primary-900: 144 50% 12%;

        /* Accent green scale */
        --accent: 145 50% 25%;
        --accent-foreground: 0 0% 100%;
        --accent-hover: 145 50% 20%;
        --accent-50: 145 50% 97%;
        --accent-100: 145 50% 90%;
        --accent-200: 145 50% 80%;
        --accent-300: 145 50% 70%;
        --accent-400: 145 50% 60%;
        --accent-500: 145 50% 50%;
        --accent-600: 145 50% 40%;
        --accent-700: 145 50% 30%;
        --accent-800: 145 50% 20%;
        --accent-900: 145 50% 15%;

        /* Accent color utilities */
        .bg-accent {
            background-color: hsl(var(--accent));
        }

        .text-accent {
            color: hsl(var(--accent));
        }

        .border-accent {
            border-color: hsl(var(--accent));
        }

        .hover\:bg-accent:hover {
            background-color: hsl(var(--accent));
        }

        .hover\:text-accent:hover {
            color: hsl(var(--accent));
        }

        .hover\:border-accent:hover {
            border-color: hsl(var(--accent));
        }

        /* Accent scale utilities */
        .bg-accent-50 {
            background-color: hsl(var(--accent-50));
        }

        .bg-accent-200 {
            background-color: hsl(var(--accent-200));
        }

        .bg-accent-700 {
            background-color: hsl(var(--accent-700));
        }

        .text-accent-50 {
            color: hsl(var(--accent-50));
        }

        .text-accent-200 {
            color: hsl(var(--accent-200));
        }

        .text-accent-700 {
            color: hsl(var(--accent-700));
        }

        .border-accent-50 {
            border-color: hsl(var(--accent-50));
        }

        .border-accent-200 {
            border-color: hsl(var(--accent-200));
        }

        .border-accent-700 {
            border-color: hsl(var(--accent-700));
        }

        /* Trust badge styling */
        .bg-trust-badge {
            background-color: hsl(var(--accent-50));
        }

        .text-trust-badge {
            color: hsl(var(--accent-700));
        }

        .border-trust-badge {
            border-color: hsl(var(--accent-200));
        }

        /* Success/accent button styling */
        .btn-accent {
            background-color: hsl(var(--accent));
            color: hsl(var(--accent-foreground));
            border: 1px solid hsl(var(--accent));
        }

        .btn-accent:hover {
            background-color: hsl(var(--accent-hover));
            border-color: hsl(var(--accent-hover));
        }


        --muted: 210 5% 96%;
        /* Subtle neutral for muted sections */
        --muted-foreground: 220 10% 35%;
        /* Better contrast on white */

        /* Enhanced semantic colors */
        --destructive: 0 70% 50%;
        --destructive-foreground: 0 0% 100%;
        --success: 145 60% 35%;
        --success-foreground: 0 0% 100%;
        --warning: 45 80% 50%;
        --warning-foreground: 0 0% 100%;
        --info: 210 70% 50%;
        --info-foreground: 0 0% 100%;

        /* Clean borders for white background */
        --border: 0 0% 85%;
        /* Slightly darker border for better card definition */
        --border-light: 0 0% 90%;
        /* Lighter border for subtle elements */
        --input: 0 0% 96%;
        /* Subtle input background */
        --input-background: 0 0% 100%;
        --switch-background: 0 0% 90%;

        /* focus & selection */
        --ring: 144 50% 25% / 0.28;
        /* primary green focus ring */
        --selection: 144 50% 25% / 0.12;
        /* subtle primary green selection */

        /* charts */
        --chart-1: 210 37% 9%;
        --chart-2: 145 41% 22%;
        --chart-3: 210 13% 45%;
        --chart-4: 0 0% 64%;
        --chart-5: 0 0% 83%;

        /* radii */
        --radius-xs: .25rem;
        --radius-sm: .375rem;
        --radius: .75rem;
        --radius-md: .875rem;
        --radius-lg: 1rem;
        --radius-xl: 1.25rem;
        --radius-2xl: 1.5rem;

        /* Fluid typography variables removed - components use Tailwind scale */

        /* shadows (quiet) */
        --shadow-xs: 0 1px 2px rgba(2, 6, 23, .04);
        --shadow-sm: 0 1px 2px rgba(2, 6, 23, .06);
        --shadow-md: 0 8px 26px rgba(2, 6, 23, .06);
        --shadow-lg: 0 14px 40px rgba(2, 6, 23, .08);
        --shadow-xl: 0 24px 60px rgba(2, 6, 23, .10);
        --shadow-2xl: 0 36px 80px rgba(2, 6, 23, .12);

        /* glass (optional) */
        --glass-background: rgba(255, 255, 255, .9);
        --glass-border: rgba(0, 0, 0, .06);
        --backdrop-blur: blur(12px);
    }

    /* DARK THEME (HSL triples) — apply via <html class="dark"> */
    html.dark {
        --background: 210 15% 8%;
        /* Warmer dark background */
        --foreground: 210 10% 90%;
        /* Softer light text */

        --card: 213 20% 10%;
        /* Slightly lighter than background */
        --card-foreground: 210 10% 90%;

        --popover: 213 20% 10%;
        --popover-foreground: 210 10% 90%;

        --primary: 144 50% 25%;
        --primary-foreground: 0 0% 100%;
        --primary-hover: 144 50% 20%;

        --secondary: 180 7% 62%;
        --secondary-foreground: 0 0% 100%;

        --muted: 216 15% 15%;
        /* Better dark muted */
        --muted-foreground: 210 8% 70%;
        /* Softer muted text */

        --accent: 216 20% 12%;
        /* Better dark accent */
        --accent-foreground: 210 10% 90%;
        --accent-hover: 216 20% 15%;

        --destructive: 0 70% 50%;
        --destructive-foreground: 0 0% 100%;
        --success: 145 60% 35%;
        --success-foreground: 0 0% 100%;
        --warning: 45 80% 50%;
        --warning-foreground: 0 0% 100%;
        --info: 210 70% 50%;
        --info-foreground: 0 0% 100%;

        --border: 211 20% 20%;
        /* Better dark borders */
        --border-light: 209 25% 15%;
        --input: 209 20% 15%;
        --input-background: 213 20% 10%;

        --ring: 144 50% 25% / 0.28;
        --selection: 144 50% 25% / 0.12;

        --chart-1: 206 18% 92%;
        --chart-2: 145 41% 22%;
        --chart-3: 210 11% 64%;
        --chart-4: 210 13% 45%;
        --chart-5: 212 24% 21%;
    }

    /* Scoped typography */
    html,
    body {
        font-family: var(--font-sans), ui-sans-serif, system-ui, sans-serif;
        font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        transition: background-color .25s ease, color .25s ease, border-color .25s ease;
        font-weight: 400;
        line-height: 1.5;
        /* ~150% as specified */
    }

    /* Typography defaults - components control their own sizing */
    /* Headings inherit from Tailwind utilities in components */
    /* Body text uses Inter via font-sans */

    small {
        font-size: 0.75rem;
        /* 12px */
        line-height: 1.125rem;
        /* 18px */
        font-weight: 500;
        letter-spacing: 0.01em;
    }

    /* Enhanced card styling */
    .card,
    .claude-card {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: var(--radius-lg);
        transition: all 0.2s ease;
    }

    .card:hover,
    .claude-card:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
        transform: translateY(-1px);
    }

    /* Enhanced button styling */
    .btn-primary {
        background: hsl(var(--primary));
        color: hsl(var(--primary-foreground));
        transition: all 0.2s ease;
    }

    .btn-primary:hover {
        background: hsl(var(--primary-hover));
    }

    .btn-secondary {
        background: hsl(var(--secondary));
        border: 1px solid hsl(var(--border));
        transition: all 0.2s ease;
    }

    .btn-secondary:hover {
        background: hsl(var(--accent));
        border-color: hsl(var(--accent-hover));
        transform: translateY(-1px);
    }
}

/* -----------------------------------------
   COMPAT SHIM (optional):
   maps common Tailwind "hard" colors to tokens
   so legacy markup picks up the theme instantly.
   Remove once everything uses bg-background/text-foreground.
------------------------------------------ */
@layer utilities {
    .bg-white {
        background-color: hsl(var(--card)) !important;
    }

    .text-black {
        color: hsl(var(--foreground)) !important;
    }

    .text-gray-500 {
        color: hsl(var(--muted-foreground)) !important;
    }

    .border-gray-200 {
        border-color: hsl(var(--border)) !important;
    }

    .bg-gray-50 {
        background-color: hsl(var(--muted)) !important;
    }

    /* Semantic color utilities */
    .text-success {
        color: hsl(var(--success)) !important;
    }

    .bg-success {
        background-color: hsl(var(--success)) !important;
    }

    .text-warning {
        color: hsl(var(--warning)) !important;
    }

    .bg-warning {
        background-color: hsl(var(--warning)) !important;
    }

    .text-error {
        color: hsl(var(--destructive)) !important;
    }

    .bg-error {
        background-color: hsl(var(--destructive)) !important;
    }

    .text-info {
        color: hsl(var(--info)) !important;
    }

    .bg-info {
        background-color: hsl(var(--info)) !important;
    }

    /* Font utilities use CSS variables from next/font */
    /* .font-sans uses var(--font-sans) from Tailwind config (Inter) */

    /* Blog Post Content Styling */
    .prose h2 {
        font-size: 1.875rem;
        font-weight: 600;
        line-height: 1.3;
        letter-spacing: -0.01em;
        margin-top: 3rem;
        margin-bottom: 1.5rem;
        color: hsl(var(--primary));
    }

    .prose h3 {
        font-size: 1.5rem;
        font-weight: 600;
        line-height: 1.4;
        letter-spacing: -0.01em;
        margin-top: 2.5rem;
        margin-bottom: 1rem;
        color: hsl(var(--primary));
    }

    .prose p {
        font-size: 1.125rem;
        line-height: 1.8;
        margin-bottom: 1.5rem;
    }

    .prose ul {
        margin: 1.5rem 0;
        padding-left: 1.5rem;
    }

    .prose li {
        font-size: 1.125rem;
        line-height: 1.8;
        margin-bottom: 0.75rem;
    }

    .prose strong {
        font-weight: 600;
    }

    /* Additional responsive utilities */
    .text-pretty {
        text-wrap: pretty;
    }

    .break-words {
        word-wrap: break-word;
        overflow-wrap: break-word;
        word-break: break-word;
    }

    .break-all {
        word-break: break-all;
    }

    /* Container and grid utilities removed - use Tailwind classes in components */

    /* Safe area utilities for mobile notches */
    .safe-top {
        padding-top: env(safe-area-inset-top);
    }

    .safe-bottom {
        padding-bottom: env(safe-area-inset-bottom);
    }

    .safe-left {
        padding-left: env(safe-area-inset-left);
    }

    .safe-right {
        padding-right: env(safe-area-inset-right);
    }

    /* Accordion animations */
    @keyframes accordion-down {
        from {
            height: 0;
        }

        to {
            height: var(--radix-accordion-content-height);
        }
    }

    @keyframes accordion-up {
        from {
            height: var(--radix-accordion-content-height);
        }

        to {
            height: 0;
        }
    }

    .animate-accordion-down {
        animation: accordion-down 0.2s ease-out;
    }

    .animate-accordion-up {
        animation: accordion-up 0.2s ease-out;
    }

    /* Premium UI Enhancements for White Background */
    .card-modern {
        @apply bg-card border border-border rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
    }

    .gradient-hero {
        background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary-hover)));
    }

    .section-padding {
        @apply py-12 lg:py-16;
    }

    .section-alt {
        background-color: hsl(var(--section-alt));
    }

    .text-gradient {
        @apply bg-gradient-to-r from-primary to-primary bg-clip-text text-transparent;
    }

    .shadow-modern-lg {
        box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }

    /* Premium focus states for white background */
    .focus-ring {
        @apply focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2;
    }

    /* Section band using your --section-alt */
    .section--alt {
        background-color: hsl(var(--section-alt));
    }

}

/* ========================================
   PROSE UTILITIES (for long-form content only)
   ======================================== */

/* Prose utilities for blog/content pages only */
.prose-mobile {
    max-width: 65ch;
    line-height: 1.65;
}

/* Touch target + spacing helpers */
.tt-min {
    min-height: 44px;
    min-width: 44px;
}

.safe-pad {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
}

/* Cards look good on mobile by default */
.card-mobile {
    @apply rounded-2xl shadow-sm border border-zinc-200 bg-white;
}

/* Reduce ragged edges for lists on small screens */
.prose-mobile ul,
.prose-mobile ol {
    padding-left: 1.1rem;
}